!function(global,factory){"object"==typeof module&&"object"==typeof module.exports?module.exports=global.document?factory(global,!0):function(w){if(!w.document)throw new Error("jQuery requires a window with a document");return factory(w)}:factory(global)}("undefined"!=typeof window?window:this,function(window,noGlobal){function isArraylike(obj){var length="length"in obj&&obj.length,type=jQuery.type(obj);return"function"===type||jQuery.isWindow(obj)?!1:1===obj.nodeType&&length?!0:"array"===type||0===length||"number"==typeof length&&length>0&&length-1 in obj}function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not});if(qualifier.nodeType)return jQuery.grep(elements,function(elem){return elem===qualifier!==not});if("string"==typeof qualifier){if(risSimple.test(qualifier))return jQuery.filter(qualifier,elements,not);qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return jQuery.inArray(elem,qualifier)>=0!==not})}function sibling(cur,dir){do cur=cur[dir];while(cur&&1!==cur.nodeType);return cur}function createOptions(options){var object=optionsCache[options]={};return jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=!0}),object}function detach(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",completed,!1),window.removeEventListener("load",completed,!1)):(document.detachEvent("onreadystatechange",completed),window.detachEvent("onload",completed))}function completed(){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(detach(),jQuery.ready())}function dataAttr(elem,key,data){if(void 0===data&&1===elem.nodeType){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();if(data=elem.getAttribute(name),"string"==typeof data){try{data="true"===data?!0:"false"===data?!1:"null"===data?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=void 0}return data}function isEmptyDataObject(obj){var name;for(name in obj)if(("data"!==name||!jQuery.isEmptyObject(obj[name]))&&"toJSON"!==name)return!1;return!0}function internalData(elem,name,data,pvt){if(jQuery.acceptData(elem)){var ret,thisCache,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey;if(id&&cache[id]&&(pvt||cache[id].data)||void 0!==data||"string"!=typeof name)return id||(id=isNode?elem[internalKey]=deletedIds.pop()||jQuery.guid++:internalKey),cache[id]||(cache[id]=isNode?{}:{toJSON:jQuery.noop}),("object"==typeof name||"function"==typeof name)&&(pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name)),thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),void 0!==data&&(thisCache[jQuery.camelCase(name)]=data),"string"==typeof name?(ret=thisCache[name],null==ret&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret}}function internalRemoveData(elem,name,pvt){if(jQuery.acceptData(elem)){var thisCache,i,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[jQuery.expando]:jQuery.expando;if(cache[id]){if(name&&(thisCache=pvt?cache[id]:cache[id].data)){jQuery.isArray(name)?name=name.concat(jQuery.map(name,jQuery.camelCase)):name in thisCache?name=[name]:(name=jQuery.camelCase(name),name=name in thisCache?[name]:name.split(" ")),i=name.length;for(;i--;)delete thisCache[name[i]];if(pvt?!isEmptyDataObject(thisCache):!jQuery.isEmptyObject(thisCache))return}(pvt||(delete cache[id].data,isEmptyDataObject(cache[id])))&&(isNode?jQuery.cleanData([elem],!0):support.deleteExpando||cache!=cache.window?delete cache[id]:cache[id]=null)}}}function returnTrue(){return!0}function returnFalse(){return!1}function safeActiveElement(){try{return document.activeElement}catch(err){}}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)for(;list.length;)safeFrag.createElement(list.pop());return safeFrag}function getAll(context,tag){var elems,elem,i=0,found=typeof context.getElementsByTagName!==strundefined?context.getElementsByTagName(tag||"*"):typeof context.querySelectorAll!==strundefined?context.querySelectorAll(tag||"*"):void 0;if(!found)for(found=[],elems=context.childNodes||context;null!=(elem=elems[i]);i++)!tag||jQuery.nodeName(elem,tag)?found.push(elem):jQuery.merge(found,getAll(elem,tag));return void 0===tag||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],found):found}function fixDefaultChecked(elem){rcheckableType.test(elem.type)&&(elem.defaultChecked=elem.checked)}function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(11!==content.nodeType?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){return elem.type=(null!==jQuery.find.attr(elem,"type"))+"/"+elem.type,elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);return match?elem.type=match[1]:elem.removeAttribute("type"),elem}function setGlobalEval(elems,refElements){for(var elem,i=0;null!=(elem=elems[i]);i++)jQuery._data(elem,"globalEval",!refElements||jQuery._data(refElements[i],"globalEval"))}function cloneCopyEvent(src,dest){if(1===dest.nodeType&&jQuery.hasData(src)){var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;l>i;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}}function fixCloneNodeIssues(src,dest){var nodeName,e,data;if(1===dest.nodeType){if(nodeName=dest.nodeName.toLowerCase(),!support.noCloneEvent&&dest[jQuery.expando]){data=jQuery._data(dest);for(e in data.events)jQuery.removeEvent(dest,e,data.handle);dest.removeAttribute(jQuery.expando)}"script"===nodeName&&dest.text!==src.text?(disableScript(dest).text=src.text,restoreScript(dest)):"object"===nodeName?(dest.parentNode&&(dest.outerHTML=src.outerHTML),support.html5Clone&&src.innerHTML&&!jQuery.trim(dest.innerHTML)&&(dest.innerHTML=src.innerHTML)):"input"===nodeName&&rcheckableType.test(src.type)?(dest.defaultChecked=dest.checked=src.checked,dest.value!==src.value&&(dest.value=src.value)):"option"===nodeName?dest.defaultSelected=dest.selected=src.defaultSelected:("input"===nodeName||"textarea"===nodeName)&&(dest.defaultValue=src.defaultValue)}}function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");return elem.detach(),display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];return display||(display=actualDisplay(nodeName,doc),"none"!==display&&display||(iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement),doc=(iframe[0].contentWindow||iframe[0].contentDocument).document,doc.write(),doc.close(),display=actualDisplay(nodeName,doc),iframe.detach()),elemdisplay[nodeName]=display),display}function addGetHookIf(conditionFn,hookFn){return{get:function(){var condition=conditionFn();if(null!=condition)return condition?void delete this.get:(this.get=hookFn).apply(this,arguments)}}}function vendorPropName(style,name){if(name in style)return name;for(var capName=name.charAt(0).toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;i--;)if(name=cssPrefixes[i]+capName,name in style)return name;return origName}function showHide(elements,show){for(var display,elem,hidden,values=[],index=0,length=elements.length;length>index;index++)elem=elements[index],elem.style&&(values[index]=jQuery._data(elem,"olddisplay"),display=elem.style.display,show?(values[index]||"none"!==display||(elem.style.display=""),""===elem.style.display&&isHidden(elem)&&(values[index]=jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)))):(hidden=isHidden(elem),(display&&"none"!==display||!hidden)&&jQuery._data(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))));for(index=0;length>index;index++)elem=elements[index],elem.style&&(show&&"none"!==elem.style.display&&""!==elem.style.display||(elem.style.display=show?values[index]||"":"none"));return elements}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){for(var i=extra===(isBorderBox?"border":"content")?4:"width"===name?1:0,val=0;4>i;i+=2)"margin"===extra&&(val+=jQuery.css(elem,extra+cssExpand[i],!0,styles)),isBorderBox?("content"===extra&&(val-=jQuery.css(elem,"padding"+cssExpand[i],!0,styles)),"margin"!==extra&&(val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles))):(val+=jQuery.css(elem,"padding"+cssExpand[i],!0,styles),"padding"!==extra&&(val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",!0,styles)));return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=!0,val="width"===name?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles);if(0>=val||null==val){if(val=curCSS(elem,name,styles),(0>val||null==val)&&(val=elem.style[name]),rnumnonpx.test(val))return val;valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]),val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}function createFxNow(){return setTimeout(function(){fxNow=void 0}),fxNow=jQuery.now()}function genFx(type,includeWidth){var which,attrs={height:type},i=0;for(includeWidth=includeWidth?1:0;4>i;i+=2-includeWidth)which=cssExpand[i],attrs["margin"+which]=attrs["padding"+which]=type;return includeWidth&&(attrs.opacity=attrs.width=type),attrs}function createTween(value,prop,animation){for(var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;length>index;index++)if(tween=collection[index].call(animation,prop,value))return tween}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=jQuery._data(elem,"fxshow");opts.queue||(hooks=jQuery._queueHooks(elem,"fx"),null==hooks.unqueued&&(hooks.unqueued=0,oldfire=hooks.empty.fire,hooks.empty.fire=function(){hooks.unqueued||oldfire()}),hooks.unqueued++,anim.always(function(){anim.always(function(){hooks.unqueued--,jQuery.queue(elem,"fx").length||hooks.empty.fire()})})),1===elem.nodeType&&("height"in props||"width"in props)&&(opts.overflow=[style.overflow,style.overflowX,style.overflowY],display=jQuery.css(elem,"display"),checkDisplay="none"===display?jQuery._data(elem,"olddisplay")||defaultDisplay(elem.nodeName):display,"inline"===checkDisplay&&"none"===jQuery.css(elem,"float")&&(support.inlineBlockNeedsLayout&&"inline"!==defaultDisplay(elem.nodeName)?style.zoom=1:style.display="inline-block")),opts.overflow&&(style.overflow="hidden",support.shrinkWrapBlocks()||anim.always(function(){style.overflow=opts.overflow[0],style.overflowX=opts.overflow[1],style.overflowY=opts.overflow[2]}));for(prop in props)if(value=props[prop],rfxtypes.exec(value)){if(delete props[prop],toggle=toggle||"toggle"===value,value===(hidden?"hide":"show")){if("show"!==value||!dataShow||void 0===dataShow[prop])continue;hidden=!0}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else display=void 0;if(jQuery.isEmptyObject(orig))"inline"===("none"===display?defaultDisplay(elem.nodeName):display)&&(style.display=display);else{dataShow?"hidden"in dataShow&&(hidden=dataShow.hidden):dataShow=jQuery._data(elem,"fxshow",{}),toggle&&(dataShow.hidden=!hidden),hidden?jQuery(elem).show():anim.done(function(){jQuery(elem).hide()}),anim.done(function(){var prop;jQuery._removeData(elem,"fxshow");for(prop in orig)jQuery.style(elem,prop,orig[prop])});for(prop in orig)tween=createTween(hidden?dataShow[prop]:0,prop,anim),prop in dataShow||(dataShow[prop]=tween.start,hidden&&(tween.end=tween.start,tween.start="width"===prop||"height"===prop?1:0))}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props)if(name=jQuery.camelCase(index),easing=specialEasing[name],value=props[index],jQuery.isArray(value)&&(easing=value[1],value=props[index]=value[0]),index!==name&&(props[name]=value,delete props[index]),hooks=jQuery.cssHooks[name],hooks&&"expand"in hooks){value=hooks.expand(value),delete props[name];for(index in value)index in props||(props[index]=value[index],specialEasing[index]=easing)}else specialEasing[name]=easing}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped)return!1;for(var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;length>index;index++)animation.tweens[index].run(percent);return deferred.notifyWith(elem,[animation,percent,remaining]),1>percent&&length?remaining:(deferred.resolveWith(elem,[animation]),!1)},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(!0,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);return animation.tweens.push(tween),tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped)return this;for(stopped=!0;length>index;index++)animation.tweens[index].run(1);return gotoEnd?deferred.resolveWith(elem,[animation,gotoEnd]):deferred.rejectWith(elem,[animation,gotoEnd]),this}}),props=animation.props;for(propFilter(props,animation.opts.specialEasing);length>index;index++)if(result=animationPrefilters[index].call(animation,elem,props,animation.opts))return result;return jQuery.map(props,createTween,animation),jQuery.isFunction(animation.opts.start)&&animation.opts.start.call(elem,animation),jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue})),animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){"string"!=typeof dataTypeExpression&&(func=dataTypeExpression,dataTypeExpression="*");var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func))for(;dataType=dataTypes[i++];)"+"===dataType.charAt(0)?(dataType=dataType.slice(1)||"*",(structure[dataType]=structure[dataType]||[]).unshift(func)):(structure[dataType]=structure[dataType]||[]).push(func)}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){function inspect(dataType){var selected;return inspected[dataType]=!0,jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);return"string"!=typeof dataTypeOrTransport||seekingTransport||inspected[dataTypeOrTransport]?seekingTransport?!(selected=dataTypeOrTransport):void 0:(options.dataTypes.unshift(dataTypeOrTransport),inspect(dataTypeOrTransport),!1)}),selected}var inspected={},seekingTransport=structure===transports;return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var deep,key,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)void 0!==src[key]&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);return deep&&jQuery.extend(!0,target,deep),target}function ajaxHandleResponses(s,jqXHR,responses){for(var firstDataType,ct,finalDataType,type,contents=s.contents,dataTypes=s.dataTypes;"*"===dataTypes[0];)dataTypes.shift(),void 0===ct&&(ct=s.mimeType||jqXHR.getResponseHeader("Content-Type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}return finalDataType?(finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]):void 0}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1])for(conv in s.converters)converters[conv.toLowerCase()]=s.converters[conv];for(current=dataTypes.shift();current;)if(s.responseFields[current]&&(jqXHR[s.responseFields[current]]=response),!prev&&isSuccess&&s.dataFilter&&(response=s.dataFilter(response,s.dataType)),prev=current,current=dataTypes.shift())if("*"===current)current=prev;else if("*"!==prev&&prev!==current){if(conv=converters[prev+" "+current]||converters["* "+current],!conv)for(conv2 in converters)if(tmp=conv2.split(" "),tmp[1]===current&&(conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]])){conv===!0?conv=converters[conv2]:converters[conv2]!==!0&&(current=tmp[0],dataTypes.unshift(tmp[1]));break}if(conv!==!0)if(conv&&s["throws"])response=conv(response);else try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}return{state:"success",data:response}}function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+("object"==typeof v?i:"")+"]",v,traditional,add)});else if(traditional||"object"!==jQuery.type(obj))add(prefix,obj);else for(name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add)}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function getWindow(elem){return jQuery.isWindow(elem)?elem:9===elem.nodeType?elem.defaultView||elem.parentWindow:!1}var deletedIds=[],slice=deletedIds.slice,concat=deletedIds.concat,push=deletedIds.push,indexOf=deletedIds.indexOf,class2type={},toString=class2type.toString,hasOwn=class2type.hasOwnProperty,support={},version="1.11.3",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return null!=num?0>num?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);return ret.prevObject=this,ret.context=this.context,ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(0>i?len:0);return this.pushStack(j>=0&&len>j?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:deletedIds.sort,splice:deletedIds.splice},jQuery.extend=jQuery.fn.extend=function(){var src,copyIsArray,copy,name,options,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"==typeof target||jQuery.isFunction(target)||(target={}),i===length&&(target=this,i--);length>i;i++)if(null!=(options=arguments[i]))for(name in options)src=target[name],copy=options[name],target!==copy&&(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target},jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:!0,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return"function"===jQuery.type(obj)},isArray:Array.isArray||function(obj){return"array"===jQuery.type(obj)},isWindow:function(obj){return null!=obj&&obj==obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)+1>=0},isEmptyObject:function(obj){var name;for(name in obj)return!1;return!0},isPlainObject:function(obj){var key;if(!obj||"object"!==jQuery.type(obj)||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(support.ownLast)for(key in obj)return hasOwn.call(obj,key);for(key in obj);return void 0===key||hasOwn.call(obj,key)},type:function(obj){return null==obj?obj+"":"object"==typeof obj||"function"==typeof obj?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(data){data&&jQuery.trim(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray)for(;length>i&&(value=callback.apply(obj[i],args),value!==!1);i++);else for(i in obj)if(value=callback.apply(obj[i],args),value===!1)break}else if(isArray)for(;length>i&&(value=callback.call(obj[i],i,obj[i]),value!==!1);i++);else for(i in obj)if(value=callback.call(obj[i],i,obj[i]),value===!1)break;return obj},trim:function(text){return null==text?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];return null!=arr&&(isArraylike(Object(arr))?jQuery.merge(ret,"string"==typeof arr?[arr]:arr):push.call(ret,arr)),ret},inArray:function(elem,arr,i){var len;if(arr){if(indexOf)return indexOf.call(arr,elem,i);for(len=arr.length,i=i?0>i?Math.max(0,len+i):i:0;len>i;i++)if(i in arr&&arr[i]===elem)return i}return-1},merge:function(first,second){for(var len=+second.length,j=0,i=first.length;len>j;)first[i++]=second[j++];if(len!==len)for(;void 0!==second[j];)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,invert){for(var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;length>i;i++)callbackInverse=!callback(elems[i],i),callbackInverse!==callbackExpect&&matches.push(elems[i]);return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray)for(;length>i;i++)value=callback(elems[i],i,arg),null!=value&&ret.push(value);else for(i in elems)value=callback(elems[i],i,arg),null!=value&&ret.push(value);return concat.apply([],ret)},guid:1,proxy:function(fn,context){var args,proxy,tmp;return"string"==typeof context&&(tmp=fn[context],context=fn,fn=tmp),jQuery.isFunction(fn)?(args=slice.call(arguments,2),proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))},proxy.guid=fn.guid=fn.guid||jQuery.guid++,proxy):void 0},now:function(){return+new Date},support:support}),jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});var Sizzle=function(window){function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document&&setDocument(context),context=context||document,results=results||[],nodeType=context.nodeType,"string"!=typeof selector||!selector||1!==nodeType&&9!==nodeType&&11!==nodeType)return results;if(!seed&&documentIsHTML){if(11!==nodeType&&(match=rquickExpr.exec(selector)))if(m=match[1]){if(9===nodeType){if(elem=context.getElementById(m),!elem||!elem.parentNode)return results;if(elem.id===m)return results.push(elem),results}else if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m)return results.push(elem),results}else{if(match[2])return push.apply(results,context.getElementsByTagName(selector)),results;if((m=match[3])&&support.getElementsByClassName)return push.apply(results,context.getElementsByClassName(m)),results}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){if(nid=old=expando,newContext=context,newSelector=1!==nodeType&&selector,1===nodeType&&"object"!==context.nodeName.toLowerCase()){for(groups=tokenize(selector),(old=context.getAttribute("id"))?nid=old.replace(rescape,"\\$&"):context.setAttribute("id",nid),nid="[id='"+nid+"'] ",i=groups.length;i--;)groups[i]=nid+toSelector(groups[i]);newContext=rsibling.test(selector)&&testContext(context.parentNode)||context,newSelector=groups.join(",")}if(newSelector)try{return push.apply(results,newContext.querySelectorAll(newSelector)),results}catch(qsaError){}finally{old||context.removeAttribute("id")}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){function cache(key,value){return keys.push(key+" ")>Expr.cacheLength&&delete cache[keys.shift()],cache[key+" "]=value}var keys=[];return cache}function markFunction(fn){return fn[expando]=!0,fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return!1}finally{div.parentNode&&div.parentNode.removeChild(div),div=null}}function addHandle(attrs,handler){for(var arr=attrs.split("|"),i=attrs.length;i--;)Expr.attrHandle[arr[i]]=handler}function siblingCheck(a,b){var cur=b&&a,diff=cur&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff)return diff;if(cur)for(;cur=cur.nextSibling;)if(cur===b)return-1;return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return("input"===name||"button"===name)&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){return argument=+argument,markFunction(function(seed,matches){for(var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;i--;)seed[j=matchIndexes[i]]&&(seed[j]=!(matches[j]=seed[j]))})})}function testContext(context){return context&&"undefined"!=typeof context.getElementsByTagName&&context}function setFilters(){}function toSelector(tokens){for(var i=0,len=tokens.length,selector="";len>i;i++)selector+=tokens[i].value;return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&"parentNode"===dir,doneName=done++;return combinator.first?function(elem,context,xml){for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements)return matcher(elem,context,xml)}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){for(;elem=elem[dir];)if((1===elem.nodeType||checkNonElements)&&matcher(elem,context,xml))return!0}else for(;elem=elem[dir];)if(1===elem.nodeType||checkNonElements){if(outerCache=elem[expando]||(elem[expando]={}),(oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName)return newCache[2]=oldCache[2];if(outerCache[dir]=newCache,newCache[2]=matcher(elem,context,xml))return!0}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){for(var i=matchers.length;i--;)if(!matchers[i](elem,context,xml))return!1;return!0}:matchers[0]}function multipleContexts(selector,contexts,results){for(var i=0,len=contexts.length;len>i;i++)Sizzle(selector,contexts[i],results);return results}function condense(unmatched,map,filter,context,xml){for(var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=null!=map;len>i;i++)(elem=unmatched[i])&&(!filter||filter(elem,context,xml))&&(newUnmatched.push(elem),mapped&&map.push(i));return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){return postFilter&&!postFilter[expando]&&(postFilter=setMatcher(postFilter)),postFinder&&!postFinder[expando]&&(postFinder=setMatcher(postFinder,postSelector)),markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=!preFilter||!seed&&selector?elems:condense(elems,preMap,preFilter,context,xml),matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher&&matcher(matcherIn,matcherOut,context,xml),postFilter)for(temp=condense(matcherOut,postMap),postFilter(temp,[],context,xml),i=temp.length;i--;)(elem=temp[i])&&(matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem));if(seed){if(postFinder||preFilter){if(postFinder){for(temp=[],i=matcherOut.length;i--;)(elem=matcherOut[i])&&temp.push(matcherIn[i]=elem);postFinder(null,matcherOut=[],temp,xml)}for(i=matcherOut.length;i--;)(elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1&&(seed[temp]=!(results[temp]=elem))}}else matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut),postFinder?postFinder(null,results,matcherOut,xml):push.apply(results,matcherOut)})}function matcherFromTokens(tokens){for(var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,!0),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,!0),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));return checkContext=null,ret}];len>i;i++)if(matcher=Expr.relative[tokens[i].type])matchers=[addCombinator(elementMatcher(matchers),matcher)];else{if(matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches),matcher[expando]){for(j=++i;len>j&&!Expr.relative[tokens[j].type];j++);return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:" "===tokens[i-2].type?"*":""})).replace(rtrim,"$1"),matcher,j>i&&matcherFromTokens(tokens.slice(i,j)),len>j&&matcherFromTokens(tokens=tokens.slice(j)),len>j&&toSelector(tokens))}matchers.push(matcher)}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find.TAG("*",outermost),dirrunsUnique=dirruns+=null==contextBackup?1:Math.random()||.1,len=elems.length;for(outermost&&(outermostContext=context!==document&&context);i!==len&&null!=(elem=elems[i]);i++){if(byElement&&elem){for(j=0;matcher=elementMatchers[j++];)if(matcher(elem,context,xml)){results.push(elem);
break}outermost&&(dirruns=dirrunsUnique)}bySet&&((elem=!matcher&&elem)&&matchedCount--,seed&&unmatched.push(elem))}if(matchedCount+=i,bySet&&i!==matchedCount){for(j=0;matcher=setMatchers[j++];)matcher(unmatched,setMatched,context,xml);if(seed){if(matchedCount>0)for(;i--;)unmatched[i]||setMatched[i]||(setMatched[i]=pop.call(results));setMatched=condense(setMatched)}push.apply(results,setMatched),outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1&&Sizzle.uniqueSort(results)}return outermost&&(dirruns=dirrunsUnique,outermostContext=contextBackup),unmatched};return bySet?markFunction(superMatcher):superMatcher}var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){return a===b&&(hasDuplicate=!0),0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){for(var i=0,len=list.length;len>i;i++)if(list[i]===elem)return i;return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|.*)\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:0>high?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,1023&high|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes),arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){for(var j=target.length,i=0;target[j++]=els[i++];);target.length=j-1}}}support=Sizzle.support={},isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?"HTML"!==documentElement.nodeName:!1},setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;return doc!==document&&9===doc.nodeType&&doc.documentElement?(document=doc,docElem=doc.documentElement,parent=doc.defaultView,parent&&parent!==parent.top&&(parent.addEventListener?parent.addEventListener("unload",unloadHandler,!1):parent.attachEvent&&parent.attachEvent("onunload",unloadHandler)),documentIsHTML=!isXML(doc),support.attributes=assert(function(div){return div.className="i",!div.getAttribute("className")}),support.getElementsByTagName=assert(function(div){return div.appendChild(doc.createComment("")),!div.getElementsByTagName("*").length}),support.getElementsByClassName=rnative.test(doc.getElementsByClassName),support.getById=assert(function(div){return docElem.appendChild(div).id=expando,!doc.getElementsByName||!doc.getElementsByName(expando).length}),support.getById?(Expr.find.ID=function(id,context){if("undefined"!=typeof context.getElementById&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}},Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}):(delete Expr.find.ID,Expr.filter.ID=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node="undefined"!=typeof elem.getAttributeNode&&elem.getAttributeNode("id");return node&&node.value===attrId}}),Expr.find.TAG=support.getElementsByTagName?function(tag,context){return"undefined"!=typeof context.getElementsByTagName?context.getElementsByTagName(tag):support.qsa?context.querySelectorAll(tag):void 0}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if("*"===tag){for(;elem=results[i++];)1===elem.nodeType&&tmp.push(elem);return tmp}return results},Expr.find.CLASS=support.getElementsByClassName&&function(className,context){return documentIsHTML?context.getElementsByClassName(className):void 0},rbuggyMatches=[],rbuggyQSA=[],(support.qsa=rnative.test(doc.querySelectorAll))&&(assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a><select id='"+expando+"-\f]' msallowcapture=''><option selected=''></option></select>",div.querySelectorAll("[msallowcapture^='']").length&&rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")"),div.querySelectorAll("[selected]").length||rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")"),div.querySelectorAll("[id~="+expando+"-]").length||rbuggyQSA.push("~="),div.querySelectorAll(":checked").length||rbuggyQSA.push(":checked"),div.querySelectorAll("a#"+expando+"+*").length||rbuggyQSA.push(".#.+[+~]")}),assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden"),div.appendChild(input).setAttribute("name","D"),div.querySelectorAll("[name=d]").length&&rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?="),div.querySelectorAll(":enabled").length||rbuggyQSA.push(":enabled",":disabled"),div.querySelectorAll("*,:x"),rbuggyQSA.push(",.*:")})),(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector))&&assert(function(div){support.disconnectedMatch=matches.call(div,"div"),matches.call(div,"[s!='']:x"),rbuggyMatches.push("!=",pseudos)}),rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|")),rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|")),hasCompare=rnative.test(docElem.compareDocumentPosition),contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=9===a.nodeType?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!(!bup||1!==bup.nodeType||!(adown.contains?adown.contains(bup):a.compareDocumentPosition&&16&a.compareDocumentPosition(bup)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},sortOrder=hasCompare?function(a,b){if(a===b)return hasDuplicate=!0,0;var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;return compare?compare:(compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&compare||!support.sortDetached&&b.compareDocumentPosition(a)===compare?a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)?-1:b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0:4&compare?-1:1)}:function(a,b){if(a===b)return hasDuplicate=!0,0;var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup)return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0;if(aup===bup)return siblingCheck(a,b);for(cur=a;cur=cur.parentNode;)ap.unshift(cur);for(cur=b;cur=cur.parentNode;)bp.unshift(cur);for(;ap[i]===bp[i];)i++;return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0},doc):document},Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)},Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document&&setDocument(elem),expr=expr.replace(rattributeQuotes,"='$1']"),!(!support.matchesSelector||!documentIsHTML||rbuggyMatches&&rbuggyMatches.test(expr)||rbuggyQSA&&rbuggyQSA.test(expr)))try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&11!==elem.document.nodeType)return ret}catch(e){}return Sizzle(expr,document,null,[elem]).length>0},Sizzle.contains=function(context,elem){return(context.ownerDocument||context)!==document&&setDocument(context),contains(context,elem)},Sizzle.attr=function(elem,name){(elem.ownerDocument||elem)!==document&&setDocument(elem);var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):void 0;return void 0!==val?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)},Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;if(hasDuplicate=!support.detectDuplicates,sortInput=!support.sortStable&&results.slice(0),results.sort(sortOrder),hasDuplicate){for(;elem=results[i++];)elem===results[i]&&(j=duplicates.push(i));for(;j--;)results.splice(duplicates[j],1)}return sortInput=null,results},getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(nodeType){if(1===nodeType||9===nodeType||11===nodeType){if("string"==typeof elem.textContent)return elem.textContent;for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(3===nodeType||4===nodeType)return elem.nodeValue}else for(;node=elem[i++];)ret+=getText(node);return ret},Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){return match[1]=match[1].replace(runescape,funescape),match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape),"~="===match[2]&&(match[3]=" "+match[3]+" "),match.slice(0,4)},CHILD:function(match){return match[1]=match[1].toLowerCase(),"nth"===match[1].slice(0,3)?(match[3]||Sizzle.error(match[0]),match[4]=+(match[4]?match[5]+(match[6]||1):2*("even"===match[3]||"odd"===match[3])),match[5]=+(match[7]+match[8]||"odd"===match[3])):match[3]&&Sizzle.error(match[0]),match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];return matchExpr.CHILD.test(match[0])?null:(match[3]?match[2]=match[4]||match[5]||"":unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,!0))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)&&(match[0]=match[0].slice(0,excess),match[2]=unquoted.slice(0,excess)),match.slice(0,3))}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return"*"===nodeNameSelector?function(){return!0}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test("string"==typeof elem.className&&elem.className||"undefined"!=typeof elem.getAttribute&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);return null==result?"!="===operator:operator?(result+="","="===operator?result===check:"!="===operator?result!==check:"^="===operator?check&&0===result.indexOf(check):"*="===operator?check&&result.indexOf(check)>-1:"$="===operator?check&&result.slice(-check.length)===check:"~="===operator?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:"|="===operator?result===check||result.slice(0,check.length+1)===check+"-":!1):!0}},CHILD:function(type,what,argument,first,last){var simple="nth"!==type.slice(0,3),forward="last"!==type.slice(-4),ofType="of-type"===what;return 1===first&&0===last?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){for(;dir;){for(node=elem;node=node[dir];)if(ofType?node.nodeName.toLowerCase()===name:1===node.nodeType)return!1;start=dir="only"===type&&!start&&"nextSibling"}return!0}if(start=[forward?parent.firstChild:parent.lastChild],forward&&useCache){for(outerCache=parent[expando]||(parent[expando]={}),cache=outerCache[type]||[],nodeIndex=cache[0]===dirruns&&cache[1],diff=cache[0]===dirruns&&cache[2],node=nodeIndex&&parent.childNodes[nodeIndex];node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop();)if(1===node.nodeType&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns)diff=cache[1];else for(;(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop())&&((ofType?node.nodeName.toLowerCase()!==name:1!==node.nodeType)||!++diff||(useCache&&((node[expando]||(node[expando]={}))[type]=[dirruns,diff]),node!==elem)););return diff-=last,diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);return fn[expando]?fn(argument):fn.length>1?(args=[pseudo,pseudo,"",argument],Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){for(var idx,matched=fn(seed,argument),i=matched.length;i--;)idx=indexOf(seed,matched[i]),seed[idx]=!(matches[idx]=matched[i])}):function(elem){return fn(elem,0,args)}):fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){for(var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;i--;)(elem=unmatched[i])&&(seed[i]=!(matches[i]=elem))}):function(elem,context,xml){return input[0]=elem,matcher(input,null,xml,results),input[0]=null,!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){return text=text.replace(runescape,funescape),function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){return ridentifier.test(lang||"")||Sizzle.error("unsupported lang: "+lang),lang=lang.replace(runescape,funescape).toLowerCase(),function(elem){var elemLang;do if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang"))return elemLang=elemLang.toLowerCase(),elemLang===lang||0===elemLang.indexOf(lang+"-");while((elem=elem.parentNode)&&1===elem.nodeType);return!1}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===!1},disabled:function(elem){return elem.disabled===!0},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return"input"===nodeName&&!!elem.checked||"option"===nodeName&&!!elem.selected},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling)if(elem.nodeType<6)return!1;return!0},parent:function(elem){return!Expr.pseudos.empty(elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return"input"===name&&"button"===elem.type||"button"===name},text:function(elem){var attr;return"input"===elem.nodeName.toLowerCase()&&"text"===elem.type&&(null==(attr=elem.getAttribute("type"))||"text"===attr.toLowerCase())},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[0>argument?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){for(var i=0;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){for(var i=1;length>i;i+=2)matchIndexes.push(i);return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;--i>=0;)matchIndexes.push(i);return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){for(var i=0>argument?argument+length:argument;++i<length;)matchIndexes.push(i);return matchIndexes})}},Expr.pseudos.nth=Expr.pseudos.eq;for(i in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Expr.pseudos[i]=createInputPseudo(i);for(i in{submit:!0,reset:!0})Expr.pseudos[i]=createButtonPseudo(i);return setFilters.prototype=Expr.filters=Expr.pseudos,Expr.setFilters=new setFilters,tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached)return parseOnly?0:cached.slice(0);for(soFar=selector,groups=[],preFilters=Expr.preFilter;soFar;){(!matched||(match=rcomma.exec(soFar)))&&(match&&(soFar=soFar.slice(match[0].length)||soFar),groups.push(tokens=[])),matched=!1,(match=rcombinators.exec(soFar))&&(matched=match.shift(),tokens.push({value:matched,type:match[0].replace(rtrim," ")}),soFar=soFar.slice(matched.length));for(type in Expr.filter)!(match=matchExpr[type].exec(soFar))||preFilters[type]&&!(match=preFilters[type](match))||(matched=match.shift(),tokens.push({value:matched,type:type,matches:match}),soFar=soFar.slice(matched.length));if(!matched)break}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)},compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){for(match||(match=tokenize(selector)),i=match.length;i--;)cached=matcherFromTokens(match[i]),cached[expando]?setMatchers.push(cached):elementMatchers.push(cached);cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers)),cached.selector=selector}return cached},select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled="function"==typeof selector&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);if(results=results||[],1===match.length){if(tokens=match[0]=match[0].slice(0),tokens.length>2&&"ID"===(token=tokens[0]).type&&support.getById&&9===context.nodeType&&documentIsHTML&&Expr.relative[tokens[1].type]){if(context=(Expr.find.ID(token.matches[0].replace(runescape,funescape),context)||[])[0],!context)return results;compiled&&(context=context.parentNode),selector=selector.slice(tokens.shift().value.length)}for(i=matchExpr.needsContext.test(selector)?0:tokens.length;i--&&(token=tokens[i],!Expr.relative[type=token.type]);)if((find=Expr.find[type])&&(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context))){if(tokens.splice(i,1),selector=seed.length&&toSelector(tokens),!selector)return push.apply(results,seed),results;break}}return(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context),results},support.sortStable=expando.split("").sort(sortOrder).join("")===expando,support.detectDuplicates=!!hasDuplicate,setDocument(),support.sortDetached=assert(function(div1){return 1&div1.compareDocumentPosition(document.createElement("div"))}),assert(function(div){return div.innerHTML="<a href='#'></a>","#"===div.firstChild.getAttribute("href")})||addHandle("type|href|height|width",function(elem,name,isXML){return isXML?void 0:elem.getAttribute(name,"type"===name.toLowerCase()?1:2)}),support.attributes&&assert(function(div){return div.innerHTML="<input/>",div.firstChild.setAttribute("value",""),""===div.firstChild.getAttribute("value")})||addHandle("value",function(elem,name,isXML){return isXML||"input"!==elem.nodeName.toLowerCase()?void 0:elem.defaultValue}),assert(function(div){return null==div.getAttribute("disabled")})||addHandle(booleans,function(elem,name,isXML){var val;return isXML?void 0:elem[name]===!0?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}),Sizzle}(window);jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.pseudos,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,risSimple=/^.[^:#\[\.,]*$/;jQuery.filter=function(expr,elems,not){var elem=elems[0];return not&&(expr=":not("+expr+")"),1===elems.length&&1===elem.nodeType?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return 1===elem.nodeType}))},jQuery.fn.extend({find:function(selector){var i,ret=[],self=this,len=self.length;if("string"!=typeof selector)return this.pushStack(jQuery(selector).filter(function(){for(i=0;len>i;i++)if(jQuery.contains(self[i],this))return!0}));for(i=0;len>i;i++)jQuery.find(selector,self[i],ret);return ret=this.pushStack(len>1?jQuery.unique(ret):ret),ret.selector=this.selector?this.selector+" "+selector:selector,ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],!1))},not:function(selector){return this.pushStack(winnow(this,selector||[],!0))},is:function(selector){return!!winnow(this,"string"==typeof selector&&rneedsContext.test(selector)?jQuery(selector):selector||[],!1).length}});var rootjQuery,document=window.document,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector)return this;if("string"==typeof selector){if(match="<"===selector.charAt(0)&&">"===selector.charAt(selector.length-1)&&selector.length>=3?[null,selector,null]:rquickExpr.exec(selector),!match||!match[1]&&context)return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector);if(match[1]){if(context=context instanceof jQuery?context[0]:context,jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,!0)),rsingleTag.test(match[1])&&jQuery.isPlainObject(context))for(match in context)jQuery.isFunction(this[match])?this[match](context[match]):this.attr(match,context[match]);return this}if(elem=document.getElementById(match[2]),elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return selector.nodeType?(this.context=this[0]=selector,this.length=1,this):jQuery.isFunction(selector)?"undefined"!=typeof rootjQuery.ready?rootjQuery.ready(selector):selector(jQuery):(void 0!==selector.selector&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))};init.prototype=jQuery.fn,rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.extend({dir:function(elem,dir,until){for(var matched=[],cur=elem[dir];cur&&9!==cur.nodeType&&(void 0===until||1!==cur.nodeType||!jQuery(cur).is(until));)1===cur.nodeType&&matched.push(cur),cur=cur[dir];return matched},sibling:function(n,elem){for(var r=[];n;n=n.nextSibling)1===n.nodeType&&n!==elem&&r.push(n);return r}}),jQuery.fn.extend({has:function(target){var i,targets=jQuery(target,this),len=targets.length;return this.filter(function(){for(i=0;len>i;i++)if(jQuery.contains(this,targets[i]))return!0})},closest:function(selectors,context){for(var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||"string"!=typeof selectors?jQuery(selectors,context||this.context):0;l>i;i++)for(cur=this[i];cur&&cur!==context;cur=cur.parentNode)if(cur.nodeType<11&&(pos?pos.index(cur)>-1:1===cur.nodeType&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){return elem?"string"==typeof elem?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(null==selector?this.prevObject:this.prevObject.filter(selector))}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&11!==parent.nodeType?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return"Until"!==name.slice(-5)&&(selector=until),selector&&"string"==typeof selector&&(ret=jQuery.filter(selector,ret)),this.length>1&&(guaranteedUnique[name]||(ret=jQuery.unique(ret)),rparentsprev.test(name)&&(ret=ret.reverse())),this.pushStack(ret)}});var rnotwhite=/\S+/g,optionsCache={};jQuery.Callbacks=function(options){options="string"==typeof options?optionsCache[options]||createOptions(options):jQuery.extend({},options);var firing,memory,fired,firingLength,firingIndex,firingStart,list=[],stack=!options.once&&[],fire=function(data){for(memory=options.memory&&data,fired=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length,firing=!0;list&&firingLength>firingIndex;firingIndex++)if(list[firingIndex].apply(data[0],data[1])===!1&&options.stopOnFalse){memory=!1;break}firing=!1,list&&(stack?stack.length&&fire(stack.shift()):memory?list=[]:self.disable())},self={add:function(){if(list){var start=list.length;!function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);"function"===type?options.unique&&self.has(arg)||list.push(arg):arg&&arg.length&&"string"!==type&&add(arg)})}(arguments),firing?firingLength=list.length:memory&&(firingStart=start,fire(memory))}return this},remove:function(){return list&&jQuery.each(arguments,function(_,arg){for(var index;(index=jQuery.inArray(arg,list,index))>-1;)list.splice(index,1),firing&&(firingLength>=index&&firingLength--,firingIndex>=index&&firingIndex--)}),this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!(!list||!list.length)},empty:function(){return list=[],firingLength=0,this},disable:function(){return list=stack=memory=void 0,this},disabled:function(){return!list},lock:function(){return stack=void 0,memory||self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return!list||fired&&!stack||(args=args||[],args=[context,args.slice?args.slice():args],firing?stack.push(args):fire(args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self},jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){return deferred.done(arguments).fail(arguments),this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);returned&&jQuery.isFunction(returned.promise)?returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify):newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)})}),fns=null}).promise()},promise:function(obj){return null!=obj?jQuery.extend(obj,promise):promise}},deferred={};return promise.pipe=promise.then,jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add,stateString&&list.add(function(){state=stateString},tuples[1^i][2].disable,tuples[2][2].lock),deferred[tuple[0]]=function(){return deferred[tuple[0]+"With"](this===deferred?promise:this,arguments),this},deferred[tuple[0]+"With"]=list.fireWith}),promise.promise(deferred),func&&func.call(deferred,deferred),deferred},when:function(subordinate){var progressValues,progressContexts,resolveContexts,i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=1!==length||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=1===remaining?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this,values[i]=arguments.length>1?slice.call(arguments):value,values===progressValues?deferred.notifyWith(contexts,values):--remaining||deferred.resolveWith(contexts,values)}};if(length>1)for(progressValues=new Array(length),progressContexts=new Array(length),resolveContexts=new Array(length);length>i;i++)resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)?resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues)):--remaining;return remaining||deferred.resolveWith(resolveContexts,resolveValues),deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){return jQuery.ready.promise().done(fn),this},jQuery.extend({isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0?!--jQuery.readyWait:!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready);jQuery.isReady=!0,wait!==!0&&--jQuery.readyWait>0||(readyList.resolveWith(document,[jQuery]),jQuery.fn.triggerHandler&&(jQuery(document).triggerHandler("ready"),jQuery(document).off("ready")))}}}),jQuery.ready.promise=function(obj){if(!readyList)if(readyList=jQuery.Deferred(),"complete"===document.readyState)setTimeout(jQuery.ready);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",completed,!1),
window.addEventListener("load",completed,!1);else{document.attachEvent("onreadystatechange",completed),window.attachEvent("onload",completed);var top=!1;try{top=null==window.frameElement&&document.documentElement}catch(e){}top&&top.doScroll&&!function doScrollCheck(){if(!jQuery.isReady){try{top.doScroll("left")}catch(e){return setTimeout(doScrollCheck,50)}detach(),jQuery.ready()}}()}return readyList.promise(obj)};var i,strundefined="undefined";for(i in jQuery(support))break;support.ownLast="0"!==i,support.inlineBlockNeedsLayout=!1,jQuery(function(){var val,div,body,container;body=document.getElementsByTagName("body")[0],body&&body.style&&(div=document.createElement("div"),container=document.createElement("div"),container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),typeof div.style.zoom!==strundefined&&(div.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",support.inlineBlockNeedsLayout=val=3===div.offsetWidth,val&&(body.style.zoom=1)),body.removeChild(container))}),function(){var div=document.createElement("div");if(null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}div=null}(),jQuery.acceptData=function(elem){var noData=jQuery.noData[(elem.nodeName+" ").toLowerCase()],nodeType=+elem.nodeType||1;return 1!==nodeType&&9!==nodeType?!1:!noData||noData!==!0&&elem.getAttribute("classid")===noData};var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data){return internalData(elem,name,data)},removeData:function(elem,name){return internalRemoveData(elem,name)},_data:function(elem,name,data){return internalData(elem,name,data,!0)},_removeData:function(elem,name){return internalRemoveData(elem,name,!0)}}),jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(void 0===key){if(this.length&&(data=jQuery.data(elem),1===elem.nodeType&&!jQuery._data(elem,"parsedAttrs"))){for(i=attrs.length;i--;)attrs[i]&&(name=attrs[i].name,0===name.indexOf("data-")&&(name=jQuery.camelCase(name.slice(5)),dataAttr(elem,name,data[name])));jQuery._data(elem,"parsedAttrs",!0)}return data}return"object"==typeof key?this.each(function(){jQuery.data(this,key)}):arguments.length>1?this.each(function(){jQuery.data(this,key,value)}):elem?dataAttr(elem,key,jQuery.data(elem,key)):void 0},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({queue:function(elem,type,data){var queue;return elem?(type=(type||"fx")+"queue",queue=jQuery._data(elem,type),data&&(!queue||jQuery.isArray(data)?queue=jQuery._data(elem,type,jQuery.makeArray(data)):queue.push(data)),queue||[]):void 0},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};"inprogress"===fn&&(fn=queue.shift(),startLength--),fn&&("fx"===type&&queue.unshift("inprogress"),delete hooks.stop,fn.call(elem,next,hooks)),!startLength&&hooks&&hooks.empty.fire()},_queueHooks:function(elem,type){var key=type+"queueHooks";return jQuery._data(elem,key)||jQuery._data(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){jQuery._removeData(elem,type+"queue"),jQuery._removeData(elem,key)})})}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return"string"!=typeof type&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):void 0===data?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type),"fx"===type&&"inprogress"!==queue[0]&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){--count||defer.resolveWith(elements,[elements])};for("string"!=typeof type&&(obj=type,type=void 0),type=type||"fx";i--;)tmp=jQuery._data(elements[i],type+"queueHooks"),tmp&&tmp.empty&&(count++,tmp.empty.add(resolve));return resolve(),defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cssExpand=["Top","Right","Bottom","Left"],isHidden=function(elem,el){return elem=el||elem,"none"===jQuery.css(elem,"display")||!jQuery.contains(elem.ownerDocument,elem)},access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,length=elems.length,bulk=null==key;if("object"===jQuery.type(key)){chainable=!0;for(i in key)jQuery.access(elems,fn,i,key[i],!0,emptyGet,raw)}else if(void 0!==value&&(chainable=!0,jQuery.isFunction(value)||(raw=!0),bulk&&(raw?(fn.call(elems,value),fn=null):(bulk=fn,fn=function(elem,key,value){return bulk.call(jQuery(elem),value)})),fn))for(;length>i;i++)fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)));return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},rcheckableType=/^(?:checkbox|radio)$/i;!function(){var input=document.createElement("input"),div=document.createElement("div"),fragment=document.createDocumentFragment();if(div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",support.leadingWhitespace=3===div.firstChild.nodeType,support.tbody=!div.getElementsByTagName("tbody").length,support.htmlSerialize=!!div.getElementsByTagName("link").length,support.html5Clone="<:nav></:nav>"!==document.createElement("nav").cloneNode(!0).outerHTML,input.type="checkbox",input.checked=!0,fragment.appendChild(input),support.appendChecked=input.checked,div.innerHTML="<textarea>x</textarea>",support.noCloneChecked=!!div.cloneNode(!0).lastChild.defaultValue,fragment.appendChild(div),div.innerHTML="<input type='radio' checked='checked' name='t'/>",support.checkClone=div.cloneNode(!0).cloneNode(!0).lastChild.checked,support.noCloneEvent=!0,div.attachEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).click()),null==support.deleteExpando){support.deleteExpando=!0;try{delete div.test}catch(e){support.deleteExpando=!1}}}(),function(){var i,eventName,div=document.createElement("div");for(i in{submit:!0,change:!0,focusin:!0})eventName="on"+i,(support[i+"Bubbles"]=eventName in window)||(div.setAttribute(eventName,"t"),support[i+"Bubbles"]=div.attributes[eventName].expando===!1);div=null}();var rformElems=/^(?:input|select|textarea)$/i,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;jQuery.event={global:{},add:function(elem,types,handler,data,selector){var tmp,events,t,handleObjIn,special,eventHandle,handleObj,handlers,type,namespaces,origType,elemData=jQuery._data(elem);if(elemData){for(handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),(events=elemData.events)||(events=elemData.events={}),(eventHandle=elemData.handle)||(eventHandle=elemData.handle=function(e){return typeof jQuery===strundefined||e&&jQuery.event.triggered===e.type?void 0:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type&&(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn),(handlers=events[type])||(handlers=events[type]=[],handlers.delegateCount=0,special.setup&&special.setup.call(elem,data,namespaces,eventHandle)!==!1||(elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle))),special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0);elem=null}},remove:function(elem,types,handler,selector,mappedTypes){var j,handleObj,tmp,origCount,t,events,special,handlers,type,namespaces,origType,elemData=jQuery.hasData(elem)&&jQuery._data(elem);if(elemData&&(events=elemData.events)){for(types=(types||"").match(rnotwhite)||[""],t=types.length;t--;)if(tmp=rtypenamespace.exec(types[t])||[],type=origType=tmp[1],namespaces=(tmp[2]||"").split(".").sort(),type){for(special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,handlers=events[type]||[],tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"),origCount=j=handlers.length;j--;)handleObj=handlers[j],!mappedTypes&&origType!==handleObj.origType||handler&&handler.guid!==handleObj.guid||tmp&&!tmp.test(handleObj.namespace)||selector&&selector!==handleObj.selector&&("**"!==selector||!handleObj.selector)||(handlers.splice(j,1),handleObj.selector&&handlers.delegateCount--,special.remove&&special.remove.call(elem,handleObj));origCount&&!handlers.length&&(special.teardown&&special.teardown.call(elem,namespaces,elemData.handle)!==!1||jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}else for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);jQuery.isEmptyObject(events)&&(delete elemData.handle,jQuery._removeData(elem,"events"))}},trigger:function(event,data,elem,onlyHandlers){var handle,ontype,cur,bubbleType,special,tmp,i,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];if(cur=tmp=elem=elem||document,3!==elem.nodeType&&8!==elem.nodeType&&!rfocusMorph.test(type+jQuery.event.triggered)&&(type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort()),ontype=type.indexOf(":")<0&&"on"+type,event=event[jQuery.expando]?event:new jQuery.Event(type,"object"==typeof event&&event),event.isTrigger=onlyHandlers?2:3,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,event.result=void 0,event.target||(event.target=elem),data=null==data?[event]:jQuery.makeArray(data,[event]),special=jQuery.event.special[type]||{},onlyHandlers||!special.trigger||special.trigger.apply(elem,data)!==!1)){if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){for(bubbleType=special.delegateType||type,rfocusMorph.test(bubbleType+type)||(cur=cur.parentNode);cur;cur=cur.parentNode)eventPath.push(cur),tmp=cur;tmp===(elem.ownerDocument||document)&&eventPath.push(tmp.defaultView||tmp.parentWindow||window)}for(i=0;(cur=eventPath[i++])&&!event.isPropagationStopped();)event.type=i>1?bubbleType:special.bindType||type,handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&handle.apply&&jQuery.acceptData(cur)&&(event.result=handle.apply(cur,data),event.result===!1&&event.preventDefault());if(event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||special._default.apply(eventPath.pop(),data)===!1)&&jQuery.acceptData(elem)&&ontype&&elem[type]&&!jQuery.isWindow(elem)){tmp=elem[ontype],tmp&&(elem[ontype]=null),jQuery.event.triggered=type;try{elem[type]()}catch(e){}jQuery.event.triggered=void 0,tmp&&(elem[ontype]=tmp)}return event.result}},dispatch:function(event){event=jQuery.event.fix(event);var i,ret,handleObj,matched,j,handlerQueue=[],args=slice.call(arguments),handlers=(jQuery._data(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};if(args[0]=event,event.delegateTarget=this,!special.preDispatch||special.preDispatch.call(this,event)!==!1){for(handlerQueue=jQuery.event.handlers.call(this,event,handlers),i=0;(matched=handlerQueue[i++])&&!event.isPropagationStopped();)for(event.currentTarget=matched.elem,j=0;(handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped();)(!event.namespace_re||event.namespace_re.test(handleObj.namespace))&&(event.handleObj=handleObj,event.data=handleObj.data,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),void 0!==ret&&(event.result=ret)===!1&&(event.preventDefault(),event.stopPropagation()));return special.postDispatch&&special.postDispatch.call(this,event),event.result}},handlers:function(event,handlers){var sel,handleObj,matches,i,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||"click"!==event.type))for(;cur!=this;cur=cur.parentNode||this)if(1===cur.nodeType&&(cur.disabled!==!0||"click"!==event.type)){for(matches=[],i=0;delegateCount>i;i++)handleObj=handlers[i],sel=handleObj.selector+" ",void 0===matches[sel]&&(matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length),matches[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,handlers:matches})}return delegateCount<handlers.length&&handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)}),handlerQueue},fix:function(event){if(event[jQuery.expando])return event;var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];for(fixHook||(this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}),copy=fixHook.props?this.props.concat(fixHook.props):this.props,event=new jQuery.Event(originalEvent),i=copy.length;i--;)prop=copy[i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),3===event.target.nodeType&&(event.target=event.target.parentNode),event.metaKey=!!event.metaKey,fixHook.filter?fixHook.filter(event,originalEvent):event},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return null==event.which&&(event.which=null!=original.charCode?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var body,eventDoc,doc,button=original.button,fromElement=original.fromElement;return null==event.pageX&&null!=original.clientX&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),event.which||void 0===button||(event.which=1&button?1:2&button?3:4&button?2:0),event}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===safeActiveElement()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return jQuery.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){void 0!==event.result&&event.originalEvent&&(event.originalEvent.returnValue=event.result)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){var name="on"+type;elem.detachEvent&&(typeof elem[name]===strundefined&&(elem[name]=null),elem.detachEvent(name,handle))},jQuery.Event=function(src,props){return this instanceof jQuery.Event?(src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||void 0===src.defaultPrevented&&src.returnValue===!1?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),void(this[jQuery.expando]=!0)):new jQuery.Event(src,props)},jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;return(!related||related!==target&&!jQuery.contains(target,related))&&(event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix),ret}}}),support.submitBubbles||(jQuery.event.special.submit={setup:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:void 0;form&&!jQuery._data(form,"submitBubbles")&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),jQuery._data(form,"submitBubbles",!0))})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){return jQuery.nodeName(this,"form")?!1:void jQuery.event.remove(this,"._submit")}}),support.changeBubbles||(jQuery.event.special.change={setup:function(){return rformElems.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(jQuery.event.add(this,"propertychange._change",function(event){"checked"===event.originalEvent.propertyName&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1),jQuery.event.simulate("change",this,event,!0)})),!1):void jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!jQuery._data(elem,"changeBubbles")&&(jQuery.event.add(elem,"change._change",function(event){!this.parentNode||event.isSimulated||event.isTrigger||jQuery.event.simulate("change",this.parentNode,event,!0)}),jQuery._data(elem,"changeBubbles",!0))})},handle:function(event){var elem=event.target;return this!==elem||event.isSimulated||event.isTrigger||"radio"!==elem.type&&"checkbox"!==elem.type?event.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return jQuery.event.remove(this,"._change"),!rformElems.test(this.nodeName)}}),support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix);attaches||doc.addEventListener(orig,handler,!0),jQuery._data(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=jQuery._data(doc,fix)-1;attaches?jQuery._data(doc,fix,attaches):(doc.removeEventListener(orig,handler,!0),jQuery._removeData(doc,fix))}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var type,origFn;if("object"==typeof types){"string"!=typeof selector&&(data=data||selector,selector=void 0);for(type in types)this.on(type,selector,data,types[type],one);return this}if(null==data&&null==fn?(fn=selector,data=selector=void 0):null==fn&&("string"==typeof selector?(fn=data,data=void 0):(fn=data,data=selector,selector=void 0)),fn===!1)fn=returnFalse;else if(!fn)return this;return 1===one&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj)return handleObj=types.handleObj,jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this;if("object"==typeof types){for(type in types)this.off(type,selector,types[type]);return this}return(selector===!1||"function"==typeof selector)&&(fn=selector,selector=void 0),fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];return elem?jQuery.event.trigger(type,data,elem,!0):void 0}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:null|\d+)"/g,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},safeFragment=createSafeFragment(document),fragmentDiv=safeFragment.appendChild(document.createElement("div"));wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var destElements,node,clone,i,srcElements,inPage=jQuery.contains(elem.ownerDocument,elem);if(support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?clone=elem.cloneNode(!0):(fragmentDiv.innerHTML=elem.outerHTML,fragmentDiv.removeChild(clone=fragmentDiv.firstChild)),!(support.noCloneEvent&&support.noCloneChecked||1!==elem.nodeType&&11!==elem.nodeType||jQuery.isXMLDoc(elem)))for(destElements=getAll(clone),srcElements=getAll(elem),i=0;null!=(node=srcElements[i]);++i)destElements[i]&&fixCloneNodeIssues(node,destElements[i]);if(dataAndEvents)if(deepDataAndEvents)for(srcElements=srcElements||getAll(elem),destElements=destElements||getAll(clone),i=0;null!=(node=srcElements[i]);i++)cloneCopyEvent(node,destElements[i]);else cloneCopyEvent(elem,clone);return destElements=getAll(clone,"script"),destElements.length>0&&setGlobalEval(destElements,!inPage&&getAll(elem,"script")),destElements=srcElements=node=null,clone},buildFragment:function(elems,context,scripts,selection){for(var j,elem,contains,tmp,tag,tbody,wrap,l=elems.length,safe=createSafeFragment(context),nodes=[],i=0;l>i;i++)if(elem=elems[i],elem||0===elem)if("object"===jQuery.type(elem))jQuery.merge(nodes,elem.nodeType?[elem]:elem);else if(rhtml.test(elem)){for(tmp=tmp||safe.appendChild(context.createElement("div")),tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2],j=wrap[0];j--;)tmp=tmp.lastChild;if(!support.leadingWhitespace&&rleadingWhitespace.test(elem)&&nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0])),!support.tbody)for(elem="table"!==tag||rtbody.test(elem)?"<table>"!==wrap[1]||rtbody.test(elem)?0:tmp:tmp.firstChild,j=elem&&elem.childNodes.length;j--;)jQuery.nodeName(tbody=elem.childNodes[j],"tbody")&&!tbody.childNodes.length&&elem.removeChild(tbody);for(jQuery.merge(nodes,tmp.childNodes),tmp.textContent="";tmp.firstChild;)tmp.removeChild(tmp.firstChild);tmp=safe.lastChild}else nodes.push(context.createTextNode(elem));for(tmp&&safe.removeChild(tmp),support.appendChecked||jQuery.grep(getAll(nodes,"input"),fixDefaultChecked),i=0;elem=nodes[i++];)if((!selection||-1===jQuery.inArray(elem,selection))&&(contains=jQuery.contains(elem.ownerDocument,elem),tmp=getAll(safe.appendChild(elem),"script"),contains&&setGlobalEval(tmp),scripts))for(j=0;elem=tmp[j++];)rscriptType.test(elem.type||"")&&scripts.push(elem);return tmp=null,safe},cleanData:function(elems,acceptData){for(var elem,type,id,data,i=0,internalKey=jQuery.expando,cache=jQuery.cache,deleteExpando=support.deleteExpando,special=jQuery.event.special;null!=(elem=elems[i]);i++)if((acceptData||jQuery.acceptData(elem))&&(id=elem[internalKey],data=id&&cache[id])){if(data.events)for(type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);cache[id]&&(delete cache[id],deleteExpando?delete elem[internalKey]:typeof elem.removeAttribute!==strundefined?elem.removeAttribute(internalKey):elem[internalKey]=null,deletedIds.push(id))}}}),jQuery.fn.extend({text:function(value){return access(this,function(value){return void 0===value?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this)})},after:function(){return this.domManip(arguments,function(elem){this.parentNode&&this.parentNode.insertBefore(elem,this.nextSibling)})},remove:function(selector,keepData){for(var elem,elems=selector?jQuery.filter(selector,this):this,i=0;null!=(elem=elems[i]);i++)keepData||1!==elem.nodeType||jQuery.cleanData(getAll(elem)),elem.parentNode&&(keepData&&jQuery.contains(elem.ownerDocument,elem)&&setGlobalEval(getAll(elem,"script")),elem.parentNode.removeChild(elem));return this},empty:function(){for(var elem,i=0;null!=(elem=this[i]);i++){for(1===elem.nodeType&&jQuery.cleanData(getAll(elem,!1));elem.firstChild;)elem.removeChild(elem.firstChild);elem.options&&jQuery.nodeName(elem,"select")&&(elem.options.length=0)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=null==dataAndEvents?!1:dataAndEvents,deepDataAndEvents=null==deepDataAndEvents?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(void 0===value)return 1===elem.nodeType?elem.innerHTML.replace(rinlinejQuery,""):void 0;if(!("string"!=typeof value||rnoInnerhtml.test(value)||!support.htmlSerialize&&rnoshimcache.test(value)||!support.leadingWhitespace&&rleadingWhitespace.test(value)||wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()])){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;l>i;i++)elem=this[i]||{},1===elem.nodeType&&(jQuery.cleanData(getAll(elem,!1)),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];return this.domManip(arguments,function(elem){arg=this.parentNode,jQuery.cleanData(getAll(this)),arg&&arg.replaceChild(elem,this)}),arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,callback){args=concat.apply([],args);var first,node,hasScripts,scripts,doc,fragment,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&"string"==typeof value&&!support.checkClone&&rchecked.test(value))return this.each(function(index){var self=set.eq(index);isFunction&&(args[0]=value.call(this,index,self.html())),self.domManip(args,callback)});if(l&&(fragment=jQuery.buildFragment(args,this[0].ownerDocument,!1,this),first=fragment.firstChild,1===fragment.childNodes.length&&(fragment=first),first)){for(scripts=jQuery.map(getAll(fragment,"script"),disableScript),hasScripts=scripts.length;l>i;i++)node=fragment,i!==iNoClone&&(node=jQuery.clone(node,!0,!0),hasScripts&&jQuery.merge(scripts,getAll(node,"script"))),callback.call(this[i],node,i);if(hasScripts)for(doc=scripts[scripts.length-1].ownerDocument,jQuery.map(scripts,restoreScript),i=0;hasScripts>i;i++)node=scripts[i],rscriptType.test(node.type||"")&&!jQuery._data(node,"globalEval")&&jQuery.contains(doc,node)&&(node.src?jQuery._evalUrl&&jQuery._evalUrl(node.src):jQuery.globalEval((node.text||node.textContent||node.innerHTML||"").replace(rcleanScript,"")));fragment=first=null}return this}}),jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){for(var elems,i=0,ret=[],insert=jQuery(selector),last=insert.length-1;last>=i;i++)elems=i===last?this:this.clone(!0),jQuery(insert[i])[original](elems),push.apply(ret,elems.get());return this.pushStack(ret)}});var iframe,elemdisplay={};!function(){var shrinkWrapBlocksVal;support.shrinkWrapBlocks=function(){if(null!=shrinkWrapBlocksVal)return shrinkWrapBlocksVal;shrinkWrapBlocksVal=!1;var div,body,container;return body=document.getElementsByTagName("body")[0],body&&body.style?(div=document.createElement("div"),container=document.createElement("div"),container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),typeof div.style.zoom!==strundefined&&(div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",div.appendChild(document.createElement("div")).style.width="5px",shrinkWrapBlocksVal=3!==div.offsetWidth),body.removeChild(container),shrinkWrapBlocksVal):void 0}}();var getStyles,curCSS,rmargin=/^margin/,rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i"),rposition=/^(top|right|bottom|left)$/;window.getComputedStyle?(getStyles=function(elem){return elem.ownerDocument.defaultView.opener?elem.ownerDocument.defaultView.getComputedStyle(elem,null):window.getComputedStyle(elem,null);
},curCSS=function(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;return computed=computed||getStyles(elem),ret=computed?computed.getPropertyValue(name)||computed[name]:void 0,computed&&(""!==ret||jQuery.contains(elem.ownerDocument,elem)||(ret=jQuery.style(elem,name)),rnumnonpx.test(ret)&&rmargin.test(name)&&(width=style.width,minWidth=style.minWidth,maxWidth=style.maxWidth,style.minWidth=style.maxWidth=style.width=ret,ret=computed.width,style.width=width,style.minWidth=minWidth,style.maxWidth=maxWidth)),void 0===ret?ret:ret+""}):document.documentElement.currentStyle&&(getStyles=function(elem){return elem.currentStyle},curCSS=function(elem,name,computed){var left,rs,rsLeft,ret,style=elem.style;return computed=computed||getStyles(elem),ret=computed?computed[name]:void 0,null==ret&&style&&style[name]&&(ret=style[name]),rnumnonpx.test(ret)&&!rposition.test(name)&&(left=style.left,rs=elem.runtimeStyle,rsLeft=rs&&rs.left,rsLeft&&(rs.left=elem.currentStyle.left),style.left="fontSize"===name?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(rs.left=rsLeft)),void 0===ret?ret:ret+""||"auto"}),function(){function computeStyleTests(){var div,body,container,contents;body=document.getElementsByTagName("body")[0],body&&body.style&&(div=document.createElement("div"),container=document.createElement("div"),container.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",body.appendChild(container).appendChild(div),div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",pixelPositionVal=boxSizingReliableVal=!1,reliableMarginRightVal=!0,window.getComputedStyle&&(pixelPositionVal="1%"!==(window.getComputedStyle(div,null)||{}).top,boxSizingReliableVal="4px"===(window.getComputedStyle(div,null)||{width:"4px"}).width,contents=div.appendChild(document.createElement("div")),contents.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",contents.style.marginRight=contents.style.width="0",div.style.width="1px",reliableMarginRightVal=!parseFloat((window.getComputedStyle(contents,null)||{}).marginRight),div.removeChild(contents)),div.innerHTML="<table><tr><td></td><td>t</td></tr></table>",contents=div.getElementsByTagName("td"),contents[0].style.cssText="margin:0;border:0;padding:0;display:none",reliableHiddenOffsetsVal=0===contents[0].offsetHeight,reliableHiddenOffsetsVal&&(contents[0].style.display="",contents[1].style.display="none",reliableHiddenOffsetsVal=0===contents[0].offsetHeight),body.removeChild(container))}var div,style,a,pixelPositionVal,boxSizingReliableVal,reliableHiddenOffsetsVal,reliableMarginRightVal;div=document.createElement("div"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=div.getElementsByTagName("a")[0],style=a&&a.style,style&&(style.cssText="float:left;opacity:.5",support.opacity="0.5"===style.opacity,support.cssFloat=!!style.cssFloat,div.style.backgroundClip="content-box",div.cloneNode(!0).style.backgroundClip="",support.clearCloneStyle="content-box"===div.style.backgroundClip,support.boxSizing=""===style.boxSizing||""===style.MozBoxSizing||""===style.WebkitBoxSizing,jQuery.extend(support,{reliableHiddenOffsets:function(){return null==reliableHiddenOffsetsVal&&computeStyleTests(),reliableHiddenOffsetsVal},boxSizingReliable:function(){return null==boxSizingReliableVal&&computeStyleTests(),boxSizingReliableVal},pixelPosition:function(){return null==pixelPositionVal&&computeStyleTests(),pixelPositionVal},reliableMarginRight:function(){return null==reliableMarginRightVal&&computeStyleTests(),reliableMarginRightVal}}))}(),jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.apply(elem,args||[]);for(name in options)elem.style[name]=old[name];return ret};var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity\s*=\s*([^)]*)/,rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return""===ret?"1":ret}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(elem&&3!==elem.nodeType&&8!==elem.nodeType&&elem.style){var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;if(name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],void 0===value)return hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,!1,extra))?ret:style[name];if(type=typeof value,"string"===type&&(ret=rrelNum.exec(value))&&(value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name)),type="number"),null!=value&&value===value&&("number"!==type||jQuery.cssNumber[origName]||(value+="px"),support.clearCloneStyle||""!==value||0!==name.indexOf("background")||(style[name]="inherit"),!(hooks&&"set"in hooks&&void 0===(value=hooks.set(elem,value,extra)))))try{style[name]=value}catch(e){}}},css:function(elem,name,extra,styles){var num,val,hooks,origName=jQuery.camelCase(name);return name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName)),hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName],hooks&&"get"in hooks&&(val=hooks.get(elem,!0,extra)),void 0===val&&(val=curCSS(elem,name,styles)),"normal"===val&&name in cssNormalTransform&&(val=cssNormalTransform[name]),""===extra||extra?(num=parseFloat(val),extra===!0||jQuery.isNumeric(num)?num||0:val):val}}),jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){return computed?rdisplayswap.test(jQuery.css(elem,"display"))&&0===elem.offsetWidth?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra):void 0},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,support.boxSizing&&"border-box"===jQuery.css(elem,"boxSizing",!1,styles),styles):0)}}}),support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+100*value+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1,(value>=1||""===value)&&""===jQuery.trim(filter.replace(ralpha,""))&&style.removeAttribute&&(style.removeAttribute("filter"),""===value||currentStyle&&!currentStyle.filter)||(style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity)}}),jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){return computed?jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"]):void 0}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){for(var i=0,expanded={},parts="string"==typeof value?value.split(" "):[value];4>i;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}},rmargin.test(prefix)||(jQuery.cssHooks[prefix+suffix].set=setPositiveNumber)}),jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){for(styles=getStyles(elem),len=name.length;len>i;i++)map[name[i]]=jQuery.css(elem,name[i],!1,styles);return map}return void 0!==value?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,!0)},hide:function(){return showHide(this)},toggle:function(state){return"boolean"==typeof state?state?this.show():this.hide():this.each(function(){isHidden(this)?jQuery(this).show():jQuery(this).hide()})}}),jQuery.Tween=Tween,Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem,this.prop=prop,this.easing=easing||"swing",this.options=options,this.start=this.now=this.cur(),this.end=end,this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];return this.options.duration?this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration):this.pos=eased=percent,this.now=(this.end-this.start)*eased+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),hooks&&hooks.set?hooks.set(this):Tween.propHooks._default.set(this),this}},Tween.prototype.init.prototype=Tween.prototype,Tween.propHooks={_default:{get:function(tween){var result;return null==tween.elem[tween.prop]||tween.elem.style&&null!=tween.elem.style[tween.prop]?(result=jQuery.css(tween.elem,tween.prop,""),result&&"auto"!==result?result:0):tween.elem[tween.prop]},set:function(tween){jQuery.fx.step[tween.prop]?jQuery.fx.step[tween.prop](tween):tween.elem.style&&(null!=tween.elem.style[jQuery.cssProps[tween.prop]]||jQuery.cssHooks[tween.prop])?jQuery.style(tween.elem,tween.prop,tween.now+tween.unit):tween.elem[tween.prop]=tween.now}}},Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){tween.elem.nodeType&&tween.elem.parentNode&&(tween.elem[tween.prop]=tween.now)}},jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}},jQuery.fx=Tween.prototype.init,jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||"px"!==unit&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3],parts=parts||[],start=+target||1;do scale=scale||".5",start/=scale,jQuery.style(tween.elem,prop,start+unit);while(scale!==(scale=tween.cur()/target)&&1!==scale&&--maxIterations)}return parts&&(start=tween.start=+start||+target||0,tween.unit=unit,tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]),tween}]};jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){jQuery.isFunction(props)?(callback=props,props=["*"]):props=props.split(" ");for(var prop,index=0,length=props.length;length>index;index++)prop=props[index],tweeners[prop]=tweeners[prop]||[],tweeners[prop].unshift(callback)},prefilter:function(callback,prepend){prepend?animationPrefilters.unshift(callback):animationPrefilters.push(callback)}}),jQuery.speed=function(speed,easing,fn){var opt=speed&&"object"==typeof speed?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};return opt.duration=jQuery.fx.off?0:"number"==typeof opt.duration?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default,(null==opt.queue||opt.queue===!0)&&(opt.queue="fx"),opt.old=opt.complete,opt.complete=function(){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue&&jQuery.dequeue(this,opt.queue)},opt},jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);(empty||jQuery._data(this,"finish"))&&anim.stop(!0)};return doAnimation.finish=doAnimation,empty||optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop,stop(gotoEnd)};return"string"!=typeof type&&(gotoEnd=clearQueue,clearQueue=type,type=void 0),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){var dequeue=!0,index=null!=type&&type+"queueHooks",timers=jQuery.timers,data=jQuery._data(this);if(index)data[index]&&data[index].stop&&stopQueue(data[index]);else for(index in data)data[index]&&data[index].stop&&rrun.test(index)&&stopQueue(data[index]);for(index=timers.length;index--;)timers[index].elem!==this||null!=type&&timers[index].queue!==type||(timers[index].anim.stop(gotoEnd),dequeue=!1,timers.splice(index,1));(dequeue||!gotoEnd)&&jQuery.dequeue(this,type)})},finish:function(type){return type!==!1&&(type=type||"fx"),this.each(function(){var index,data=jQuery._data(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;for(data.finish=!0,jQuery.queue(this,type,[]),hooks&&hooks.stop&&hooks.stop.call(this,!0),index=timers.length;index--;)timers[index].elem===this&&timers[index].queue===type&&(timers[index].anim.stop(!0),timers.splice(index,1));for(index=0;length>index;index++)queue[index]&&queue[index].finish&&queue[index].finish.call(this);delete data.finish})}}),jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return null==speed||"boolean"==typeof speed?cssFn.apply(this,arguments):this.animate(genFx(name,!0),speed,easing,callback)}}),jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.timers=[],jQuery.fx.tick=function(){var timer,timers=jQuery.timers,i=0;for(fxNow=jQuery.now();i<timers.length;i++)timer=timers[i],timer()||timers[i]!==timer||timers.splice(i--,1);timers.length||jQuery.fx.stop(),fxNow=void 0},jQuery.fx.timer=function(timer){jQuery.timers.push(timer),timer()?jQuery.fx.start():jQuery.timers.pop()},jQuery.fx.interval=13,jQuery.fx.start=function(){timerId||(timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval))},jQuery.fx.stop=function(){clearInterval(timerId),timerId=null},jQuery.fx.speeds={slow:600,fast:200,_default:400},jQuery.fn.delay=function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},function(){var input,div,select,a,opt;div=document.createElement("div"),div.setAttribute("className","t"),div.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=div.getElementsByTagName("a")[0],select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],a.style.cssText="top:1px",support.getSetAttribute="t"!==div.className,support.style=/top/.test(a.getAttribute("style")),support.hrefNormalized="/a"===a.getAttribute("href"),support.checkOn=!!input.value,support.optSelected=opt.selected,support.enctype=!!document.createElement("form").enctype,select.disabled=!0,support.optDisabled=!opt.disabled,input=document.createElement("input"),input.setAttribute("value",""),support.input=""===input.getAttribute("value"),input.value="t",input.setAttribute("type","radio"),support.radioValue="t"===input.value}();var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];{if(arguments.length)return isFunction=jQuery.isFunction(value),this.each(function(i){var val;1===this.nodeType&&(val=isFunction?value.call(this,i,jQuery(this).val()):value,null==val?val="":"number"==typeof val?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return null==value?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()],hooks&&"set"in hooks&&void 0!==hooks.set(this,val,"value")||(this.value=val))});if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&void 0!==(ret=hooks.get(elem,"value"))?ret:(ret=elem.value,"string"==typeof ret?ret.replace(rreturn,""):null==ret?"":ret)}}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return null!=val?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){for(var value,option,options=elem.options,index=elem.selectedIndex,one="select-one"===elem.type||0>index,values=one?null:[],max=one?index+1:options.length,i=0>index?max:one?index:0;max>i;i++)if(option=options[i],!(!option.selected&&i!==index||(support.optDisabled?option.disabled:null!==option.getAttribute("disabled"))||option.parentNode.disabled&&jQuery.nodeName(option.parentNode,"optgroup"))){if(value=jQuery(option).val(),one)return value;values.push(value)}return values},set:function(elem,value){for(var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;i--;)if(option=options[i],jQuery.inArray(jQuery.valHooks.option.get(option),values)>=0)try{option.selected=optionSet=!0}catch(_){option.scrollHeight}else option.selected=!1;return optionSet||(elem.selectedIndex=-1),options}}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){return jQuery.isArray(value)?elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0:void 0}},support.checkOn||(jQuery.valHooks[this].get=function(elem){return null===elem.getAttribute("value")?"on":elem.value})});var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle,ruseDefault=/^(?:checked|selected)$/i,getSetAttribute=support.getSetAttribute,getSetInput=support.input;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}}),jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return typeof elem.getAttribute===strundefined?jQuery.prop(elem,name,value):(1===nType&&jQuery.isXMLDoc(elem)||(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)),void 0===value?hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:(ret=jQuery.find.attr(elem,name),null==ret?void 0:ret):null!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:(elem.setAttribute(name,value+""),value):void jQuery.removeAttr(elem,name))},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&1===elem.nodeType)for(;name=attrNames[i++];)propName=jQuery.propFix[name]||name,jQuery.expr.match.bool.test(name)?getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem[propName]=!1:elem[jQuery.camelCase("default-"+name)]=elem[propName]=!1:jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName)},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&"radio"===value&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}}}}),boolHook={set:function(elem,value,name){return value===!1?jQuery.removeAttr(elem,name):getSetInput&&getSetAttribute||!ruseDefault.test(name)?elem.setAttribute(!getSetAttribute&&jQuery.propFix[name]||name,name):elem[jQuery.camelCase("default-"+name)]=elem[name]=!0,name}},jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=getSetInput&&getSetAttribute||!ruseDefault.test(name)?function(elem,name,isXML){var ret,handle;return isXML||(handle=attrHandle[name],attrHandle[name]=ret,ret=null!=getter(elem,name,isXML)?name.toLowerCase():null,attrHandle[name]=handle),ret}:function(elem,name,isXML){return isXML?void 0:elem[jQuery.camelCase("default-"+name)]?name.toLowerCase():null}}),getSetInput&&getSetAttribute||(jQuery.attrHooks.value={set:function(elem,value,name){return jQuery.nodeName(elem,"input")?void(elem.defaultValue=value):nodeHook&&nodeHook.set(elem,value,name)}}),getSetAttribute||(nodeHook={set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||elem.setAttributeNode(ret=elem.ownerDocument.createAttribute(name)),ret.value=value+="","value"===name||value===elem.getAttribute(name)?value:void 0}},attrHandle.id=attrHandle.name=attrHandle.coords=function(elem,name,isXML){var ret;return isXML?void 0:(ret=elem.getAttributeNode(name))&&""!==ret.value?ret.value:null},jQuery.valHooks.button={get:function(elem,name){var ret=elem.getAttributeNode(name);return ret&&ret.specified?ret.value:void 0},set:nodeHook.set},jQuery.attrHooks.contenteditable={set:function(elem,value,name){nodeHook.set(elem,""===value?!1:value,name)}},jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]={set:function(elem,value){return""===value?(elem.setAttribute(name,"auto"),value):void 0}}})),support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText||void 0},set:function(elem,value){return elem.style.cssText=value+""}});var rfocusable=/^(?:input|select|textarea|button|object)$/i,rclickable=/^(?:a|area)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=void 0,delete this[name]}catch(e){}})}}),jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(elem&&3!==nType&&8!==nType&&2!==nType)return notxml=1!==nType||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),void 0!==value?hooks&&"set"in hooks&&void 0!==(ret=hooks.set(elem,value,name))?ret:elem[name]=value:hooks&&"get"in hooks&&null!==(ret=hooks.get(elem,name))?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var tabindex=jQuery.find.attr(elem,"tabindex");return tabindex?parseInt(tabindex,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:-1}}}}),support.hrefNormalized||jQuery.each(["href","src"],function(i,name){jQuery.propHooks[name]={get:function(elem){return elem.getAttribute(name,4)}}}),support.optSelected||(jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}}),jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this}),support.enctype||(jQuery.propFix.enctype="encoding");var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed="string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ")){for(j=0;clazz=classes[j++];)cur.indexOf(" "+clazz+" ")<0&&(cur+=clazz+" ");finalValue=jQuery.trim(cur),elem.className!==finalValue&&(elem.className=finalValue)}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,i=0,len=this.length,proceed=0===arguments.length||"string"==typeof value&&value;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(proceed)for(classes=(value||"").match(rnotwhite)||[];len>i;i++)if(elem=this[i],cur=1===elem.nodeType&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"")){for(j=0;clazz=classes[j++];)for(;cur.indexOf(" "+clazz+" ")>=0;)cur=cur.replace(" "+clazz+" "," ");finalValue=value?jQuery.trim(cur):"",elem.className!==finalValue&&(elem.className=finalValue)}return this},toggleClass:function(value,stateVal){var type=typeof value;return"boolean"==typeof stateVal&&"string"===type?stateVal?this.addClass(value):this.removeClass(value):jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if("string"===type)for(var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];className=classNames[i++];)self.hasClass(className)?self.removeClass(className):self.addClass(className);else(type===strundefined||"boolean"===type)&&(this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||"")})},hasClass:function(selector){for(var className=" "+selector+" ",i=0,l=this.length;l>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0)return!0;return!1}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}}),jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return 1===arguments.length?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now(),rquery=/\?/,rvalidtokens=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;jQuery.parseJSON=function(data){if(window.JSON&&window.JSON.parse)return window.JSON.parse(data+"");var requireNonComma,depth=null,str=jQuery.trim(data+"");return str&&!jQuery.trim(str.replace(rvalidtokens,function(token,comma,open,close){return requireNonComma&&comma&&(depth=0),0===depth?token:(requireNonComma=open||comma,depth+=!close-!open,"")}))?Function("return "+str)():jQuery.error("Invalid JSON: "+data)},jQuery.parseXML=function(data){var xml,tmp;if(!data||"string"!=typeof data)return null;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=void 0}return xml&&xml.documentElement&&!xml.getElementsByTagName("parsererror").length||jQuery.error("Invalid XML: "+data),xml};var ajaxLocParts,ajaxLocation,rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*");try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;2!==state&&(state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=void 0,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0,isSuccess=status>=200&&300>status||304===status,responses&&(response=ajaxHandleResponses(s,jqXHR,responses)),response=ajaxConvert(s,response,jqXHR,isSuccess),isSuccess?(s.ifModified&&(modified=jqXHR.getResponseHeader("Last-Modified"),modified&&(jQuery.lastModified[cacheURL]=modified),modified=jqXHR.getResponseHeader("etag"),modified&&(jQuery.etag[cacheURL]=modified)),204===status||"HEAD"===s.type?statusText="nocontent":304===status?statusText="notmodified":(statusText=response.state,success=response.data,error=response.error,isSuccess=!error)):(error=statusText,(status||!statusText)&&(statusText="error",0>status&&(status=0))),jqXHR.status=status,jqXHR.statusText=(nativeStatusText||statusText)+"",isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=void 0,fireGlobals&&globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop")))}"object"==typeof url&&(options=url,url=void 0),options=options||{};var parts,i,cacheURL,responseHeadersString,timeoutTimer,fireGlobals,transport,responseHeaders,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(2===state){if(!responseHeaders)for(responseHeaders={};match=rheaders.exec(responseHeadersString);)responseHeaders[match[1].toLowerCase()]=match[2];match=responseHeaders[key.toLowerCase()]}return null==match?null:match},getAllResponseHeaders:function(){return 2===state?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();return state||(name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value),this},overrideMimeType:function(type){return state||(s.mimeType=type),this},statusCode:function(map){var code;if(map)if(2>state)for(code in map)statusCode[code]=[statusCode[code],map[code]];else jqXHR.always(map[jqXHR.status]);return this},abort:function(statusText){var finalText=statusText||strAbort;return transport&&transport.abort(finalText),done(0,finalText),this}};if(deferred.promise(jqXHR).complete=completeDeferred.add,jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.type=options.method||options.type||s.method||s.type,s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""],
null==s.crossDomain&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]===ajaxLocParts[1]&&parts[2]===ajaxLocParts[2]&&(parts[3]||("http:"===parts[1]?"80":"443"))===(ajaxLocParts[3]||("http:"===ajaxLocParts[1]?"80":"443")))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR),2===state)return jqXHR;fireGlobals=jQuery.event&&s.global,fireGlobals&&0===jQuery.active++&&jQuery.event.trigger("ajaxStart"),s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),cacheURL=s.url,s.hasContent||(s.data&&(cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data,delete s.data),s.cache===!1&&(s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++)),s.ifModified&&(jQuery.lastModified[cacheURL]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL]),jQuery.etag[cacheURL]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])),(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===!1||2===state))return jqXHR.abort();strAbort="abort";for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);if(transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR)){jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(2>state))throw e;done(-1,e)}}else done(-1,"No Transport");return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,void 0,callback,"script")}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=void 0),jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}}),jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},jQuery.fn.extend({wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){for(var elem=this;elem.firstChild&&1===elem.firstChild.nodeType;)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()}}),jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0||!support.reliableHiddenOffsets()&&"none"===(elem.style&&elem.style.display||jQuery.css(elem,"display"))},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():null==value?"":value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};if(void 0===traditional&&(traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional),jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")},jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return null==val?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.ajaxSettings.xhr=void 0!==window.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&createStandardXHR()||createActiveXHR()}:createStandardXHR;var xhrId=0,xhrCallbacks={},xhrSupported=jQuery.ajaxSettings.xhr();window.attachEvent&&window.attachEvent("onunload",function(){for(var key in xhrCallbacks)xhrCallbacks[key](void 0,!0)}),support.cors=!!xhrSupported&&"withCredentials"in xhrSupported,xhrSupported=support.ajax=!!xhrSupported,xhrSupported&&jQuery.ajaxTransport(function(options){if(!options.crossDomain||support.cors){var callback;return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;if(xhr.open(options.type,options.url,options.async,options.username,options.password),options.xhrFields)for(i in options.xhrFields)xhr[i]=options.xhrFields[i];options.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(options.mimeType),options.crossDomain||headers["X-Requested-With"]||(headers["X-Requested-With"]="XMLHttpRequest");for(i in headers)void 0!==headers[i]&&xhr.setRequestHeader(i,headers[i]+"");xhr.send(options.hasContent&&options.data||null),callback=function(_,isAbort){var status,statusText,responses;if(callback&&(isAbort||4===xhr.readyState))if(delete xhrCallbacks[id],callback=void 0,xhr.onreadystatechange=jQuery.noop,isAbort)4!==xhr.readyState&&xhr.abort();else{responses={},status=xhr.status,"string"==typeof xhr.responseText&&(responses.text=xhr.responseText);try{statusText=xhr.statusText}catch(e){statusText=""}status||!options.isLocal||options.crossDomain?1223===status&&(status=204):status=responses.text?200:404}responses&&complete(status,statusText,responses,xhr.getAllResponseHeaders())},options.async?4===xhr.readyState?setTimeout(callback):xhr.onreadystatechange=xhrCallbacks[id]=callback:callback()},abort:function(){callback&&callback(void 0,!0)}}}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){void 0===s.cache&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||jQuery("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async=!0,s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))&&(script.onload=script.onreadystatechange=null,script.parentNode&&script.parentNode.removeChild(script),script=null,isAbort||callback(200,"success"))},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(void 0,!0)}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;return this[callback]=!0,callback}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==!1&&(rjsonp.test(s.url)?"url":"string"==typeof s.data&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");return jsonProp||"jsonp"===s.dataTypes[0]?(callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,jsonProp?s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName):s.jsonp!==!1&&(s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName),s.converters["script json"]=function(){return responseContainer||jQuery.error(callbackName+" was not called"),responseContainer[0]},s.dataTypes[0]="json",overwritten=window[callbackName],window[callbackName]=function(){responseContainer=arguments},jqXHR.always(function(){window[callbackName]=overwritten,s[callbackName]&&(s.jsonpCallback=originalSettings.jsonpCallback,oldCallbacks.push(callbackName)),responseContainer&&jQuery.isFunction(overwritten)&&overwritten(responseContainer[0]),responseContainer=overwritten=void 0}),"script"):void 0}),jQuery.parseHTML=function(data,context,keepScripts){if(!data||"string"!=typeof data)return null;"boolean"==typeof context&&(keepScripts=context,context=!1),context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];return parsed?[context.createElement(parsed[1])]:(parsed=jQuery.buildFragment([data],context,scripts),scripts&&scripts.length&&jQuery(scripts).remove(),jQuery.merge([],parsed.childNodes))};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if("string"!=typeof url&&_load)return _load.apply(this,arguments);var selector,response,type,self=this,off=url.indexOf(" ");return off>=0&&(selector=jQuery.trim(url.slice(off,url.length)),url=url.slice(0,off)),jQuery.isFunction(params)?(callback=params,params=void 0):params&&"object"==typeof params&&(type="POST"),self.length>0&&jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments,self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])}),this},jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}}),jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};"static"===position&&(elem.style.position="relative"),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=("absolute"===position||"fixed"===position)&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),null!=options.top&&(props.top=options.top-curOffset.top+curTop),null!=options.left&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({offset:function(options){if(arguments.length)return void 0===options?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var docElem,win,box={top:0,left:0},elem=this[0],doc=elem&&elem.ownerDocument;if(doc)return docElem=doc.documentElement,jQuery.contains(docElem,elem)?(typeof elem.getBoundingClientRect!==strundefined&&(box=elem.getBoundingClientRect()),win=getWindow(doc),{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)}):box},position:function(){if(this[0]){var offsetParent,offset,parentOffset={top:0,left:0},elem=this[0];return"fixed"===jQuery.css(elem,"position")?offset=elem.getBoundingClientRect():(offsetParent=this.offsetParent(),offset=this.offset(),jQuery.nodeName(offsetParent[0],"html")||(parentOffset=offsetParent.offset()),parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",!0),parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",!0)),{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",!0),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var offsetParent=this.offsetParent||docElem;offsetParent&&!jQuery.nodeName(offsetParent,"html")&&"static"===jQuery.css(offsetParent,"position");)offsetParent=offsetParent.offsetParent;return offsetParent||docElem})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);return void 0===val?win?prop in win?win[prop]:win.document.documentElement[method]:elem[method]:void(win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val)},method,val,arguments.length,null)}}),jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){return computed?(computed=curCSS(elem,prop),rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed):void 0})}),jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||"boolean"!=typeof margin),extra=defaultExtra||(margin===!0||value===!0?"margin":"border");return access(this,function(elem,type,value){var doc;return jQuery.isWindow(elem)?elem.document.documentElement["client"+name]:9===elem.nodeType?(doc=elem.documentElement,Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])):void 0===value?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:void 0,chainable,null)}})}),jQuery.fn.size=function(){return this.length},jQuery.fn.andSelf=jQuery.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return jQuery});var _jQuery=window.jQuery,_$=window.$;return jQuery.noConflict=function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},typeof noGlobal===strundefined&&(window.jQuery=window.$=jQuery),jQuery}),!function(){var q=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function R(a){function d(e){var b=e.charCodeAt(0);if(92!==b)return b;var a=e.charAt(1);return(b=r[a])?b:a>="0"&&"7">=a?parseInt(e.substring(1),8):"u"===a||"x"===a?parseInt(e.substring(2),16):e.charCodeAt(1)}function g(e){return 32>e?(16>e?"\\x0":"\\x")+e.toString(16):(e=String.fromCharCode(e),"\\"===e||"-"===e||"]"===e||"^"===e?"\\"+e:e)}function b(e){var b=e.substring(1,e.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),e=[],a="^"===b[0],c=["["];a&&c.push("^");for(var a=a?1:0,f=b.length;f>a;++a){var h=b[a];if(/\\[bdsw]/i.test(h))c.push(h);else{var l,h=d(h);f>a+2&&"-"===b[a+1]?(l=d(b[a+2]),a+=2):l=h,e.push([h,l]),65>l||h>122||(65>l||h>90||e.push([32|Math.max(65,h),32|Math.min(l,90)]),97>l||h>122||e.push([-33&Math.max(97,h),-33&Math.min(l,122)]))}}for(e.sort(function(e,a){return e[0]-a[0]||a[1]-e[1]}),b=[],f=[],a=0;a<e.length;++a)h=e[a],h[0]<=f[1]+1?f[1]=Math.max(f[1],h[1]):b.push(f=h);for(a=0;a<b.length;++a)h=b[a],c.push(g(h[0])),h[1]>h[0]&&(h[1]+1>h[0]&&c.push("-"),c.push(g(h[1])));return c.push("]"),c.join("")}function s(e){for(var a=e.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),c=a.length,d=[],f=0,h=0;c>f;++f){var l=a[f];"("===l?++h:"\\"===l.charAt(0)&&(l=+l.substring(1))&&(h>=l?d[l]=-1:a[f]=g(l))}for(f=1;f<d.length;++f)-1===d[f]&&(d[f]=++x);for(h=f=0;c>f;++f)l=a[f],"("===l?(++h,d[h]||(a[f]="(?:")):"\\"===l.charAt(0)&&(l=+l.substring(1))&&h>=l&&(a[f]="\\"+d[l]);for(f=0;c>f;++f)"^"===a[f]&&"^"!==a[f+1]&&(a[f]="");if(e.ignoreCase&&m)for(f=0;c>f;++f)l=a[f],e=l.charAt(0),l.length>=2&&"["===e?a[f]=b(l):"\\"!==e&&(a[f]=l.replace(/[A-Za-z]/g,function(a){return a=a.charCodeAt(0),"["+String.fromCharCode(-33&a,32|a)+"]"}));return a.join("")}for(var x=0,m=!1,j=!1,k=0,c=a.length;c>k;++k){var i=a[k];if(i.ignoreCase)j=!0;else if(/[a-z]/i.test(i.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){m=!0,j=!1;break}}for(var r={b:8,t:9,n:10,v:11,f:12,r:13},n=[],k=0,c=a.length;c>k;++k){if(i=a[k],i.global||i.multiline)throw Error(""+i);n.push("(?:"+s(i)+")")}return RegExp(n.join("|"),j?"gi":"g")}function S(a,d){function g(a){var c=a.nodeType;if(1==c){if(!b.test(a.className)){for(c=a.firstChild;c;c=c.nextSibling)g(c);c=a.nodeName.toLowerCase(),("br"===c||"li"===c)&&(s[j]="\n",m[j<<1]=x++,m[j++<<1|1]=a)}}else(3==c||4==c)&&(c=a.nodeValue,c.length&&(c=d?c.replace(/\r\n?/g,"\n"):c.replace(/[\t\n\r ]+/g," "),s[j]=c,m[j<<1]=x,x+=c.length,m[j++<<1|1]=a))}var b=/(?:^|\s)nocode(?:\s|$)/,s=[],x=0,m=[],j=0;return g(a),{a:s.join("").replace(/\n$/,""),d:m}}function H(a,d,g,b){d&&(a={a:d,e:a},g(a),b.push.apply(b,a.g))}function T(a){for(var d=void 0,g=a.firstChild;g;g=g.nextSibling)var b=g.nodeType,d=1===b?d?a:g:3===b&&U.test(g.nodeValue)?a:d;return d===a?void 0:d}function D(a,d){function g(a){for(var j=a.e,k=[j,"pln"],c=0,i=a.a.match(s)||[],r={},n=0,e=i.length;e>n;++n){var f,z=i[n],w=r[z],t=void 0;if("string"==typeof w)f=!1;else{var h=b[z.charAt(0)];if(h)t=z.match(h[1]),w=h[0];else{for(f=0;x>f;++f)if(h=d[f],t=z.match(h[1])){w=h[0];break}t||(w="pln")}!(f=w.length>=5&&"lang-"===w.substring(0,5))||t&&"string"==typeof t[1]||(f=!1,w="src"),f||(r[z]=w)}if(h=c,c+=z.length,f){f=t[1];var l=z.indexOf(f),B=l+f.length;t[2]&&(B=z.length-t[2].length,l=B-f.length),w=w.substring(5),H(j+h,z.substring(0,l),g,k),H(j+h+l,f,I(w,f),k),H(j+h+B,z.substring(B),g,k)}else k.push(j+h,w)}a.g=k}var s,b={};!function(){for(var g=a.concat(d),j=[],k={},c=0,i=g.length;i>c;++c){var r=g[c],n=r[3];if(n)for(var e=n.length;--e>=0;)b[n.charAt(e)]=r;r=r[1],n=""+r,k.hasOwnProperty(n)||(j.push(r),k[n]=q)}j.push(/[\S\s]/),s=R(j)}();var x=d.length;return g}function v(a){var d=[],g=[];a.tripleQuotedStrings?d.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):a.multiLineStrings?d.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):d.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]),a.verbatimStrings&&g.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var b=a.hashComments;if(b&&(a.cStyleComments?(b>1?d.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):d.push(["com",/^#(?:(?:define|e(?:l|nd)if|else|error|ifn?def|include|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),g.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h(?:h|pp|\+\+)?|[a-z]\w*)>/,q])):d.push(["com",/^#[^\n\r]*/,q,"#"])),a.cStyleComments&&(g.push(["com",/^\/\/[^\n\r]*/,q]),g.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q])),b=a.regexLiterals){var s=(b=b>1?"":"\n\r")?".":"[\\S\\s]";g.push(["lang-regex",RegExp("^(?:^^\\.?|[+-]|[!=]=?=?|\\#|%=?|&&?=?|\\(|\\*=?|[+\\-]=|->|\\/=?|::?|<<?=?|>>?>?=?|,|;|\\?|@|\\[|~|{|\\^\\^?=?|\\|\\|?=?|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\s*("+("/(?=[^/*"+b+"])(?:[^/\\x5B\\x5C"+b+"]|\\x5C"+s+"|\\x5B(?:[^\\x5C\\x5D"+b+"]|\\x5C"+s+")*(?:\\x5D|$))+/")+")")])}return(b=a.types)&&g.push(["typ",b]),b=(""+a.keywords).replace(/^ | $/g,""),b.length&&g.push(["kwd",RegExp("^(?:"+b.replace(/[\s,]+/g,"|")+")\\b"),q]),d.push(["pln",/^\s+/,q," \r\n	"]),b="^.[^\\s\\w.$@'\"`/\\\\]*",a.regexLiterals&&(b+="(?!s*/)"),g.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",RegExp(b),q]),D(d,g)}function J(a,d,g){function b(a){var c=a.nodeType;if(1!=c||x.test(a.className)){if((3==c||4==c)&&g){var d=a.nodeValue,i=d.match(m);i&&(c=d.substring(0,i.index),a.nodeValue=c,(d=d.substring(i.index+i[0].length))&&a.parentNode.insertBefore(j.createTextNode(d),a.nextSibling),s(a),c||a.parentNode.removeChild(a))}}else if("br"===a.nodeName)s(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)b(a)}function s(a){function b(a,c){var d=c?a.cloneNode(!1):a,e=a.parentNode;if(e){var e=b(e,1),g=a.nextSibling;e.appendChild(d);for(var i=g;i;i=g)g=i.nextSibling,e.appendChild(i)}return d}for(;!a.nextSibling;)if(a=a.parentNode,!a)return;for(var d,a=b(a.nextSibling,0);(d=a.parentNode)&&1===d.nodeType;)a=d;c.push(a)}for(var x=/(?:^|\s)nocode(?:\s|$)/,m=/\r\n?|\n/,j=a.ownerDocument,k=j.createElement("li");a.firstChild;)k.appendChild(a.firstChild);for(var c=[k],i=0;i<c.length;++i)b(c[i]);d===(0|d)&&c[0].setAttribute("value",d);var r=j.createElement("ol");r.className="linenums";for(var d=Math.max(0,d-1|0)||0,i=0,n=c.length;n>i;++i)k=c[i],k.className="L"+(i+d)%10,k.firstChild||k.appendChild(j.createTextNode("")),r.appendChild(k);a.appendChild(r)}function p(a,d){for(var g=d.length;--g>=0;){var b=d[g];F.hasOwnProperty(b)?E.console&&void 0:F[b]=a}}function I(a,d){return a&&F.hasOwnProperty(a)||(a=/^\s*</.test(d)?"default-markup":"default-code"),F[a]}function K(a){var d=a.h;try{var g=S(a.c,a.i),b=g.a;a.a=b,a.d=g.d,a.e=0,I(d,b)(a);var s=/\bMSIE\s(\d+)/.exec(navigator.userAgent),s=s&&+s[1]<=8,d=/\n/g,x=a.a,m=x.length,g=0,j=a.d,k=j.length,b=0,c=a.g,i=c.length,r=0;c[i]=m;var n,e;for(e=n=0;i>e;)c[e]!==c[e+2]?(c[n++]=c[e++],c[n++]=c[e++]):e+=2;for(i=n,e=n=0;i>e;){for(var p=c[e],w=c[e+1],t=e+2;i>=t+2&&c[t+1]===w;)t+=2;c[n++]=p,c[n++]=w,e=t}c.length=n;var h,f=a.c;f&&(h=f.style.display,f.style.display="none");try{for(;k>b;){var G,l=j[b+2]||m,B=c[r+2]||m,t=Math.min(l,B),A=j[b+1];if(1!==A.nodeType&&(G=x.substring(g,t))){s&&(G=G.replace(d,"\r")),A.nodeValue=G;var L=A.ownerDocument,o=L.createElement("span");o.className=c[r+1];var v=A.parentNode;v.replaceChild(o,A),o.appendChild(A),l>g&&(j[b+1]=A=L.createTextNode(x.substring(t,l)),v.insertBefore(A,o.nextSibling))}g=t,g>=l&&(b+=2),g>=B&&(r+=2)}}finally{f&&(f.style.display=h)}}catch(u){E.console&&void 0}}var E=window,y=["break,continue,do,else,for,if,return,while"],C=[[y,"auto,case,char,const,default,double,enum,extern,float,goto,inline,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],M=[C,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,delegate,dynamic_cast,explicit,export,friend,generic,late_check,mutable,namespace,nullptr,property,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],V=[C,"abstract,assert,boolean,byte,extends,final,finally,implements,import,instanceof,interface,null,native,package,strictfp,super,synchronized,throws,transient"],N=[C,"abstract,as,base,bool,by,byte,checked,decimal,delegate,descending,dynamic,event,finally,fixed,foreach,from,group,implicit,in,interface,internal,into,is,let,lock,null,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var,virtual,where"],C=[C,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],O=[y,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],P=[y,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],W=[y,"as,assert,const,copy,drop,enum,extern,fail,false,fn,impl,let,log,loop,match,mod,move,mut,priv,pub,pure,ref,self,static,struct,true,trait,type,unsafe,use"],y=[y,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],Q=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)\b/,U=/\S/,X=v({keywords:[M,N,C,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",O,P,y],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),F={};p(X,["default-code"]),p(D([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),p(D([["pln",/^\s+/,q," 	\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'/>]|\/(?=\s)))/],["pun",/^[/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),p(D([],[["atv",/^[\S\s]+/]]),["uq.val"]),p(v({keywords:M,hashComments:!0,cStyleComments:!0,types:Q}),["c","cc","cpp","cxx","cyc","m"]),p(v({keywords:"null,true,false"}),["json"]),p(v({keywords:N,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:Q}),["cs"]),p(v({keywords:V,cStyleComments:!0}),["java"]),p(v({keywords:y,hashComments:!0,multiLineStrings:!0}),["bash","bsh","csh","sh"]),p(v({keywords:O,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py","python"]),p(v({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:2}),["perl","pl","pm"]),p(v({keywords:P,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb","ruby"]),p(v({keywords:C,cStyleComments:!0,regexLiterals:!0}),["javascript","js"]),p(v({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,throw,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),p(v({keywords:W,cStyleComments:!0,multilineStrings:!0}),["rc","rs","rust"]),p(D([],[["str",/^[\S\s]+/]]),["regex"]);var Y=E.PR={createSimpleLexer:D,registerLangHandler:p,sourceDecorator:v,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ",prettyPrintOne:E.prettyPrintOne=function(a,d,g){var b=document.createElement("div");return b.innerHTML="<pre>"+a+"</pre>",b=b.firstChild,g&&J(b,g,!0),K({h:d,j:g,c:b,i:1}),b.innerHTML},prettyPrint:E.prettyPrint=function(a,d){function g(){for(var b=E.PR_SHOULD_USE_CONTINUATION?c.now()+250:1/0;i<p.length&&c.now()<b;i++){for(var d=p[i],j=h,k=d;k=k.previousSibling;){var m=k.nodeType,o=(7===m||8===m)&&k.nodeValue;if(o?!/^\??prettify\b/.test(o):3!==m||/\S/.test(k.nodeValue))break;if(o){j={},o.replace(/\b(\w+)=([\w%+\-.:]+)/g,function(a,b,c){j[b]=c});break}}if(k=d.className,(j!==h||e.test(k))&&!v.test(k)){for(m=!1,o=d.parentNode;o;o=o.parentNode)if(f.test(o.tagName)&&o.className&&e.test(o.className)){m=!0;break}if(!m){if(d.className+=" prettyprinted",m=j.lang,!m){var y,m=k.match(n);!m&&(y=T(d))&&t.test(y.tagName)&&(m=y.className.match(n)),m&&(m=m[1])}if(w.test(d.tagName))o=1;else var o=d.currentStyle,u=s.defaultView,o=(o=o?o.whiteSpace:u&&u.getComputedStyle?u.getComputedStyle(d,q).getPropertyValue("white-space"):0)&&"pre"===o.substring(0,3);u=j.linenums,(u="true"===u||+u)||(u=(u=k.match(/\blinenums\b(?::(\d+))?/))?u[1]&&u[1].length?+u[1]:!0:!1),u&&J(d,u,o),r={h:m,c:d,j:u,i:o},K(r)}}}i<p.length?setTimeout(g,250):"function"==typeof a&&a()}for(var b=d||document.body,s=b.ownerDocument||document,b=[b.getElementsByTagName("pre"),b.getElementsByTagName("code"),b.getElementsByTagName("xmp")],p=[],m=0;m<b.length;++m)for(var j=0,k=b[m].length;k>j;++j)p.push(b[m][j]);var b=q,c=Date;c.now||(c={now:function(){return+new Date}});var r,i=0,n=/\blang(?:uage)?-([\w.]+)(?!\S)/,e=/\bprettyprint\b/,v=/\bprettyprinted\b/,w=/pre|xmp/i,t=/^code$/i,f=/^(?:pre|code|xmp)$/i,h={};g()}};"function"==typeof define&&define.amd&&define("google-code-prettify",[],function(){return Y})}()}(),function(window,document,Math,undef){function setupTypedArray(name,fallback){return name in window?window[name]:"function"==typeof window[fallback]?window[fallback]:function(obj){if(obj instanceof Array)return obj;if("number"==typeof obj){var arr=[];return arr.length=obj,arr}}}function virtHashCode(obj){if("string"==typeof obj){for(var hash=0,i=0;i<obj.length;++i)hash=31*hash+obj.charCodeAt(i)&4294967295;return hash}return"object"!=typeof obj?4294967295&obj:obj.hashCode instanceof Function?obj.hashCode():(obj.$id===undef&&(obj.$id=Math.floor(65536*Math.random())-32768<<16|Math.floor(65536*Math.random())),obj.$id)}function virtEquals(obj,other){return null===obj||null===other?null===obj&&null===other:"string"==typeof obj?obj===other:"object"!=typeof obj?obj===other:obj.equals instanceof Function?obj.equals(other):obj===other}function DefaultScope(){}function overloadBaseClassFunction(object,name,basefn){if(!object.hasOwnProperty(name)||"function"!=typeof object[name])return void(object[name]=basefn);var fn=object[name];if("$overloads"in fn)return void(fn.$defaultOverload=basefn);if("$overloads"in basefn||fn.length!==basefn.length){var overloads,defaultOverload;"$overloads"in basefn?(overloads=basefn.$overloads.slice(0),overloads[fn.length]=fn,defaultOverload=basefn.$defaultOverload):(overloads=[],overloads[basefn.length]=basefn,overloads[fn.length]=fn,defaultOverload=fn);var hubfn=function(){var fn=hubfn.$overloads[arguments.length]||("$methodArgsIndex"in hubfn&&arguments.length>hubfn.$methodArgsIndex?hubfn.$overloads[hubfn.$methodArgsIndex]:null)||hubfn.$defaultOverload;return fn.apply(this,arguments)};hubfn.$overloads=overloads,"$methodArgsIndex"in basefn&&(hubfn.$methodArgsIndex=basefn.$methodArgsIndex),hubfn.$defaultOverload=defaultOverload,hubfn.name=name,object[name]=hubfn}}function extendClass(subClass,baseClass){function extendGetterSetter(propertyName){defaultScope.defineProperty(subClass,propertyName,{get:function(){return baseClass[propertyName]},set:function(v){baseClass[propertyName]=v},enumerable:!0})}var properties=[];for(var propertyName in baseClass)"function"==typeof baseClass[propertyName]?overloadBaseClassFunction(subClass,propertyName,baseClass[propertyName]):"$"===propertyName.charAt(0)||propertyName in subClass||properties.push(propertyName);for(;properties.length>0;)extendGetterSetter(properties.shift());subClass.$super=baseClass}function isNumericalJavaType(type){return"string"!=typeof type?!1:-1!==["byte","int","char","color","float","long","double"].indexOf(type)}function computeFontMetrics(pfont){var emQuad=250,correctionFactor=pfont.size/emQuad,canvas=document.createElement("canvas");
canvas.width=2*emQuad,canvas.height=2*emQuad,canvas.style.opacity=0;var cfmFont=pfont.getCSSDefinition(emQuad+"px","normal"),ctx=canvas.getContext("2d");ctx.font=cfmFont;var protrusions="dbflkhyjqpg";canvas.width=ctx.measureText(protrusions).width,ctx.font=cfmFont;var leadDiv=document.createElement("div");leadDiv.style.position="absolute",leadDiv.style.opacity=0,leadDiv.style.fontFamily='"'+pfont.name+'"',leadDiv.style.fontSize=emQuad+"px",leadDiv.innerHTML=protrusions+"<br/>"+protrusions,document.body.appendChild(leadDiv);var w=canvas.width,h=canvas.height,baseline=h/2;ctx.fillStyle="white",ctx.fillRect(0,0,w,h),ctx.fillStyle="black",ctx.fillText(protrusions,0,baseline);for(var pixelData=ctx.getImageData(0,0,w,h).data,i=0,w4=4*w,len=pixelData.length;++i<len&&255===pixelData[i];)nop();var ascent=Math.round(i/w4);for(i=len-1;--i>0&&255===pixelData[i];)nop();var descent=Math.round(i/w4);if(pfont.ascent=correctionFactor*(baseline-ascent),pfont.descent=correctionFactor*(descent-baseline),document.defaultView.getComputedStyle){var leadDivHeight=document.defaultView.getComputedStyle(leadDiv,null).getPropertyValue("height");leadDivHeight=correctionFactor*leadDivHeight.replace("px",""),leadDivHeight>=2*pfont.size&&(pfont.leading=Math.round(leadDivHeight/2))}return document.body.removeChild(leadDiv),pfont.caching?ctx:void 0}function PFont(name,size){name===undef&&(name=""),this.name=name,size===undef&&(size=0),this.size=size,this.glyph=!1,this.ascent=0,this.descent=0,this.leading=1.2*size;var illegalIndicator=name.indexOf(" Italic Bold");-1!==illegalIndicator&&(name=name.substring(0,illegalIndicator)),this.style="normal";var italicsIndicator=name.indexOf(" Italic");-1!==italicsIndicator&&(name=name.substring(0,italicsIndicator),this.style="italic"),this.weight="normal";var boldIndicator=name.indexOf(" Bold");if(-1!==boldIndicator&&(name=name.substring(0,boldIndicator),this.weight="bold"),this.family="sans-serif",name!==undef)switch(name){case"sans-serif":case"serif":case"monospace":case"fantasy":case"cursive":this.family=name;break;default:this.family='"'+name+'", sans-serif'}this.context2d=computeFontMetrics(this),this.css=this.getCSSDefinition(),this.context2d&&(this.context2d.font=this.css)}function getGlobalMembers(){var i,l,names=["abs","acos","alpha","ambient","ambientLight","append","applyMatrix","arc","arrayCopy","asin","atan","atan2","background","beginCamera","beginDraw","beginShape","bezier","bezierDetail","bezierPoint","bezierTangent","bezierVertex","binary","blend","blendColor","blit_resize","blue","box","breakShape","brightness","camera","ceil","Character","color","colorMode","concat","constrain","copy","cos","createFont","createGraphics","createImage","cursor","curve","curveDetail","curvePoint","curveTangent","curveTightness","curveVertex","day","degrees","directionalLight","disableContextMenu","dist","draw","ellipse","ellipseMode","emissive","enableContextMenu","endCamera","endDraw","endShape","exit","exp","expand","externals","fill","filter","floor","focused","frameCount","frameRate","frustum","get","glyphLook","glyphTable","green","height","hex","hint","hour","hue","image","imageMode","intersect","join","key","keyCode","keyPressed","keyReleased","keyTyped","lerp","lerpColor","lightFalloff","lights","lightSpecular","line","link","loadBytes","loadFont","loadGlyphs","loadImage","loadPixels","loadShape","loadXML","loadStrings","log","loop","mag","map","match","matchAll","max","millis","min","minute","mix","modelX","modelY","modelZ","modes","month","mouseButton","mouseClicked","mouseDragged","mouseMoved","mouseOut","mouseOver","mousePressed","mouseReleased","mouseScroll","mouseScrolled","mouseX","mouseY","name","nf","nfc","nfp","nfs","noCursor","noFill","noise","noiseDetail","noiseSeed","noLights","noLoop","norm","normal","noSmooth","noStroke","noTint","ortho","param","parseBoolean","parseByte","parseChar","parseFloat","parseInt","peg","perspective","PImage","pixels","PMatrix2D","PMatrix3D","PMatrixStack","pmouseX","pmouseY","point","pointLight","popMatrix","popStyle","pow","print","printCamera","println","printMatrix","printProjection","PShape","PShapeSVG","pushMatrix","pushStyle","quad","radians","random","Random","randomSeed","rect","rectMode","red","redraw","requestImage","resetMatrix","reverse","rotate","rotateX","rotateY","rotateZ","round","saturation","save","saveFrame","saveStrings","scale","screenX","screenY","screenZ","second","set","setup","shape","shapeMode","shared","shearX","shearY","shininess","shorten","sin","size","smooth","sort","specular","sphere","sphereDetail","splice","split","splitTokens","spotLight","sq","sqrt","status","str","stroke","strokeCap","strokeJoin","strokeWeight","subset","tan","text","textAlign","textAscent","textDescent","textFont","textLeading","textMode","textSize","texture","textureMode","textWidth","tint","toImageData","touchCancel","touchEnd","touchMove","touchStart","translate","transform","triangle","trim","unbinary","unhex","updatePixels","use3DContext","vertex","width","XMLElement","XML","year","__contains","__equals","__equalsIgnoreCase","__frameRate","__hashCode","__int_cast","__instanceof","__keyPressed","__mousePressed","__printStackTrace","__replace","__replaceAll","__replaceFirst","__toCharArray","__split","__codePointAt","__startsWith","__endsWith","__matches"],members={};for(i=0,l=names.length;l>i;++i)members[names[i]]=null;for(var lib in Processing.lib)if(Processing.lib.hasOwnProperty(lib)&&Processing.lib[lib].exports){var exportedNames=Processing.lib[lib].exports;for(i=0,l=exportedNames.length;l>i;++i)members[exportedNames[i]]=null}return members}function parseProcessing(code){function splitToAtoms(code){for(var atoms=[],items=code.split(/([\{\[\(\)\]\}])/),result=items[0],stack=[],i=1;i<items.length;i+=2){var item=items[i];if("["===item||"{"===item||"("===item)stack.push(result),result=item;else if("]"===item||"}"===item||")"===item){var kind="}"===item?"A":")"===item?"B":"C",index=atoms.length;atoms.push(result+item),result=stack.pop()+'"'+kind+(index+1)+'"'}result+=items[i+1]}return atoms.unshift(result),atoms}function injectStrings(code,strings){return code.replace(/'(\d+)'/g,function(all,index){var val=strings[index];return"/"===val.charAt(0)?val:/^'((?:[^'\\\n])|(?:\\.[0-9A-Fa-f]*))'$/.test(val)?"(new $p.Character("+val+"))":val})}function trimSpaces(string){var result,m1=/^\s*/.exec(string);if(m1[0].length===string.length)result={left:m1[0],middle:"",right:""};else{var m2=/\s*$/.exec(string);result={left:m1[0],middle:string.substring(m1[0].length,m2.index),right:m2[0]}}return result.untrim=function(t){return this.left+t+this.right},result}function trim(string){return string.replace(/^\s+/,"").replace(/\s+$/,"")}function appendToLookupTable(table,array){for(var i=0,l=array.length;l>i;++i)table[array[i]]=null;return table}function isLookupTableEmpty(table){for(var i in table)if(table.hasOwnProperty(i))return!1;return!0}function getAtomIndex(templ){return templ.substring(2,templ.length-1)}function addAtom(text,type){var lastIndex=atoms.length;return atoms.push(text),'"'+type+lastIndex+'"'}function generateClassId(){return"class"+ ++classIdSeed}function appendClass(class_,classId,scopeId){class_.classId=classId,class_.scopeId=scopeId,declaredClasses[classId]=class_}function extractClassesAndMethods(code){var s=code;return s=s.replace(classesRegex,function(all){return addAtom(all,"E")}),s=s.replace(methodsRegex,function(all){return addAtom(all,"D")}),s=s.replace(functionsRegex,function(all){return addAtom(all,"H")})}function extractConstructors(code,className){var result=code.replace(cstrsRegex,function(all,attr,name,params,throws_,body){return name!==className?all:addAtom(all,"G")});return result}function AstParam(name){this.name=name}function AstParams(params,methodArgsParam){this.params=params,this.methodArgsParam=methodArgsParam}function transformParams(params){var paramsWoPars=trim(params.substring(1,params.length-1)),result=[],methodArgsParam=null;if(""!==paramsWoPars)for(var paramList=paramsWoPars.split(","),i=0;i<paramList.length;++i){var param=/\b([A-Za-z_$][\w$]*\b)(\s*"[ABC][\d]*")*\s*$/.exec(paramList[i]);if(i===paramList.length-1&&paramList[i].indexOf("...")>=0){methodArgsParam=new AstParam(param[1]);break}result.push(new AstParam(param[1]))}return new AstParams(result,methodArgsParam)}function preExpressionTransform(expr){function replacePrototypeMethods(all,subject,method,atomIndex){var atom=atoms[atomIndex];repeatJavaReplacement=!0;var trimmed=trimSpaces(atom.substring(1,atom.length-1));return"__"+method+(""===trimmed.middle?addAtom("("+subject.replace(/\.\s*$/,"")+")","B"):addAtom("("+subject.replace(/\.\s*$/,"")+","+trimmed.middle+")","B"))}function replaceInstanceof(all,subject,type){return repeatJavaReplacement=!0,"__instanceof"+addAtom("("+subject+", "+type+")","B")}var s=expr;s=s.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"C\d+")+\s*("A\d+")/g,function(all,type,init){return init}),s=s.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"B\d+")\s*("A\d+")/g,function(all,type,init){return addAtom(all,"F")}),s=s.replace(functionsRegex,function(all){return addAtom(all,"H")}),s=s.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*("C\d+"(?:\s*"C\d+")*)/g,function(all,type,index){var args=index.replace(/"C(\d+)"/g,function(all,j){return atoms[j]}).replace(/\[\s*\]/g,"[null]").replace(/\s*\]\s*\[\s*/g,", "),arrayInitializer="{"+args.substring(1,args.length-1)+"}",createArrayArgs="('"+type+"', "+addAtom(arrayInitializer,"A")+")";return"$p.createJavaArray"+addAtom(createArrayArgs,"B")}),s=s.replace(/(\.\s*length)\s*"B\d+"/g,"$1"),s=s.replace(/#([0-9A-Fa-f]{6})\b/g,function(all,digits){return"0xFF"+digits}),s=s.replace(/"B(\d+)"(\s*(?:[\w$']|"B))/g,function(all,index,next){var atom=atoms[index];if(!/^\(\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\s*(?:"C\d+"\s*)*\)$/.test(atom))return all;if(/^\(\s*int\s*\)$/.test(atom))return"(int)"+next;var indexParts=atom.split(/"C(\d+)"/g);return indexParts.length>1&&!/^\[\s*\]$/.test(atoms[indexParts[1]])?all:""+next}),s=s.replace(/\(int\)([^,\]\)\}\?\:\*\+\-\/\^\|\%\&\~<\>\=]+)/g,function(all,arg){var trimmed=trimSpaces(arg);return trimmed.untrim("__int_cast("+trimmed.middle+")")}),s=s.replace(/\bsuper(\s*"B\d+")/g,"$$superCstr$1").replace(/\bsuper(\s*\.)/g,"$$super$1"),s=s.replace(/\b0+((\d*)(?:\.[\d*])?(?:[eE][\-\+]?\d+)?[fF]?)\b/,function(all,numberWo0,intPart){return numberWo0===intPart?all:""===intPart?"0"+numberWo0:numberWo0}),s=s.replace(/\b(\.?\d+\.?)[fF]\b/g,"$1"),s=s.replace(/([^\s])%([^=\s])/g,"$1 % $2"),s=s.replace(/\b(frameRate|keyPressed|mousePressed)\b(?!\s*"B)/g,"__$1"),s=s.replace(/\b(boolean|byte|char|float|int)\s*"B/g,function(all,name){return"parse"+name.substring(0,1).toUpperCase()+name.substring(1)+'"B'}),s=s.replace(/\bpixels\b\s*(("C(\d+)")|\.length)?(\s*=(?!=)([^,\]\)\}]+))?/g,function(all,indexOrLength,index,atomIndex,equalsPart,rightSide){if(index){var atom=atoms[atomIndex];return equalsPart?"pixels.setPixel"+addAtom("("+atom.substring(1,atom.length-1)+","+rightSide+")","B"):"pixels.getPixel"+addAtom("("+atom.substring(1,atom.length-1)+")","B")}return indexOrLength?"pixels.getLength"+addAtom("()","B"):equalsPart?"pixels.set"+addAtom("("+rightSide+")","B"):"pixels.toArray"+addAtom("()","B")});var repeatJavaReplacement;do repeatJavaReplacement=!1,s=s.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*\.\s*(?:[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*\.\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt|matches)\s*"B(\d+)"/g,replacePrototypeMethods);while(repeatJavaReplacement);do repeatJavaReplacement=!1,s=s.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*(?:\.\s*[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*)*)instanceof\s+([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)/g,replaceInstanceof);while(repeatJavaReplacement);return s=s.replace(/\bthis(\s*"B\d+")/g,"$$constr$1")}function AstInlineClass(baseInterfaceName,body){this.baseInterfaceName=baseInterfaceName,this.body=body,body.owner=this}function transformInlineClass(class_){var m=new RegExp(/\bnew\s*([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)\s*"B\d+"\s*"A(\d+)"/).exec(class_),oldClassId=currentClassId,newClassId=generateClassId();currentClassId=newClassId;var uniqueClassName=m[1]+"$"+newClassId,inlineClass=new AstInlineClass(uniqueClassName,transformClassBody(atoms[m[2]],uniqueClassName,"","implements "+m[1]));return appendClass(inlineClass,newClassId,oldClassId),currentClassId=oldClassId,inlineClass}function AstFunction(name,params,body){this.name=name,this.params=params,this.body=body}function transformFunction(class_){var m=new RegExp(/\b([A-Za-z_$][\w$]*)\s*"B(\d+)"\s*"A(\d+)"/).exec(class_);return new AstFunction("function"!==m[1]?m[1]:null,transformParams(atoms[m[2]]),transformStatementsBlock(atoms[m[3]]))}function AstInlineObject(members){this.members=members}function transformInlineObject(obj){for(var members=obj.split(","),i=0;i<members.length;++i){var label=members[i].indexOf(":");0>label?members[i]={value:transformExpression(members[i])}:members[i]={label:trim(members[i].substring(0,label)),value:transformExpression(trim(members[i].substring(label+1)))}}return new AstInlineObject(members)}function expandExpression(expr){if("("===expr.charAt(0)||"["===expr.charAt(0))return expr.charAt(0)+expandExpression(expr.substring(1,expr.length-1))+expr.charAt(expr.length-1);if("{"===expr.charAt(0))return/^\{\s*(?:[A-Za-z_$][\w$]*|'\d+')\s*:/.test(expr)?"{"+addAtom(expr.substring(1,expr.length-1),"I")+"}":"["+expandExpression(expr.substring(1,expr.length-1))+"]";var trimmed=trimSpaces(expr),result=preExpressionTransform(trimmed.middle);return result=result.replace(/"[ABC](\d+)"/g,function(all,index){return expandExpression(atoms[index])}),trimmed.untrim(result)}function replaceContextInVars(expr){return expr.replace(/(\.\s*)?((?:\b[A-Za-z_]|\$)[\w$]*)(\s*\.\s*([A-Za-z_$][\w$]*)(\s*\()?)?/g,function(all,memberAccessSign,identifier,suffix,subMember,callSign){if(memberAccessSign)return all;var subject={name:identifier,member:subMember,callSign:!!callSign};return replaceContext(subject)+(suffix===undef?"":suffix)})}function AstExpression(expr,transforms){this.expr=expr,this.transforms=transforms}function AstVarDefinition(name,value,isDefault){this.name=name,this.value=value,this.isDefault=isDefault}function transformVarDefinition(def,defaultTypeValue){var name,value,isDefault,eqIndex=def.indexOf("=");return 0>eqIndex?(name=def,value=defaultTypeValue,isDefault=!0):(name=def.substring(0,eqIndex),value=transformExpression(def.substring(eqIndex+1)),isDefault=!1),new AstVarDefinition(trim(name.replace(/(\s*"C\d+")+/g,"")),value,isDefault)}function getDefaultValueForType(type){return"int"===type||"float"===type?"0":"boolean"===type?"false":"color"===type?"0x00000000":"null"}function AstVar(definitions,varType){this.definitions=definitions,this.varType=varType}function AstStatement(expression){this.expression=expression}function transformStatement(statement){if(fieldTest.test(statement)){for(var attrAndType=attrAndTypeRegex.exec(statement),definitions=statement.substring(attrAndType[0].length).split(","),defaultTypeValue=getDefaultValueForType(attrAndType[2]),i=0;i<definitions.length;++i)definitions[i]=transformVarDefinition(definitions[i],defaultTypeValue);return new AstVar(definitions,attrAndType[2])}return new AstStatement(transformExpression(statement))}function AstForExpression(initStatement,condition,step){this.initStatement=initStatement,this.condition=condition,this.step=step}function AstForInExpression(initStatement,container){this.initStatement=initStatement,this.container=container}function AstForEachExpression(initStatement,container){this.initStatement=initStatement,this.container=container}function transformForExpression(expr){var content;return/\bin\b/.test(expr)?(content=expr.substring(1,expr.length-1).split(/\bin\b/g),new AstForInExpression(transformStatement(trim(content[0])),transformExpression(content[1]))):expr.indexOf(":")>=0&&expr.indexOf(";")<0?(content=expr.substring(1,expr.length-1).split(":"),new AstForEachExpression(transformStatement(trim(content[0])),transformExpression(content[1]))):(content=expr.substring(1,expr.length-1).split(";"),new AstForExpression(transformStatement(trim(content[0])),transformExpression(content[1]),transformExpression(content[2])))}function sortByWeight(array){array.sort(function(a,b){return b.weight-a.weight})}function AstInnerInterface(name,body,isStatic){this.name=name,this.body=body,this.isStatic=isStatic,body.owner=this}function AstInnerClass(name,body,isStatic){this.name=name,this.body=body,this.isStatic=isStatic,body.owner=this}function transformInnerClass(class_){var m=classesRegex.exec(class_);classesRegex.lastIndex=0;var innerClass,isStatic=m[1].indexOf("static")>=0,body=atoms[getAtomIndex(m[6])],oldClassId=currentClassId,newClassId=generateClassId();return currentClassId=newClassId,innerClass="interface"===m[2]?new AstInnerInterface(m[3],transformInterfaceBody(body,m[3],m[4]),isStatic):new AstInnerClass(m[3],transformClassBody(body,m[3],m[4],m[5]),isStatic),appendClass(innerClass,newClassId,oldClassId),currentClassId=oldClassId,innerClass}function AstClassMethod(name,params,body,isStatic){this.name=name,this.params=params,this.body=body,this.isStatic=isStatic}function transformClassMethod(method){var m=methodsRegex.exec(method);methodsRegex.lastIndex=0;var isStatic=m[1].indexOf("static")>=0,body=";"!==m[6]?atoms[getAtomIndex(m[6])]:"{}";return new AstClassMethod(m[3],transformParams(atoms[getAtomIndex(m[4])]),transformStatementsBlock(body),isStatic)}function AstClassField(definitions,fieldType,isStatic){this.definitions=definitions,this.fieldType=fieldType,this.isStatic=isStatic}function transformClassField(statement){for(var attrAndType=attrAndTypeRegex.exec(statement),isStatic=attrAndType[1].indexOf("static")>=0,definitions=statement.substring(attrAndType[0].length).split(/,\s*/g),defaultTypeValue=getDefaultValueForType(attrAndType[2]),i=0;i<definitions.length;++i)definitions[i]=transformVarDefinition(definitions[i],defaultTypeValue);return new AstClassField(definitions,attrAndType[2],isStatic)}function AstConstructor(params,body){this.params=params,this.body=body}function transformConstructor(cstr){var m=new RegExp(/"B(\d+)"\s*"A(\d+)"/).exec(cstr),params=transformParams(atoms[m[1]]);return new AstConstructor(params,transformStatementsBlock(atoms[m[2]]))}function AstInterfaceBody(name,interfacesNames,methodsNames,fields,innerClasses,misc){var i,l;for(this.name=name,this.interfacesNames=interfacesNames,this.methodsNames=methodsNames,this.fields=fields,this.innerClasses=innerClasses,this.misc=misc,i=0,l=fields.length;l>i;++i)fields[i].owner=this}function AstClassBody(name,baseClassName,interfacesNames,functions,methods,fields,cstrs,innerClasses,misc){var i,l;for(this.name=name,this.baseClassName=baseClassName,this.interfacesNames=interfacesNames,this.functions=functions,this.methods=methods,this.fields=fields,this.cstrs=cstrs,this.innerClasses=innerClasses,this.misc=misc,i=0,l=fields.length;l>i;++i)fields[i].owner=this}function AstInterface(name,body){this.name=name,this.body=body,body.owner=this}function AstClass(name,body){this.name=name,this.body=body,body.owner=this}function transformGlobalClass(class_){var m=classesRegex.exec(class_);classesRegex.lastIndex=0;var body=atoms[getAtomIndex(m[6])],oldClassId=currentClassId,newClassId=generateClassId();currentClassId=newClassId;var globalClass;return globalClass="interface"===m[2]?new AstInterface(m[3],transformInterfaceBody(body,m[3],m[4])):new AstClass(m[3],transformClassBody(body,m[3],m[4],m[5])),appendClass(globalClass,newClassId,oldClassId),currentClassId=oldClassId,globalClass}function AstMethod(name,params,body){this.name=name,this.params=params,this.body=body}function transformGlobalMethod(method){var m=methodsRegex.exec(method);methodsRegex.lastIndex=0;return new AstMethod(m[3],transformParams(atoms[getAtomIndex(m[4])]),transformStatementsBlock(atoms[getAtomIndex(m[6])]))}function preStatementsTransform(statements){var s=statements;return s=s.replace(/\b(catch\s*"B\d+"\s*"A\d+")(\s*catch\s*"B\d+"\s*"A\d+")+/g,"$1")}function AstForStatement(argument,misc){this.argument=argument,this.misc=misc}function AstCatchStatement(argument,misc){this.argument=argument,this.misc=misc}function AstPrefixStatement(name,argument,misc){this.name=name,this.argument=argument,this.misc=misc}function AstSwitchCase(expr){this.expr=expr}function AstLabel(label){this.label=label}function getLocalNames(statements){for(var localNames=[],i=0,l=statements.length;l>i;++i){var statement=statements[i];statement instanceof AstVar?localNames=localNames.concat(statement.getNames()):statement instanceof AstForStatement&&statement.argument.initStatement instanceof AstVar?localNames=localNames.concat(statement.argument.initStatement.getNames()):(statement instanceof AstInnerInterface||statement instanceof AstInnerClass||statement instanceof AstInterface||statement instanceof AstClass||statement instanceof AstMethod||statement instanceof AstFunction)&&localNames.push(statement.name)}return appendToLookupTable({},localNames)}function AstStatementsBlock(statements){this.statements=statements}function AstRoot(statements){this.statements=statements}function generateMetadata(ast){function findInScopes(class_,name){for(var found,parts=name.split("."),currentScope=class_.scope;currentScope;){if(currentScope.hasOwnProperty(parts[0])){found=currentScope[parts[0]];break}currentScope=currentScope.scope}found===undef&&(found=globalScope[parts[0]]);for(var i=1,l=parts.length;l>i&&found;++i)found=found.inScope[parts[i]];return found}var id,class_,globalScope={};for(id in declaredClasses)if(declaredClasses.hasOwnProperty(id)){class_=declaredClasses[id];var scopeId=class_.scopeId,name=class_.name;if(scopeId){var scope=declaredClasses[scopeId];class_.scope=scope,scope.inScope===undef&&(scope.inScope={}),scope.inScope[name]=class_}else globalScope[name]=class_}for(id in declaredClasses)if(declaredClasses.hasOwnProperty(id)){class_=declaredClasses[id];var baseClassName=class_.body.baseClassName;if(baseClassName){var parent=findInScopes(class_,baseClassName);parent&&(class_.base=parent,parent.derived||(parent.derived=[]),parent.derived.push(class_))}var i,l,interfacesNames=class_.body.interfacesNames,interfaces=[];if(interfacesNames&&interfacesNames.length>0){for(i=0,l=interfacesNames.length;l>i;++i){var interface_=findInScopes(class_,interfacesNames[i]);interfaces.push(interface_),interface_&&(interface_.derived||(interface_.derived=[]),interface_.derived.push(class_))}interfaces.length>0&&(class_.interfaces=interfaces)}}}function setWeight(ast){function removeDependentAndCheck(targetId,from){var dependsOn=tocheck[targetId];if(!dependsOn)return!1;var i=dependsOn.indexOf(from);return 0>i?!1:(dependsOn.splice(i,1),dependsOn.length>0?!1:(delete tocheck[targetId],!0))}var id,scopeId,class_,queue=[],tocheck={};for(id in declaredClasses)if(declaredClasses.hasOwnProperty(id))if(class_=declaredClasses[id],class_.inScope||class_.derived){var dependsOn=[];if(class_.inScope)for(scopeId in class_.inScope)class_.inScope.hasOwnProperty(scopeId)&&dependsOn.push(class_.inScope[scopeId]);class_.derived&&(dependsOn=dependsOn.concat(class_.derived)),tocheck[id]=dependsOn}else queue.push(id),class_.weight=0;for(;queue.length>0;)if(id=queue.shift(),class_=declaredClasses[id],class_.scopeId&&removeDependentAndCheck(class_.scopeId,class_)&&(queue.push(class_.scopeId),declaredClasses[class_.scopeId].weight=class_.weight+1),class_.base&&removeDependentAndCheck(class_.base.classId,class_)&&(queue.push(class_.base.classId),class_.base.weight=class_.weight+1),class_.interfaces){var i,l;for(i=0,l=class_.interfaces.length;l>i;++i)class_.interfaces[i]&&removeDependentAndCheck(class_.interfaces[i].classId,class_)&&(queue.push(class_.interfaces[i].classId),class_.interfaces[i].weight=class_.weight+1)}}var globalMembers=getGlobalMembers(),codeWoExtraCr=code.replace(/\r\n?|\n\r/g,"\n"),strings=[],codeWoStrings=codeWoExtraCr.replace(/("(?:[^"\\\n]|\\.)*")|('(?:[^'\\\n]|\\.)*')|(([\[\(=|&!\^:?]\s*)(\/(?![*\/])(?:[^\/\\\n]|\\.)*\/[gim]*)\b)|(\/\/[^\n]*\n)|(\/\*(?:(?!\*\/)(?:.|\n))*\*\/)/g,function(all,quoted,aposed,regexCtx,prefix,regex,singleComment,comment){var index;return quoted||aposed?(index=strings.length,strings.push(all),"'"+index+"'"):regexCtx?(index=strings.length,strings.push(regex),prefix+"'"+index+"'"):""!==comment?" ":"\n"});codeWoStrings=codeWoStrings.replace(/__x([0-9A-F]{4})/g,function(all,hexCode){return"__x005F_x"+hexCode}),codeWoStrings=codeWoStrings.replace(/\$/g,"__x0024");var genericsWereRemoved,codeWoGenerics=codeWoStrings,replaceFunc=function(all,before,types,after){return before||after?all:(genericsWereRemoved=!0,"")};do genericsWereRemoved=!1,codeWoGenerics=codeWoGenerics.replace(/([<]?)<\s*((?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?(?:\s*,\s*(?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?)*)\s*>([=]?)/g,replaceFunc);while(genericsWereRemoved);var replaceContext,currentClassId,transformClassBody,transformInterfaceBody,transformStatementsBlock,transformStatements,transformMain,transformExpression,atoms=splitToAtoms(codeWoGenerics),declaredClasses={},classIdSeed=0,classesRegex=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)(class|interface)\s+([A-Za-z_$][\w$]*\b)(\s+extends\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?(\s+implements\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?\s*("A\d+")/g,methodsRegex=/\b((?:(?:public|private|final|protected|static|abstract|synchronized)\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+"|;)/g,fieldTest=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:else|new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*(?:"C\d+"\s*)*([=,]|$)/,cstrsRegex=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+")/g,attrAndTypeRegex=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*/,functionsRegex=/\bfunction(?:\s+([A-Za-z_$][\w$]*))?\s*("B\d+")\s*("A\d+")/g;AstParam.prototype.toString=function(){return this.name},AstParams.prototype.getNames=function(){for(var names=[],i=0,l=this.params.length;l>i;++i)names.push(this.params[i].name);return names},AstParams.prototype.prependMethodArgs=function(body){return this.methodArgsParam?"{\nvar "+this.methodArgsParam.name+" = Array.prototype.slice.call(arguments, "+this.params.length+");\n"+body.substring(1):body},AstParams.prototype.toString=function(){if(0===this.params.length)return"()";for(var result="(",i=0,l=this.params.length;l>i;++i)result+=this.params[i]+", ";return result.substring(0,result.length-2)+")"},AstInlineClass.prototype.toString=function(){return"new ("+this.body+")"},AstFunction.prototype.toString=function(){var oldContext=replaceContext,names=appendToLookupTable({"this":null},this.params.getNames());replaceContext=function(subject){return names.hasOwnProperty(subject.name)?subject.name:oldContext(subject)};var result="function";this.name&&(result+=" "+this.name);var body=this.params.prependMethodArgs(this.body.toString());return result+=this.params+" "+body,replaceContext=oldContext,result},AstInlineObject.prototype.toString=function(){var oldContext=replaceContext;replaceContext=function(subject){return"this"===subject.name?"this":oldContext(subject)};for(var result="",i=0,l=this.members.length;l>i;++i)this.members[i].label&&(result+=this.members[i].label+": "),result+=this.members[i].value.toString()+", ";return replaceContext=oldContext,result.substring(0,result.length-2)},AstExpression.prototype.toString=function(){var transforms=this.transforms,expr=replaceContextInVars(this.expr);return expr.replace(/"!(\d+)"/g,function(all,index){return transforms[index].toString()})},transformExpression=function(expr){var transforms=[],s=expandExpression(expr);return s=s.replace(/"H(\d+)"/g,function(all,index){return transforms.push(transformFunction(atoms[index])),'"!'+(transforms.length-1)+'"'}),s=s.replace(/"F(\d+)"/g,function(all,index){return transforms.push(transformInlineClass(atoms[index])),'"!'+(transforms.length-1)+'"'}),s=s.replace(/"I(\d+)"/g,function(all,index){return transforms.push(transformInlineObject(atoms[index])),'"!'+(transforms.length-1)+'"'}),new AstExpression(s,transforms)},AstVarDefinition.prototype.toString=function(){return this.name+" = "+this.value},AstVar.prototype.getNames=function(){for(var names=[],i=0,l=this.definitions.length;l>i;++i)names.push(this.definitions[i].name);return names},AstVar.prototype.toString=function(){return"var "+this.definitions.join(",")},AstStatement.prototype.toString=function(){return this.expression.toString()},AstForExpression.prototype.toString=function(){return"("+this.initStatement+"; "+this.condition+"; "+this.step+")"},AstForInExpression.prototype.toString=function(){var init=this.initStatement.toString();return init.indexOf("=")>=0&&(init=init.substring(0,init.indexOf("="))),"("+init+" in "+this.container+")"},AstForEachExpression.iteratorId=0,AstForEachExpression.prototype.toString=function(){var init=this.initStatement.toString(),iterator="$it"+AstForEachExpression.iteratorId++,variableName=init.replace(/^\s*var\s*/,"").split("=")[0],initIteratorAndVariable="var "+iterator+" = new $p.ObjectIterator("+this.container+"), "+variableName+" = void(0)",nextIterationCondition=iterator+".hasNext() && (("+variableName+" = "+iterator+".next()) || true)";return"("+initIteratorAndVariable+"; "+nextIterationCondition+";)"},AstInnerInterface.prototype.toString=function(){return""+this.body},AstInnerClass.prototype.toString=function(){return""+this.body},AstClassMethod.prototype.toString=function(){var paramNames=appendToLookupTable({},this.params.getNames()),oldContext=replaceContext;replaceContext=function(subject){return paramNames.hasOwnProperty(subject.name)?subject.name:oldContext(subject)};var body=this.params.prependMethodArgs(this.body.toString()),result="function "+this.methodId+this.params+" "+body+"\n";return replaceContext=oldContext,result},AstClassField.prototype.getNames=function(){for(var names=[],i=0,l=this.definitions.length;l>i;++i)names.push(this.definitions[i].name);return names},AstClassField.prototype.toString=function(){var thisPrefix=replaceContext({name:"[this]"});if(this.isStatic){for(var className=this.owner.name,staticDeclarations=[],i=0,l=this.definitions.length;l>i;++i){var definition=this.definitions[i],name=definition.name,staticName=className+"."+name,declaration="if("+staticName+" === void(0)) {\n "+staticName+" = "+definition.value+"; }\n$p.defineProperty("+thisPrefix+", '"+name+"', { get: function(){return "+staticName+";}, set: function(val){"+staticName+" = val;} });\n";staticDeclarations.push(declaration)}return staticDeclarations.join("")}return thisPrefix+"."+this.definitions.join("; "+thisPrefix+".")},AstConstructor.prototype.toString=function(){var paramNames=appendToLookupTable({},this.params.getNames()),oldContext=replaceContext;replaceContext=function(subject){
return paramNames.hasOwnProperty(subject.name)?subject.name:oldContext(subject)};var prefix="function $constr_"+this.params.params.length+this.params.toString(),body=this.params.prependMethodArgs(this.body.toString());return/\$(superCstr|constr)\b/.test(body)||(body="{\n$superCstr();\n"+body.substring(1)),replaceContext=oldContext,prefix+body+"\n"},AstInterfaceBody.prototype.getMembers=function(classFields,classMethods,classInners){this.owner.base&&this.owner.base.body.getMembers(classFields,classMethods,classInners);var i,j,l,m;for(i=0,l=this.fields.length;l>i;++i){var fieldNames=this.fields[i].getNames();for(j=0,m=fieldNames.length;m>j;++j)classFields[fieldNames[j]]=this.fields[i]}for(i=0,l=this.methodsNames.length;l>i;++i){var methodName=this.methodsNames[i];classMethods[methodName]=!0}for(i=0,l=this.innerClasses.length;l>i;++i){var innerClass=this.innerClasses[i];classInners[innerClass.name]=innerClass}},AstInterfaceBody.prototype.toString=function(){function getScopeLevel(p){for(var i=0;p;)++i,p=p.scope;return i}var className=(getScopeLevel(this.owner),this.name),staticDefinitions="",metadata="",thisClassFields={},thisClassMethods={},thisClassInners={};this.getMembers(thisClassFields,thisClassMethods,thisClassInners);var i,l;if(this.owner.interfaces){var resolvedInterface,resolvedInterfaces=[];for(i=0,l=this.interfacesNames.length;l>i;++i)this.owner.interfaces[i]&&(resolvedInterface=replaceContext({name:this.interfacesNames[i]}),resolvedInterfaces.push(resolvedInterface),staticDefinitions+="$p.extendInterfaceMembers("+className+", "+resolvedInterface+");\n");metadata+=className+".$interfaces = ["+resolvedInterfaces.join(", ")+"];\n"}for(metadata+=className+".$isInterface = true;\n",metadata+=className+".$methods = ['"+this.methodsNames.join("', '")+"'];\n",sortByWeight(this.innerClasses),i=0,l=this.innerClasses.length;l>i;++i){var innerClass=this.innerClasses[i];innerClass.isStatic&&(staticDefinitions+=className+"."+innerClass.name+" = "+innerClass+";\n")}for(i=0,l=this.fields.length;l>i;++i){var field=this.fields[i];field.isStatic&&(staticDefinitions+=className+"."+field.definitions.join(";\n"+className+".")+";\n")}return"(function() {\nfunction "+className+"() { throw 'Unable to create the interface'; }\n"+staticDefinitions+metadata+"return "+className+";\n})()"},transformInterfaceBody=function(body,name,baseInterfaces){var declarations=body.substring(1,body.length-1);declarations=extractClassesAndMethods(declarations),declarations=extractConstructors(declarations,name);var methodsNames=[],classes=[];declarations=declarations.replace(/"([DE])(\d+)"/g,function(all,type,index){return"D"===type?methodsNames.push(index):"E"===type&&classes.push(index),""});var baseInterfaceNames,i,l,fields=declarations.split(/;(?:\s*;)*/g);for(baseInterfaces!==undef&&(baseInterfaceNames=baseInterfaces.replace(/^\s*extends\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)),i=0,l=methodsNames.length;l>i;++i){var method=transformClassMethod(atoms[methodsNames[i]]);methodsNames[i]=method.name}for(i=0,l=fields.length-1;l>i;++i){var field=trimSpaces(fields[i]);fields[i]=transformClassField(field.middle)}var tail=fields.pop();for(i=0,l=classes.length;l>i;++i)classes[i]=transformInnerClass(atoms[classes[i]]);return new AstInterfaceBody(name,baseInterfaceNames,methodsNames,fields,classes,{tail:tail})},AstClassBody.prototype.getMembers=function(classFields,classMethods,classInners){this.owner.base&&this.owner.base.body.getMembers(classFields,classMethods,classInners);var i,j,l,m;for(i=0,l=this.fields.length;l>i;++i){var fieldNames=this.fields[i].getNames();for(j=0,m=fieldNames.length;m>j;++j)classFields[fieldNames[j]]=this.fields[i]}for(i=0,l=this.methods.length;l>i;++i){var method=this.methods[i];classMethods[method.name]=method}for(i=0,l=this.innerClasses.length;l>i;++i){var innerClass=this.innerClasses[i];classInners[innerClass.name]=innerClass}},AstClassBody.prototype.toString=function(){function getScopeLevel(p){for(var i=0;p;)++i,p=p.scope;return i}var scopeLevel=getScopeLevel(this.owner),selfId="$this_"+scopeLevel,className=this.name,result="var "+selfId+" = this;\n",staticDefinitions="",metadata="",thisClassFields={},thisClassMethods={},thisClassInners={};this.getMembers(thisClassFields,thisClassMethods,thisClassInners);var oldContext=replaceContext;replaceContext=function(subject){var name=subject.name;return"this"===name?subject.callSign||!subject.member?selfId+".$self":selfId:thisClassFields.hasOwnProperty(name)?thisClassFields[name].isStatic?className+"."+name:selfId+"."+name:thisClassInners.hasOwnProperty(name)?selfId+"."+name:thisClassMethods.hasOwnProperty(name)?thisClassMethods[name].isStatic?className+"."+name:selfId+".$self."+name:oldContext(subject)};var resolvedBaseClassName;this.baseClassName?(resolvedBaseClassName=oldContext({name:this.baseClassName}),result+="var $super = { $upcast: "+selfId+" };\n",result+="function $superCstr(){"+resolvedBaseClassName+".apply($super,arguments);if(!('$self' in $super)) $p.extendClassChain($super)}\n",metadata+=className+".$base = "+resolvedBaseClassName+";\n"):result+="function $superCstr(){$p.extendClassChain("+selfId+")}\n",this.owner.base&&(staticDefinitions+="$p.extendStaticMembers("+className+", "+resolvedBaseClassName+");\n");var i,l,j,m;if(this.owner.interfaces){var resolvedInterface,resolvedInterfaces=[];for(i=0,l=this.interfacesNames.length;l>i;++i)this.owner.interfaces[i]&&(resolvedInterface=oldContext({name:this.interfacesNames[i]}),resolvedInterfaces.push(resolvedInterface),staticDefinitions+="$p.extendInterfaceMembers("+className+", "+resolvedInterface+");\n");metadata+=className+".$interfaces = ["+resolvedInterfaces.join(", ")+"];\n"}for(this.functions.length>0&&(result+=this.functions.join("\n")+"\n"),sortByWeight(this.innerClasses),i=0,l=this.innerClasses.length;l>i;++i){var innerClass=this.innerClasses[i];innerClass.isStatic?(staticDefinitions+=className+"."+innerClass.name+" = "+innerClass+";\n",result+=selfId+"."+innerClass.name+" = "+className+"."+innerClass.name+";\n"):result+=selfId+"."+innerClass.name+" = "+innerClass+";\n"}for(i=0,l=this.fields.length;l>i;++i){var field=this.fields[i];if(field.isStatic)for(staticDefinitions+=className+"."+field.definitions.join(";\n"+className+".")+";\n",j=0,m=field.definitions.length;m>j;++j){var fieldName=field.definitions[j].name,staticName=className+"."+fieldName;result+="$p.defineProperty("+selfId+", '"+fieldName+"', {get: function(){return "+staticName+"}, set: function(val){"+staticName+" = val}});\n"}else result+=selfId+"."+field.definitions.join(";\n"+selfId+".")+";\n"}var methodOverloads={};for(i=0,l=this.methods.length;l>i;++i){var method=this.methods[i],overload=methodOverloads[method.name],methodId=method.name+"$"+method.params.params.length,hasMethodArgs=!!method.params.methodArgsParam;overload?(++overload,methodId+="_"+overload):overload=1,method.methodId=methodId,methodOverloads[method.name]=overload,method.isStatic?(staticDefinitions+=method,staticDefinitions+="$p.addMethod("+className+", '"+method.name+"', "+methodId+", "+hasMethodArgs+");\n",result+="$p.addMethod("+selfId+", '"+method.name+"', "+methodId+", "+hasMethodArgs+");\n"):(result+=method,result+="$p.addMethod("+selfId+", '"+method.name+"', "+methodId+", "+hasMethodArgs+");\n")}result+=trim(this.misc.tail),this.cstrs.length>0&&(result+=this.cstrs.join("\n")+"\n"),result+="function $constr() {\n";var cstrsIfs=[];for(i=0,l=this.cstrs.length;l>i;++i){var paramsLength=this.cstrs[i].params.params.length,methodArgsPresent=!!this.cstrs[i].params.methodArgsParam;cstrsIfs.push("if(arguments.length "+(methodArgsPresent?">=":"===")+" "+paramsLength+") { $constr_"+paramsLength+".apply("+selfId+", arguments); }")}return cstrsIfs.length>0&&(result+=cstrsIfs.join(" else ")+" else "),result+="$superCstr();\n}\n",result+="$constr.apply(null, arguments);\n",replaceContext=oldContext,"(function() {\nfunction "+className+"() {\n"+result+"}\n"+staticDefinitions+metadata+"return "+className+";\n})()"},transformClassBody=function(body,name,baseName,interfaces){var declarations=body.substring(1,body.length-1);declarations=extractClassesAndMethods(declarations),declarations=extractConstructors(declarations,name);var methods=[],classes=[],cstrs=[],functions=[];declarations=declarations.replace(/"([DEGH])(\d+)"/g,function(all,type,index){return"D"===type?methods.push(index):"E"===type?classes.push(index):"H"===type?functions.push(index):cstrs.push(index),""});var baseClassName,interfacesNames,i,fields=declarations.replace(/^(?:\s*;)+/,"").split(/;(?:\s*;)*/g);for(baseName!==undef&&(baseClassName=baseName.replace(/^\s*extends\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*$/g,"$1")),interfaces!==undef&&(interfacesNames=interfaces.replace(/^\s*implements\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)),i=0;i<functions.length;++i)functions[i]=transformFunction(atoms[functions[i]]);for(i=0;i<methods.length;++i)methods[i]=transformClassMethod(atoms[methods[i]]);for(i=0;i<fields.length-1;++i){var field=trimSpaces(fields[i]);fields[i]=transformClassField(field.middle)}var tail=fields.pop();for(i=0;i<cstrs.length;++i)cstrs[i]=transformConstructor(atoms[cstrs[i]]);for(i=0;i<classes.length;++i)classes[i]=transformInnerClass(atoms[classes[i]]);return new AstClassBody(name,baseClassName,interfacesNames,functions,methods,fields,cstrs,classes,{tail:tail})},AstInterface.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n$p."+this.name+" = "+this.name+";\n"},AstClass.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n$p."+this.name+" = "+this.name+";\n"},AstMethod.prototype.toString=function(){var paramNames=appendToLookupTable({},this.params.getNames()),oldContext=replaceContext;replaceContext=function(subject){return paramNames.hasOwnProperty(subject.name)?subject.name:oldContext(subject)};var body=this.params.prependMethodArgs(this.body.toString()),result="function "+this.name+this.params+" "+body+"\n$p."+this.name+" = "+this.name+";";return replaceContext=oldContext,result},AstForStatement.prototype.toString=function(){return this.misc.prefix+this.argument.toString()},AstCatchStatement.prototype.toString=function(){return this.misc.prefix+this.argument.toString()},AstPrefixStatement.prototype.toString=function(){var result=this.misc.prefix;return this.argument!==undef&&(result+=this.argument.toString()),result},AstSwitchCase.prototype.toString=function(){return"case "+this.expr+":"},AstLabel.prototype.toString=function(){return this.label},transformStatements=function(statements,transformMethod,transformClass){var nextStatement=new RegExp(/\b(catch|for|if|switch|while|with)\s*"B(\d+)"|\b(do|else|finally|return|throw|try|break|continue)\b|("[ADEH](\d+)")|\b(case)\s+([^:]+):|\b([A-Za-z_$][\w$]*\s*:)|(;)/g),res=[];statements=preStatementsTransform(statements);for(var m,space,lastIndex=0;null!==(m=nextStatement.exec(statements));){if(m[1]!==undef){var i=statements.lastIndexOf('"B',nextStatement.lastIndex),statementsPrefix=statements.substring(lastIndex,i);"for"===m[1]?res.push(new AstForStatement(transformForExpression(atoms[m[2]]),{prefix:statementsPrefix})):"catch"===m[1]?res.push(new AstCatchStatement(transformParams(atoms[m[2]]),{prefix:statementsPrefix})):res.push(new AstPrefixStatement(m[1],transformExpression(atoms[m[2]]),{prefix:statementsPrefix}))}else if(m[3]!==undef)res.push(new AstPrefixStatement(m[3],undef,{prefix:statements.substring(lastIndex,nextStatement.lastIndex)}));else if(m[4]!==undef){if(space=statements.substring(lastIndex,nextStatement.lastIndex-m[4].length),0!==trim(space).length)continue;res.push(space);var kind=m[4].charAt(1),atomIndex=m[5];"D"===kind?res.push(transformMethod(atoms[atomIndex])):"E"===kind?res.push(transformClass(atoms[atomIndex])):"H"===kind?res.push(transformFunction(atoms[atomIndex])):res.push(transformStatementsBlock(atoms[atomIndex]))}else if(m[6]!==undef)res.push(new AstSwitchCase(transformExpression(trim(m[7]))));else if(m[8]!==undef){if(space=statements.substring(lastIndex,nextStatement.lastIndex-m[8].length),0!==trim(space).length)continue;res.push(new AstLabel(statements.substring(lastIndex,nextStatement.lastIndex)))}else{var statement=trimSpaces(statements.substring(lastIndex,nextStatement.lastIndex-1));res.push(statement.left),res.push(transformStatement(statement.middle)),res.push(statement.right+";")}lastIndex=nextStatement.lastIndex}var statementsTail=trimSpaces(statements.substring(lastIndex));return res.push(statementsTail.left),""!==statementsTail.middle&&(res.push(transformStatement(statementsTail.middle)),res.push(";"+statementsTail.right)),res},AstStatementsBlock.prototype.toString=function(){var localNames=getLocalNames(this.statements),oldContext=replaceContext;isLookupTableEmpty(localNames)||(replaceContext=function(subject){return localNames.hasOwnProperty(subject.name)?subject.name:oldContext(subject)});var result="{\n"+this.statements.join("")+"\n}";return replaceContext=oldContext,result},transformStatementsBlock=function(block){var content=trimSpaces(block.substring(1,block.length-1));return new AstStatementsBlock(transformStatements(content.middle))},AstRoot.prototype.toString=function(){for(var statement,classes=[],otherStatements=[],i=0,len=this.statements.length;len>i;++i)statement=this.statements[i],statement instanceof AstClass||statement instanceof AstInterface?classes.push(statement):otherStatements.push(statement);sortByWeight(classes);var localNames=getLocalNames(this.statements);replaceContext=function(subject){var name=subject.name;return localNames.hasOwnProperty(name)?name:globalMembers.hasOwnProperty(name)||PConstants.hasOwnProperty(name)||defaultScope.hasOwnProperty(name)?"$p."+name:name};var result="// this code was autogenerated from PJS\n(function($p) {\n"+classes.join("")+"\n"+otherStatements.join("")+"\n})";return replaceContext=null,result},transformMain=function(){var statements=extractClassesAndMethods(atoms[0]);return statements=statements.replace(/\bimport\s+[^;]+;/g,""),new AstRoot(transformStatements(statements,transformGlobalMethod,transformGlobalClass))};var transformed=transformMain();generateMetadata(transformed),setWeight(transformed);var redendered=transformed.toString();return redendered=redendered.replace(/\s*\n(?:[\t ]*\n)+/g,"\n\n"),redendered=redendered.replace(/__x([0-9A-F]{4})/g,function(all,hexCode){return String.fromCharCode(parseInt(hexCode,16))}),injectStrings(redendered,strings)}function preprocessCode(aCode,sketch){var dm=new RegExp(/\/\*\s*@pjs\s+((?:[^\*]|\*+[^\*\/])*)\*\//g).exec(aCode);if(dm&&2===dm.length)for(var jsonItems=[],directives=dm.splice(1,2)[0].replace(/\{([\s\S]*?)\}/g,function(){return function(all,item){return jsonItems.push(item),"{"+(jsonItems.length-1)+"}"}}()).replace("\n","").replace("\r","").split(";"),clean=function(s){return s.replace(/^\s*["']?/,"").replace(/["']?\s*$/,"")},i=0,dl=directives.length;dl>i;i++){var pair=directives[i].split("=");if(pair&&2===pair.length){var key=clean(pair[0]),value=clean(pair[1]),list=[];if("preload"===key){list=value.split(",");for(var j=0,jl=list.length;jl>j;j++){var imageName=clean(list[j]);sketch.imageCache.add(imageName)}}else if("font"===key){list=value.split(",");for(var x=0,xl=list.length;xl>x;x++){var fontName=clean(list[x]),index=/^\{(\d*?)\}$/.exec(fontName);PFont.preloading.add(index?JSON.parse("{"+jsonItems[index[1]]+"}"):fontName)}}else"pauseOnBlur"===key?sketch.options.pauseOnBlur="true"===value:"globalKeyEvents"===key?sketch.options.globalKeyEvents="true"===value:"param-"===key.substring(0,6)?sketch.params[key.substring(6)]=value:sketch.options[key]=value}}return aCode}var nop=function(){},debug=function(){return"console"in window?function(msg){window.console.log("Processing.js: "+msg)}:nop}(),ajax=function(url){var xhr=new XMLHttpRequest;if(xhr.open("GET",url,!1),xhr.overrideMimeType&&xhr.overrideMimeType("text/plain"),xhr.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT"),xhr.send(null),200!==xhr.status&&0!==xhr.status)throw"XMLHttpRequest failed, status code "+xhr.status;return xhr.responseText},isDOMPresent="document"in this&&!("fake"in this.document);if(document.head=document.head||document.getElementsByTagName("head")[0],document.documentMode>=9&&!document.doctype)throw"The doctype directive is missing. The recommended doctype in Internet Explorer is the HTML5 doctype: <!DOCTYPE html>";var Float32Array=setupTypedArray("Float32Array","WebGLFloatArray"),Int32Array=setupTypedArray("Int32Array","WebGLIntArray"),Uint16Array=setupTypedArray("Uint16Array","WebGLUnsignedShortArray"),Uint8Array=setupTypedArray("Uint8Array","WebGLUnsignedByteArray"),PConstants={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:1e-4,MAX_FLOAT:3.4028235e38,MIN_FLOAT:-3.4028235e38,MAX_INT:2147483647,MIN_INT:-2147483648,PI:Math.PI,TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,THIRD_PI:Math.PI/3,QUARTER_PI:Math.PI/4,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,WHITESPACE:" 	\n\r\f",RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1,ADD:2,SUBTRACT:4,LIGHTEST:8,DARKEST:16,DIFFERENCE:32,EXCLUSION:64,MULTIPLY:128,SCREEN:256,OVERLAY:512,HARD_LIGHT:1024,SOFT_LIGHT:2048,DODGE:4096,BURN:8192,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:"butt",ROUND:"round",PROJECT:"square",MITER:"miter",BEVEL:"bevel",AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:32768,PREC_MAXVAL:32767,PREC_ALPHA_SHIFT:9,PREC_RED_SHIFT:1,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8},ObjectIterator=function(obj){if(obj.iterator instanceof Function)return obj.iterator();if(!(obj instanceof Array))throw"Unable to iterate: "+obj;var index=-1;this.hasNext=function(){return++index<obj.length},this.next=function(){return obj[index]}},ArrayList=function(){function Iterator(array){var index=0;this.hasNext=function(){return index<array.length},this.next=function(){return array[index++]},this.remove=function(){array.splice(index,1)}}function ArrayList(a){var array;a instanceof ArrayList?array=a.toArray():(array=[],"number"==typeof a&&(array.length=a>0?a:0)),this.get=function(i){return array[i]},this.contains=function(item){return this.indexOf(item)>-1},this.indexOf=function(item){for(var i=0,len=array.length;len>i;++i)if(virtEquals(item,array[i]))return i;return-1},this.lastIndexOf=function(item){for(var i=array.length-1;i>=0;--i)if(virtEquals(item,array[i]))return i;return-1},this.add=function(){if(1===arguments.length)array.push(arguments[0]);else{if(2!==arguments.length)throw"Please use the proper number of parameters.";var arg0=arguments[0];if("number"!=typeof arg0)throw typeof arg0+" is not a number";if(!(arg0>=0&&arg0<=array.length))throw arg0+" is not a valid index";array.splice(arg0,0,arguments[1])}},this.addAll=function(arg1,arg2){var it;if("number"==typeof arg1){if(0>arg1||arg1>array.length)throw"Index out of bounds for addAll: "+arg1+" greater or equal than "+array.length;for(it=new ObjectIterator(arg2);it.hasNext();)array.splice(arg1++,0,it.next())}else for(it=new ObjectIterator(arg1);it.hasNext();)array.push(it.next())},this.set=function(){if(2!==arguments.length)throw"Please use the proper number of parameters.";var arg0=arguments[0];if("number"!=typeof arg0)throw typeof arg0+" is not a number";if(!(arg0>=0&&arg0<array.length))throw arg0+" is not a valid index.";array.splice(arg0,1,arguments[1])},this.size=function(){return array.length},this.clear=function(){array.length=0},this.remove=function(item){return"number"==typeof item?array.splice(item,1)[0]:(item=this.indexOf(item),item>-1?(array.splice(item,1),!0):!1)},this.removeAll=function(c){var i,x,item,newList=new ArrayList;for(newList.addAll(this),this.clear(),i=0,x=0;i<newList.size();i++)item=newList.get(i),c.contains(item)||this.add(x++,item);return this.size()<newList.size()?!0:!1},this.isEmpty=function(){return!array.length},this.clone=function(){return new ArrayList(this)},this.toArray=function(){return array.slice(0)},this.iterator=function(){return new Iterator(array)}}return ArrayList}(),HashMap=function(){function HashMap(){function getBucketIndex(key){var index=virtHashCode(key)%buckets.length;return 0>index?buckets.length+index:index}function ensureLoad(){if(!(count<=loadFactor*buckets.length)){for(var allEntries=[],i=0;i<buckets.length;++i)buckets[i]!==undef&&(allEntries=allEntries.concat(buckets[i]));var newBucketsLength=2*buckets.length;buckets=[],buckets.length=newBucketsLength;for(var j=0;j<allEntries.length;++j){var index=getBucketIndex(allEntries[j].key),bucket=buckets[index];bucket===undef&&(buckets[index]=bucket=[]),bucket.push(allEntries[j])}}}function Iterator(conversion,removeItem){function findNext(){for(;!endOfBuckets;)if(++itemIndex,bucketIndex>=buckets.length)endOfBuckets=!0;else{if(!(buckets[bucketIndex]===undef||itemIndex>=buckets[bucketIndex].length))return;itemIndex=-1,++bucketIndex}}var currentItem,bucketIndex=0,itemIndex=-1,endOfBuckets=!1;this.hasNext=function(){return!endOfBuckets},this.next=function(){return currentItem=conversion(buckets[bucketIndex][itemIndex]),findNext(),currentItem},this.remove=function(){currentItem!==undef&&(removeItem(currentItem),--itemIndex,findNext())},findNext()}function Set(conversion,isIn,removeItem){this.clear=function(){hashMap.clear()},this.contains=function(o){return isIn(o)},this.containsAll=function(o){for(var it=o.iterator();it.hasNext();)if(!this.contains(it.next()))return!1;return!0},this.isEmpty=function(){return hashMap.isEmpty()},this.iterator=function(){return new Iterator(conversion,removeItem)},this.remove=function(o){return this.contains(o)?(removeItem(o),!0):!1},this.removeAll=function(c){for(var it=c.iterator(),changed=!1;it.hasNext();){var item=it.next();this.contains(item)&&(removeItem(item),changed=!0)}return!0},this.retainAll=function(c){for(var it=this.iterator(),toRemove=[];it.hasNext();){var entry=it.next();c.contains(entry)||toRemove.push(entry)}for(var i=0;i<toRemove.length;++i)removeItem(toRemove[i]);return toRemove.length>0},this.size=function(){return hashMap.size()},this.toArray=function(){for(var result=[],it=this.iterator();it.hasNext();)result.push(it.next());return result}}function Entry(pair){this._isIn=function(map){return map===hashMap&&pair.removed===undef},this.equals=function(o){return virtEquals(pair.key,o.getKey())},this.getKey=function(){return pair.key},this.getValue=function(){return pair.value},this.hashCode=function(o){return virtHashCode(pair.key)},this.setValue=function(value){var old=pair.value;return pair.value=value,old}}if(1===arguments.length&&arguments[0]instanceof HashMap)return arguments[0].clone();var initialCapacity=arguments.length>0?arguments[0]:16,loadFactor=arguments.length>1?arguments[1]:.75,buckets=[];buckets.length=initialCapacity;var count=0,hashMap=this;this.clear=function(){count=0,buckets=[],buckets.length=initialCapacity},this.clone=function(){var map=new HashMap;return map.putAll(this),map},this.containsKey=function(key){var index=getBucketIndex(key),bucket=buckets[index];if(bucket===undef)return!1;for(var i=0;i<bucket.length;++i)if(virtEquals(bucket[i].key,key))return!0;return!1},this.containsValue=function(value){for(var i=0;i<buckets.length;++i){var bucket=buckets[i];if(bucket!==undef)for(var j=0;j<bucket.length;++j)if(virtEquals(bucket[j].value,value))return!0}return!1},this.entrySet=function(){return new Set(function(pair){return new Entry(pair)},function(pair){return pair instanceof Entry&&pair._isIn(hashMap)},function(pair){return hashMap.remove(pair.getKey())})},this.get=function(key){var index=getBucketIndex(key),bucket=buckets[index];if(bucket===undef)return null;for(var i=0;i<bucket.length;++i)if(virtEquals(bucket[i].key,key))return bucket[i].value;return null},this.isEmpty=function(){return 0===count},this.keySet=function(){return new Set(function(pair){return pair.key},function(key){return hashMap.containsKey(key)},function(key){return hashMap.remove(key)})},this.values=function(){return new Set(function(pair){return pair.value},function(value){return hashMap.containsValue(value)},function(value){return hashMap.removeByValue(value)})},this.put=function(key,value){var index=getBucketIndex(key),bucket=buckets[index];if(bucket===undef)return++count,buckets[index]=[{key:key,value:value}],ensureLoad(),null;for(var i=0;i<bucket.length;++i)if(virtEquals(bucket[i].key,key)){var previous=bucket[i].value;return bucket[i].value=value,previous}return++count,bucket.push({key:key,value:value}),ensureLoad(),null},this.putAll=function(m){for(var it=m.entrySet().iterator();it.hasNext();){var entry=it.next();this.put(entry.getKey(),entry.getValue())}},this.remove=function(key){var index=getBucketIndex(key),bucket=buckets[index];if(bucket===undef)return null;for(var i=0;i<bucket.length;++i)if(virtEquals(bucket[i].key,key)){--count;var previous=bucket[i].value;return bucket[i].removed=!0,bucket.length>1?bucket.splice(i,1):buckets[index]=undef,previous}return null},this.removeByValue=function(value){var bucket,i,ilen,pair;for(bucket in buckets)if(buckets.hasOwnProperty(bucket))for(i=0,ilen=buckets[bucket].length;ilen>i;i++)if(pair=buckets[bucket][i],pair.value===value)return buckets[bucket].splice(i,1),!0;return!1},this.size=function(){return count}}return HashMap}(),PVector=function(){function PVector(x,y,z){this.x=x||0,this.y=y||0,this.z=z||0}function createPVectorMethod(method){return function(v1,v2){var v=v1.get();return v[method](v2),v}}PVector.dist=function(v1,v2){return v1.dist(v2)},PVector.dot=function(v1,v2){return v1.dot(v2)},PVector.cross=function(v1,v2){return v1.cross(v2)},PVector.angleBetween=function(v1,v2){return Math.acos(v1.dot(v2)/(v1.mag()*v2.mag()))},PVector.prototype={set:function(v,y,z){1===arguments.length?this.set(v.x||v[0]||0,v.y||v[1]||0,v.z||v[2]||0):(this.x=v,this.y=y,this.z=z)},get:function(){return new PVector(this.x,this.y,this.z)},mag:function(){var x=this.x,y=this.y,z=this.z;return Math.sqrt(x*x+y*y+z*z)},add:function(v,y,z){1===arguments.length?(this.x+=v.x,this.y+=v.y,this.z+=v.z):(this.x+=v,this.y+=y,this.z+=z)},sub:function(v,y,z){1===arguments.length?(this.x-=v.x,this.y-=v.y,this.z-=v.z):(this.x-=v,this.y-=y,this.z-=z)},mult:function(v){"number"==typeof v?(this.x*=v,this.y*=v,this.z*=v):(this.x*=v.x,this.y*=v.y,this.z*=v.z)},div:function(v){"number"==typeof v?(this.x/=v,this.y/=v,this.z/=v):(this.x/=v.x,this.y/=v.y,this.z/=v.z)},dist:function(v){var dx=this.x-v.x,dy=this.y-v.y,dz=this.z-v.z;return Math.sqrt(dx*dx+dy*dy+dz*dz)},dot:function(v,y,z){return 1===arguments.length?this.x*v.x+this.y*v.y+this.z*v.z:this.x*v+this.y*y+this.z*z},cross:function(v){var x=this.x,y=this.y,z=this.z;return new PVector(y*v.z-v.y*z,z*v.x-v.z*x,x*v.y-v.x*y)},normalize:function(){var m=this.mag();m>0&&this.div(m)},limit:function(high){this.mag()>high&&(this.normalize(),this.mult(high))},heading2D:function(){return-Math.atan2(-this.y,this.x)},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}};for(var method in PVector.prototype)PVector.prototype.hasOwnProperty(method)&&!PVector.hasOwnProperty(method)&&(PVector[method]=createPVectorMethod(method));return PVector}();DefaultScope.prototype=PConstants;var defaultScope=new DefaultScope;defaultScope.ArrayList=ArrayList,defaultScope.HashMap=HashMap,defaultScope.PVector=PVector,defaultScope.ObjectIterator=ObjectIterator,defaultScope.PConstants=PConstants,defaultScope.defineProperty=function(obj,name,desc){"defineProperty"in Object?Object.defineProperty(obj,name,desc):(desc.hasOwnProperty("get")&&obj.__defineGetter__(name,desc.get),desc.hasOwnProperty("set")&&obj.__defineSetter__(name,desc.set))},defaultScope.extendClassChain=function(base){for(var path=[base],self=base.$upcast;self;self=self.$upcast)extendClass(self,base),path.push(self),base=self;for(;path.length>0;)path.pop().$self=base},defaultScope.extendStaticMembers=function(derived,base){extendClass(derived,base)},defaultScope.extendInterfaceMembers=function(derived,base){extendClass(derived,base)},defaultScope.addMethod=function(object,name,fn,hasMethodArgs){var existingfn=object[name];if(existingfn||hasMethodArgs){var args=fn.length;if("$overloads"in existingfn)existingfn.$overloads[args]=fn;else{var hubfn=function(){var fn=hubfn.$overloads[arguments.length]||("$methodArgsIndex"in hubfn&&arguments.length>hubfn.$methodArgsIndex?hubfn.$overloads[hubfn.$methodArgsIndex]:null)||hubfn.$defaultOverload;return fn.apply(this,arguments)},overloads=[];existingfn&&(overloads[existingfn.length]=existingfn),overloads[args]=fn,hubfn.$overloads=overloads,hubfn.$defaultOverload=existingfn||fn,hasMethodArgs&&(hubfn.$methodArgsIndex=args),hubfn.name=name,object[name]=hubfn}}else object[name]=fn},defaultScope.createJavaArray=function(type,bounds){var result=null,defaultValue=null;if("string"==typeof type&&("boolean"===type?defaultValue=!1:isNumericalJavaType(type)&&(defaultValue=0)),"number"==typeof bounds[0]){var itemsCount=0|bounds[0];if(bounds.length<=1){result=[],result.length=itemsCount;for(var i=0;itemsCount>i;++i)result[i]=defaultValue}else{result=[];for(var newBounds=bounds.slice(1),j=0;itemsCount>j;++j)result.push(defaultScope.createJavaArray(type,newBounds))}}return result};var colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",
khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};!function(Processing){function createUnsupportedFunc(n){return function(){throw"Processing.js does not support "+n+"."}}for(var prettyName,p5Name,unsupportedP5="open() createOutput() createInput() BufferedReader selectFolder() dataPath() createWriter() selectOutput() beginRecord() saveStream() endRecord() selectInput() saveBytes() createReader() beginRaw() endRaw() PrintWriter delay()".split(" "),count=unsupportedP5.length;count--;)prettyName=unsupportedP5[count],p5Name=prettyName.replace("()",""),Processing[p5Name]=createUnsupportedFunc(prettyName)}(defaultScope),defaultScope.defineProperty(defaultScope,"screenWidth",{get:function(){return window.innerWidth}}),defaultScope.defineProperty(defaultScope,"screenHeight",{get:function(){return window.innerHeight}}),defaultScope.defineProperty(defaultScope,"online",{get:function(){return!0}});var processingInstances=[],processingInstanceIds={},removeInstance=function(id){processingInstances.splice(processingInstanceIds[id],1),delete processingInstanceIds[id]},addInstance=function(processing){processing.externals.canvas.id!==undef&&processing.externals.canvas.id.length||(processing.externals.canvas.id="__processing"+processingInstances.length),processingInstanceIds[processing.externals.canvas.id]=processingInstances.length,processingInstances.push(processing)};PFont.prototype.caching=!0,PFont.prototype.getCSSDefinition=function(fontSize,lineHeight){fontSize===undef&&(fontSize=this.size+"px"),lineHeight===undef&&(lineHeight=this.leading+"px");var components=[this.style,"normal",this.weight,fontSize+"/"+lineHeight,this.family];return components.join(" ")},PFont.prototype.measureTextWidth=function(string){return this.context2d.measureText(string).width},PFont.prototype.measureTextWidthFallback=function(string){var canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");return ctx.font=this.css,ctx.measureText(string).width},PFont.PFontCache={length:0},PFont.get=function(fontName,fontSize){fontSize=(10*fontSize+.5|0)/10;var cache=PFont.PFontCache,idx=fontName+"/"+fontSize;if(!cache[idx]){if(cache[idx]=new PFont(fontName,fontSize),cache.length++,50===cache.length){PFont.prototype.measureTextWidth=PFont.prototype.measureTextWidthFallback,PFont.prototype.caching=!1;var entry;for(entry in cache)"length"!==entry&&(cache[entry].context2d=null);return new PFont(fontName,fontSize)}if(400===cache.length)return PFont.PFontCache={},PFont.get=PFont.getFallback,new PFont(fontName,fontSize)}return cache[idx]},PFont.getFallback=function(fontName,fontSize){return new PFont(fontName,fontSize)},PFont.list=function(){return["sans-serif","serif","monospace","fantasy","cursive"]},PFont.preloading={template:{},initialized:!1,initialize:function(){var generateTinyFont=function(){var encoded="#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3#yld0xg32QAB77#E777773B#E3C#I#Q77773E#Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#",expand=function(input){return"AAAAAAAA".substr(~~input?7-input:6)};return encoded.replace(/[#237]/g,expand)},fontface=document.createElement("style");fontface.setAttribute("type","text/css"),fontface.innerHTML='@font-face {\n  font-family: "PjsEmptyFont";\n  src: url(\'data:application/x-font-ttf;base64,'+generateTinyFont()+"')\n       format('truetype');\n}",document.head.appendChild(fontface);var element=document.createElement("span");element.style.cssText='position: absolute; top: 0; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy;',element.innerHTML="AAAAAAAA",document.body.appendChild(element),this.template=element,this.initialized=!0},getElementWidth:function(element){return document.defaultView.getComputedStyle(element,"").getPropertyValue("width")},timeAttempted:0,pending:function(intervallength){this.initialized||this.initialize();for(var element,computedWidthFont,computedWidthRef=this.getElementWidth(this.template),i=0;i<this.fontList.length;i++){if(element=this.fontList[i],computedWidthFont=this.getElementWidth(element),this.timeAttempted<4e3&&computedWidthFont===computedWidthRef)return this.timeAttempted+=intervallength,!0;document.body.removeChild(element),this.fontList.splice(i--,1),this.timeAttempted=0}return 0===this.fontList.length?!1:!0},fontList:[],addedList:{},add:function(fontSrc){this.initialized||this.initialize();var fontName="object"==typeof fontSrc?fontSrc.fontFace:fontSrc,fontUrl="object"==typeof fontSrc?fontSrc.url:fontSrc;if(!this.addedList[fontName]){var style=document.createElement("style");style.setAttribute("type","text/css"),style.innerHTML="@font-face{\n  font-family: '"+fontName+"';\n  src:  url('"+fontUrl+"');\n}\n",document.head.appendChild(style),this.addedList[fontName]=!0;var element=document.createElement("span");element.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;",element.style.fontFamily='"'+fontName+'", "PjsEmptyFont", fantasy',element.innerHTML="AAAAAAAA",document.body.appendChild(element),this.fontList.push(element)}}},defaultScope.PFont=PFont;var Processing=this.Processing=function(aCanvas,aCode){function unimplemented(s){Processing.debug("Unimplemented - "+s)}function uniformf(cacheId,programObj,varName,varValue){var varLocation=curContextCache.locations[cacheId];varLocation===undef&&(varLocation=curContext.getUniformLocation(programObj,varName),curContextCache.locations[cacheId]=varLocation),null!==varLocation&&(4===varValue.length?curContext.uniform4fv(varLocation,varValue):3===varValue.length?curContext.uniform3fv(varLocation,varValue):2===varValue.length?curContext.uniform2fv(varLocation,varValue):curContext.uniform1f(varLocation,varValue))}function uniformi(cacheId,programObj,varName,varValue){var varLocation=curContextCache.locations[cacheId];varLocation===undef&&(varLocation=curContext.getUniformLocation(programObj,varName),curContextCache.locations[cacheId]=varLocation),null!==varLocation&&(4===varValue.length?curContext.uniform4iv(varLocation,varValue):3===varValue.length?curContext.uniform3iv(varLocation,varValue):2===varValue.length?curContext.uniform2iv(varLocation,varValue):curContext.uniform1i(varLocation,varValue))}function uniformMatrix(cacheId,programObj,varName,transpose,matrix){var varLocation=curContextCache.locations[cacheId];varLocation===undef&&(varLocation=curContext.getUniformLocation(programObj,varName),curContextCache.locations[cacheId]=varLocation),-1!==varLocation&&(16===matrix.length?curContext.uniformMatrix4fv(varLocation,transpose,matrix):9===matrix.length?curContext.uniformMatrix3fv(varLocation,transpose,matrix):curContext.uniformMatrix2fv(varLocation,transpose,matrix))}function vertexAttribPointer(cacheId,programObj,varName,size,VBO){var varLocation=curContextCache.attributes[cacheId];varLocation===undef&&(varLocation=curContext.getAttribLocation(programObj,varName),curContextCache.attributes[cacheId]=varLocation),-1!==varLocation&&(curContext.bindBuffer(curContext.ARRAY_BUFFER,VBO),curContext.vertexAttribPointer(varLocation,size,curContext.FLOAT,!1,0,0),curContext.enableVertexAttribArray(varLocation))}function disableVertexAttribPointer(cacheId,programObj,varName){var varLocation=curContextCache.attributes[cacheId];varLocation===undef&&(varLocation=curContext.getAttribLocation(programObj,varName),curContextCache.attributes[cacheId]=varLocation),-1!==varLocation&&curContext.disableVertexAttribArray(varLocation)}function color$4(aValue1,aValue2,aValue3,aValue4){var r,g,b,a;if(3===curColorMode){var rgb=p.color.toRGB(aValue1,aValue2,aValue3);r=rgb[0],g=rgb[1],b=rgb[2]}else r=Math.round(255*(aValue1/colorModeX)),g=Math.round(255*(aValue2/colorModeY)),b=Math.round(255*(aValue3/colorModeZ));return a=Math.round(255*(aValue4/colorModeA)),r=0>r?0:r,g=0>g?0:g,b=0>b?0:b,a=0>a?0:a,r=r>255?255:r,g=g>255?255:g,b=b>255?255:b,a=a>255?255:a,a<<24&4278190080|r<<16&16711680|g<<8&65280|255&b}function color$2(aValue1,aValue2){var a;return 4278190080&aValue1?(a=Math.round(255*(aValue2/colorModeA)),a=a>255?255:a,a=0>a?0:a,aValue1-(4278190080&aValue1)+(a<<24&4278190080)):1===curColorMode?color$4(aValue1,aValue1,aValue1,aValue2):3===curColorMode?color$4(0,0,aValue1/colorModeX*colorModeZ,aValue2):void 0}function color$1(aValue1){if(colorModeX>=aValue1&&aValue1>=0){if(1===curColorMode)return color$4(aValue1,aValue1,aValue1,colorModeA);if(3===curColorMode)return color$4(0,0,aValue1/colorModeX*colorModeZ,colorModeA)}return aValue1?(aValue1>2147483647&&(aValue1-=4294967296),aValue1):void 0}function colorToHSB(colorInt){var red,green,blue;red=(colorInt>>16&255)/255,green=(colorInt>>8&255)/255,blue=(255&colorInt)/255;var hue,saturation,max=p.max(p.max(red,green),blue),min=p.min(p.min(red,green),blue);return min===max?[0,0,max*colorModeZ]:(saturation=(max-min)/max,hue=red===max?(green-blue)/(max-min):green===max?2+(blue-red)/(max-min):4+(red-green)/(max-min),hue/=6,0>hue?hue+=1:hue>1&&(hue-=1),[hue*colorModeX,saturation*colorModeY,max*colorModeZ])}function saveContext(){curContext.save()}function restoreContext(){curContext.restore(),isStrokeDirty=!0,isFillDirty=!0}function redrawHelper(){var sec=(Date.now()-timeSinceLastFPS)/1e3;framesSinceLastFPS++;var fps=framesSinceLastFPS/sec;sec>.5&&(timeSinceLastFPS=Date.now(),framesSinceLastFPS=0,p.__frameRate=fps),p.frameCount++}function attachEventHandler(elem,type,fn){elem.addEventListener?elem.addEventListener(type,fn,!1):elem.attachEvent("on"+type,fn),eventHandlers.push({elem:elem,type:type,fn:fn})}function detachEventHandler(eventHandler){var elem=eventHandler.elem,type=eventHandler.type,fn=eventHandler.fn;elem.removeEventListener?elem.removeEventListener(type,fn,!1):elem.detachEvent&&elem.detachEvent("on"+type,fn)}function nfCoreScalar(value,plus,minus,leftDigits,rightDigits,group){var sign=0>value?minus:plus,autoDetectDecimals=0===rightDigits,rightDigitsOfDefault=rightDigits===undef||0>rightDigits?0:rightDigits,absValue=Math.abs(value);if(autoDetectDecimals)for(rightDigitsOfDefault=1,absValue*=10;Math.abs(Math.round(absValue)-absValue)>1e-6&&7>rightDigitsOfDefault;)++rightDigitsOfDefault,absValue*=10;else 0!==rightDigitsOfDefault&&(absValue*=Math.pow(10,rightDigitsOfDefault));var number,doubled=2*absValue;if(Math.floor(absValue)===absValue)number=absValue;else if(Math.floor(doubled)===doubled){var floored=Math.floor(absValue);number=floored+floored%2}else number=Math.round(absValue);for(var buffer="",totalDigits=leftDigits+rightDigitsOfDefault;totalDigits>0||number>0;)totalDigits--,buffer=""+number%10+buffer,number=Math.floor(number/10);if(group!==undef)for(var i=buffer.length-3-rightDigitsOfDefault;i>0;)buffer=buffer.substring(0,i)+group+buffer.substring(i),i-=3;return rightDigitsOfDefault>0?sign+buffer.substring(0,buffer.length-rightDigitsOfDefault)+"."+buffer.substring(buffer.length-rightDigitsOfDefault,buffer.length):sign+buffer}function nfCore(value,plus,minus,leftDigits,rightDigits,group){if(value instanceof Array){for(var arr=[],i=0,len=value.length;len>i;i++)arr.push(nfCoreScalar(value[i],plus,minus,leftDigits,rightDigits,group));return arr}return nfCoreScalar(value,plus,minus,leftDigits,rightDigits,group)}function unhexScalar(hex){var value=parseInt("0x"+hex,16);return value>2147483647&&(value-=4294967296),value}function removeFirstArgument(args){return Array.prototype.slice.call(args,1)}function booleanScalar(val){return"number"==typeof val?0!==val:"boolean"==typeof val?val:"string"==typeof val?"true"===val.toLowerCase():val instanceof Char?49===val.code||84===val.code||116===val.code:void 0}function floatScalar(val){return"number"==typeof val?val:"boolean"==typeof val?val?1:0:"string"==typeof val?parseFloat(val):val instanceof Char?val.code:void 0}function intScalar(val,radix){if("number"==typeof val)return 4294967295&val;if("boolean"==typeof val)return val?1:0;if("string"==typeof val){var number=parseInt(val,radix||10);return 4294967295&number}return val instanceof Char?val.code:void 0}function Marsaglia(i1,i2){var z=i1||362436069,w=i2||521288629,nextInt=function(){return z=36969*(65535&z)+(z>>>16)&4294967295,w=18e3*(65535&w)+(w>>>16)&4294967295,4294967295&((65535&z)<<16|65535&w)};this.nextDouble=function(){var i=nextInt()/4294967296;return 0>i?1+i:i},this.nextInt=nextInt}function PerlinNoise(seed){function grad3d(i,x,y,z){var h=15&i,u=8>h?x:y,v=4>h?y:12===h||14===h?x:z;return(0===(1&h)?u:-u)+(0===(2&h)?v:-v)}function grad2d(i,x,y){var v=0===(1&i)?x:y;return 0===(2&i)?-v:v}function grad1d(i,x){return 0===(1&i)?-x:x}function lerp(t,a,b){return a+t*(b-a)}var i,j,rnd=seed!==undef?new Marsaglia(seed):Marsaglia.createRandomized(),perm=new Uint8Array(512);for(i=0;256>i;++i)perm[i]=i;for(i=0;256>i;++i){var t=perm[j=255&rnd.nextInt()];perm[j]=perm[i],perm[i]=t}for(i=0;256>i;++i)perm[i+256]=perm[i];this.noise3d=function(x,y,z){var X=255&Math.floor(x),Y=255&Math.floor(y),Z=255&Math.floor(z);x-=Math.floor(x),y-=Math.floor(y),z-=Math.floor(z);var fx=(3-2*x)*x*x,fy=(3-2*y)*y*y,fz=(3-2*z)*z*z,p0=perm[X]+Y,p00=perm[p0]+Z,p01=perm[p0+1]+Z,p1=perm[X+1]+Y,p10=perm[p1]+Z,p11=perm[p1+1]+Z;return lerp(fz,lerp(fy,lerp(fx,grad3d(perm[p00],x,y,z),grad3d(perm[p10],x-1,y,z)),lerp(fx,grad3d(perm[p01],x,y-1,z),grad3d(perm[p11],x-1,y-1,z))),lerp(fy,lerp(fx,grad3d(perm[p00+1],x,y,z-1),grad3d(perm[p10+1],x-1,y,z-1)),lerp(fx,grad3d(perm[p01+1],x,y-1,z-1),grad3d(perm[p11+1],x-1,y-1,z-1))))},this.noise2d=function(x,y){var X=255&Math.floor(x),Y=255&Math.floor(y);x-=Math.floor(x),y-=Math.floor(y);var fx=(3-2*x)*x*x,fy=(3-2*y)*y*y,p0=perm[X]+Y,p1=perm[X+1]+Y;return lerp(fy,lerp(fx,grad2d(perm[p0],x,y),grad2d(perm[p1],x-1,y)),lerp(fx,grad2d(perm[p0+1],x,y-1),grad2d(perm[p1+1],x-1,y-1)))},this.noise1d=function(x){var X=255&Math.floor(x);x-=Math.floor(x);var fx=(3-2*x)*x*x;return lerp(fx,grad1d(perm[X],x),grad1d(perm[X+1],x-1))}}function executeContextFill(){doFill&&(isFillDirty&&(curContext.fillStyle=p.color.toString(currentFillColor),isFillDirty=!1),curContext.fill())}function executeContextStroke(){doStroke&&(isStrokeDirty&&(curContext.strokeStyle=p.color.toString(currentStrokeColor),isStrokeDirty=!1),curContext.stroke())}function fillStrokeClose(){executeContextFill(),executeContextStroke(),curContext.closePath()}function getCanvasData(obj,w,h){var canvasData=canvasDataCache.shift();canvasData===undef&&(canvasData={},canvasData.canvas=document.createElement("canvas"),canvasData.context=canvasData.canvas.getContext("2d")),canvasDataCache.push(canvasData);var canvas=canvasData.canvas,context=canvasData.context,width=w||obj.width,height=h||obj.height;return canvas.width=width,canvas.height=height,obj?"data"in obj?context.putImageData(obj,0,0):(context.clearRect(0,0,width,height),context.drawImage(obj,0,0,width,height)):context.clearRect(0,0,width,height),canvasData}function buildPixelsObject(pImage){return{getLength:function(aImg){return function(){if(aImg.isRemote)throw"Image is loaded remotely. Cannot get length.";return aImg.imageData.data.length?aImg.imageData.data.length/4:0}}(pImage),getPixel:function(aImg){return function(i){var offset=4*i,data=aImg.imageData.data;if(aImg.isRemote)throw"Image is loaded remotely. Cannot get pixels.";return(255&data[offset+3])<<24|(255&data[offset])<<16|(255&data[offset+1])<<8|255&data[offset+2]}}(pImage),setPixel:function(aImg){return function(i,c){var offset=4*i,data=aImg.imageData.data;if(aImg.isRemote)throw"Image is loaded remotely. Cannot set pixel.";data[offset+0]=c>>16&255,data[offset+1]=c>>8&255,data[offset+2]=255&c,data[offset+3]=c>>24&255,aImg.__isDirty=!0}}(pImage),toArray:function(aImg){return function(){var arr=[],data=aImg.imageData.data,length=aImg.width*aImg.height;if(aImg.isRemote)throw"Image is loaded remotely. Cannot get pixels.";for(var i=0,offset=0;length>i;i++,offset+=4)arr.push((255&data[offset+3])<<24|(255&data[offset])<<16|(255&data[offset+1])<<8|255&data[offset+2]);return arr}}(pImage),set:function(aImg){return function(arr){var offset,data,c;if(this.isRemote)throw"Image is loaded remotely. Cannot set pixels.";data=aImg.imageData.data;for(var i=0,aL=arr.length;aL>i;i++)c=arr[i],offset=4*i,data[offset+0]=c>>16&255,data[offset+1]=c>>8&255,data[offset+2]=255&c,data[offset+3]=c>>24&255;aImg.__isDirty=!0}}(pImage)}}function get$2(x,y){var data;if(x>=p.width||0>x||0>y||y>=p.height)return 0;if(isContextReplaced){var offset=4*((0|x)+p.width*(0|y));return data=p.imageData.data,(255&data[offset+3])<<24|(255&data[offset])<<16|(255&data[offset+1])<<8|255&data[offset+2]}return data=p.toImageData(0|x,0|y,1,1).data,(255&data[3])<<24|(255&data[0])<<16|(255&data[1])<<8|255&data[2]}function get$3(x,y,img){if(img.isRemote)throw"Image is loaded remotely. Cannot get x,y.";var offset=y*img.width*4+4*x,data=img.imageData.data;return(255&data[offset+3])<<24|(255&data[offset])<<16|(255&data[offset+1])<<8|255&data[offset+2]}function get$4(x,y,w,h){var c=new PImage(w,h,2);return c.fromImageData(p.toImageData(x,y,w,h)),c}function get$5(x,y,w,h,img){if(img.isRemote)throw"Image is loaded remotely. Cannot get x,y,w,h.";for(var c=new PImage(w,h,2),cData=c.imageData.data,imgWidth=img.width,imgHeight=img.height,imgData=img.imageData.data,startRow=Math.max(0,-y),startColumn=Math.max(0,-x),stopRow=Math.min(h,imgHeight-y),stopColumn=Math.min(w,imgWidth-x),i=startRow;stopRow>i;++i)for(var sourceOffset=4*((y+i)*imgWidth+(x+startColumn)),targetOffset=4*(i*w+startColumn),j=startColumn;stopColumn>j;++j)cData[targetOffset++]=imgData[sourceOffset++],cData[targetOffset++]=imgData[sourceOffset++],cData[targetOffset++]=imgData[sourceOffset++],cData[targetOffset++]=imgData[sourceOffset++];return c.__isDirty=!0,c}function resetContext(){isContextReplaced&&(curContext=originalContext,isContextReplaced=!1,p.updatePixels())}function SetPixelContextWrapper(){function wrapFunction(newContext,name){function wrapper(){resetContext(),curContext[name].apply(curContext,arguments)}newContext[name]=wrapper}function wrapProperty(newContext,name){function getter(){return resetContext(),curContext[name]}function setter(value){resetContext(),curContext[name]=value}p.defineProperty(newContext,name,{get:getter,set:setter})}for(var n in curContext)"function"==typeof curContext[n]?wrapFunction(this,n):wrapProperty(this,n)}function replaceContext(){isContextReplaced||(p.loadPixels(),null===proxyContext&&(originalContext=curContext,proxyContext=new SetPixelContextWrapper),isContextReplaced=!0,curContext=proxyContext,setPixelsCached=0)}function set$3(x,y,c){x<p.width&&x>=0&&y>=0&&y<p.height&&(replaceContext(),p.pixels.setPixel((0|x)+p.width*(0|y),c),++setPixelsCached>maxPixelsCached&&resetContext())}function set$4(x,y,obj,img){if(img.isRemote)throw"Image is loaded remotely. Cannot set x,y.";var c=p.color.toArray(obj),offset=y*img.width*4+4*x,data=img.imageData.data;data[offset]=c[0],data[offset+1]=c[1],data[offset+2]=c[2],data[offset+3]=c[3]}function toP5String(obj){return obj instanceof String?obj:"number"==typeof obj?obj===(0|obj)?obj.toString():p.nf(obj,0,3):null===obj||obj===undef?"":obj.toString()}function text$4(str,x,y,z){var lines,linesCount;str.indexOf("\n")<0?(lines=[str],linesCount=1):(lines=str.split(/\r?\n/g),linesCount=lines.length);var yOffset=0;101===verticalTextAlignment?yOffset=curTextAscent+curTextDescent:3===verticalTextAlignment?yOffset=curTextAscent/2-(linesCount-1)*curTextLeading/2:102===verticalTextAlignment&&(yOffset=-(curTextDescent+(linesCount-1)*curTextLeading));for(var i=0;linesCount>i;++i){var line=lines[i];drawing.text$line(line,x,y+yOffset,z,horizontalTextAlignment),yOffset+=curTextLeading}}function text$6(str,x,y,width,height,z){if(0!==str.length&&0!==width&&0!==height&&!(curTextSize>height)){for(var spaceMark=-1,start=0,lineWidth=0,drawCommands=[],charPos=0,len=str.length;len>charPos;charPos++){var currentChar=str[charPos],spaceChar=" "===currentChar,letterWidth=curTextFont.measureTextWidth(currentChar);if("\n"!==currentChar&&width>=lineWidth+letterWidth)spaceChar&&(spaceMark=charPos),lineWidth+=letterWidth;else{if(spaceMark+1===start){if(!(charPos>0))return;spaceMark=charPos}"\n"===currentChar?(drawCommands.push({text:str.substring(start,charPos),width:lineWidth}),start=charPos+1):(drawCommands.push({text:str.substring(start,spaceMark+1),width:lineWidth}),start=spaceMark+1),lineWidth=0,charPos=start-1}}len>start&&drawCommands.push({text:str.substring(start),width:lineWidth});var xOffset=1,yOffset=curTextAscent;3===horizontalTextAlignment?xOffset=width/2:39===horizontalTextAlignment&&(xOffset=width);var linesCount=drawCommands.length,visibleLines=Math.min(linesCount,Math.floor(height/curTextLeading));101===verticalTextAlignment?yOffset=curTextAscent+curTextDescent:3===verticalTextAlignment?yOffset=height/2-curTextLeading*(visibleLines/2-1):102===verticalTextAlignment&&(yOffset=curTextDescent+curTextLeading);var command,drawCommand,leading;for(command=0;linesCount>command&&(leading=command*curTextLeading,!(yOffset+leading>height-curTextDescent));command++)drawCommand=drawCommands[command],drawing.text$line(drawCommand.text,x+xOffset,y+yOffset+leading,z,horizontalTextAlignment)}}function wireDimensionalFunctions(mode){drawing="3D"===mode?new Drawing3D:"2D"===mode?new Drawing2D:new DrawingPre;for(var i in DrawingPre.prototype)DrawingPre.prototype.hasOwnProperty(i)&&i.indexOf("$")<0&&(p[i]=drawing[i]);drawing.$init()}function createDrawingPreFunction(name){return function(){return wireDimensionalFunctions("2D"),drawing[name].apply(this,arguments)}}function calculateOffset(curElement,event){var element=curElement,offsetX=0,offsetY=0;if(p.pmouseX=p.mouseX,p.pmouseY=p.mouseY,element.offsetParent)do offsetX+=element.offsetLeft,offsetY+=element.offsetTop;while(element=element.offsetParent);element=curElement;do offsetX-=element.scrollLeft||0,offsetY-=element.scrollTop||0;while(element=element.parentNode);return offsetX+=stylePaddingLeft,offsetY+=stylePaddingTop,offsetX+=styleBorderLeft,offsetY+=styleBorderTop,offsetX+=window.pageXOffset,offsetY+=window.pageYOffset,{X:offsetX,Y:offsetY}}function updateMousePosition(curElement,event){var offset=calculateOffset(curElement,event);p.mouseX=event.pageX-offset.X,p.mouseY=event.pageY-offset.Y}function addTouchEventOffset(t){var i,offset=calculateOffset(t.changedTouches[0].target,t.changedTouches[0]);for(i=0;i<t.touches.length;i++){var touch=t.touches[i];touch.offsetX=touch.pageX-offset.X,touch.offsetY=touch.pageY-offset.Y}for(i=0;i<t.targetTouches.length;i++){var targetTouch=t.targetTouches[i];targetTouch.offsetX=targetTouch.pageX-offset.X,targetTouch.offsetY=targetTouch.pageY-offset.Y}for(i=0;i<t.changedTouches.length;i++){var changedTouch=t.changedTouches[i];changedTouch.offsetX=changedTouch.pageX-offset.X,changedTouch.offsetY=changedTouch.pageY-offset.Y}return t}function getKeyCode(e){var code=e.which||e.keyCode;switch(code){case 13:return 10;case 91:case 93:case 224:return 157;case 57392:return 17;case 46:return 127;case 45:return 155}return code}function getKeyChar(e){var c=e.which||e.keyCode,anyShiftPressed=e.shiftKey||e.ctrlKey||e.altKey||e.metaKey;switch(c){case 13:c=anyShiftPressed?13:10;break;case 8:c=anyShiftPressed?127:8}return new Char(c)}function suppressKeyEvent(e){return"function"==typeof e.preventDefault?e.preventDefault():"function"==typeof e.stopPropagation&&e.stopPropagation(),!1}function updateKeyPressed(){var ch;for(ch in pressedKeysMap)if(pressedKeysMap.hasOwnProperty(ch))return void(p.__keyPressed=!0);p.__keyPressed=!1}function resetKeyPressed(){p.__keyPressed=!1,pressedKeysMap=[],lastPressedKeyCode=null}function simulateKeyTyped(code,c){pressedKeysMap[code]=c,lastPressedKeyCode=null,p.key=c,p.keyCode=code,p.keyPressed(),p.keyCode=0,p.keyTyped(),updateKeyPressed()}function handleKeydown(e){var code=getKeyCode(e);if(127===code)return void simulateKeyTyped(code,new Char(127));if(codedKeys.indexOf(code)<0)return void(lastPressedKeyCode=code);var c=new Char(65535);return p.key=c,p.keyCode=code,pressedKeysMap[code]=c,p.keyPressed(),lastPressedKeyCode=null,updateKeyPressed(),suppressKeyEvent(e)}function handleKeypress(e){if(null!==lastPressedKeyCode){var code=lastPressedKeyCode,c=getKeyChar(e);return simulateKeyTyped(code,c),suppressKeyEvent(e)}}function handleKeyup(e){var code=getKeyCode(e),c=pressedKeysMap[code];c!==undef&&(p.key=c,p.keyCode=code,p.keyReleased(),delete pressedKeysMap[code],updateKeyPressed())}if(!(this instanceof Processing))throw"called Processing constructor as if it were a function: missing 'new'.";var curElement,pgraphicsMode=aCanvas===undef&&aCode===undef;if(curElement=pgraphicsMode?document.createElement("canvas"):"string"==typeof aCanvas?document.getElementById(aCanvas):aCanvas,!(curElement instanceof HTMLCanvasElement))throw"called Processing constructor without passing canvas element reference or id.";var p=this;p.externals={canvas:curElement,context:undef,sketch:undef},p.name="Processing.js Instance",p.use3DContext=!1,p.focused=!1,p.breakShape=!1,p.glyphTable={},p.pmouseX=0,p.pmouseY=0,p.mouseX=0,p.mouseY=0,p.mouseButton=0,p.mouseScroll=0,p.mouseClicked=undef,p.mouseDragged=undef,p.mouseMoved=undef,p.mousePressed=undef,p.mouseReleased=undef,p.mouseScrolled=undef,p.mouseOver=undef,p.mouseOut=undef,p.touchStart=undef,p.touchEnd=undef,p.touchMove=undef,p.touchCancel=undef,p.key=undef,p.keyCode=undef,p.keyPressed=nop,p.keyReleased=nop,p.keyTyped=nop,p.draw=undef,p.setup=undef,p.__mousePressed=!1,p.__keyPressed=!1,p.__frameRate=60,p.frameCount=0,p.width=100,p.height=100;var curContext,curSketch,drawing,textcanvas,curveBasisMatrix,curveToBezierMatrix,curveDrawMatrix,bezierDrawMatrix,bezierBasisInverse,bezierBasisMatrix,programObject3D,programObject2D,programObjectUnlitShape,boxBuffer,boxNormBuffer,boxOutlineBuffer,rectBuffer,rectNormBuffer,sphereBuffer,lineBuffer,fillBuffer,fillColorBuffer,strokeColorBuffer,pointBuffer,shapeTexVBO,canTex,textTex,textBuffer,textureBuffer,indexBuffer,originalContext,setPixelsCached,stylePaddingLeft,stylePaddingTop,styleBorderLeft,styleBorderTop,doFill=!0,fillStyle=[1,1,1,1],currentFillColor=4294967295,isFillDirty=!0,doStroke=!0,strokeStyle=[0,0,0,1],currentStrokeColor=4278190080,isStrokeDirty=!0,lineWidth=1,loopStarted=!1,renderSmooth=!1,doLoop=!0,looping=0,curRectMode=0,curEllipseMode=3,normalX=0,normalY=0,normalZ=0,normalMode=0,curFrameRate=60,curMsPerFrame=1e3/curFrameRate,curCursor="default",oldCursor=curElement.style.cursor,curShape=20,curvePoints=[],curTightness=0,curveDet=20,curveInited=!1,backgroundObj=-3355444,bezDetail=20,colorModeA=255,colorModeX=255,colorModeY=255,colorModeZ=255,pmouseXLastFrame=0,pmouseYLastFrame=0,curColorMode=1,curTint=null,curTint3d=null,start=Date.now(),timeSinceLastFPS=start,framesSinceLastFPS=0,curContextCache={attributes:{},locations:{}},curTexture={width:0,height:0},curTextureMode=2,usingTexture=!1,horizontalTextAlignment=37,verticalTextAlignment=0,textMode=4,curFontName="Arial",curTextSize=12,curTextAscent=9,curTextDescent=2,curTextLeading=14,curTextFont=PFont.get(curFontName,curTextSize),proxyContext=null,isContextReplaced=!1,maxPixelsCached=1e3,pressedKeysMap=[],lastPressedKeyCode=null,codedKeys=[16,17,18,20,33,34,35,36,37,38,39,40,144,155,112,113,114,115,116,117,118,119,120,121,122,123,157];document.defaultView&&document.defaultView.getComputedStyle&&(stylePaddingLeft=parseInt(document.defaultView.getComputedStyle(curElement,null).paddingLeft,10)||0,stylePaddingTop=parseInt(document.defaultView.getComputedStyle(curElement,null).paddingTop,10)||0,styleBorderLeft=parseInt(document.defaultView.getComputedStyle(curElement,null).borderLeftWidth,10)||0,styleBorderTop=parseInt(document.defaultView.getComputedStyle(curElement,null).borderTopWidth,10)||0);var sphereVerts,cam,cameraInv,modelView,modelViewInv,userMatrixStack,userReverseMatrixStack,inverseCopy,projection,lightCount=0,sphereDetailV=0,sphereDetailU=0,sphereX=[],sphereY=[],sphereZ=[],sinLUT=new Float32Array(720),cosLUT=new Float32Array(720),manipulatingCamera=!1,frustumMode=!1,cameraFOV=60*(Math.PI/180),cameraX=p.width/2,cameraY=p.height/2,cameraZ=cameraY/Math.tan(cameraFOV/2),cameraNear=cameraZ/10,cameraFar=10*cameraZ,cameraAspect=p.width/p.height,vertArray=[],curveVertArray=[],curveVertCount=0,isCurve=!1,isBezier=!1,firstVert=!0,curShapeMode=0,styleArray=[],boxVerts=new Float32Array([.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]),boxOutlineVerts=new Float32Array([.5,.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5]),boxNorms=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),rectVerts=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]),rectNorms=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),vertexShaderSrcUnlitShape="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec4 aColor;uniform mat4 uView;uniform mat4 uProjection;uniform float uPointSize;void main(void) {  vFrontColor = aColor;  gl_PointSize = uPointSize;  gl_Position = uProjection * uView * vec4(aVertex, 1.0);}",fragmentShaderSrcUnlitShape="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;uniform bool uSmooth;void main(void){  if(uSmooth == true){    float dist = distance(gl_PointCoord, vec2(0.5));    if(dist > 0.5){      discard;    }  }  gl_FragColor = vFrontColor;}",vertexShaderSrc2D="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec2 aTextureCoord;uniform vec4 uColor;uniform mat4 uModel;uniform mat4 uView;uniform mat4 uProjection;uniform float uPointSize;varying vec2 vTextureCoord;void main(void) {  gl_PointSize = uPointSize;  vFrontColor = uColor;  gl_Position = uProjection * uView * uModel * vec4(aVertex, 1.0);  vTextureCoord = aTextureCoord;}",fragmentShaderSrc2D="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;varying vec2 vTextureCoord;uniform sampler2D uSampler;uniform int uIsDrawingText;uniform bool uSmooth;void main(void){  if(uSmooth == true){    float dist = distance(gl_PointCoord, vec2(0.5));    if(dist > 0.5){      discard;    }  }  if(uIsDrawingText == 1){    float alpha = texture2D(uSampler, vTextureCoord).a;    gl_FragColor = vec4(vFrontColor.rgb * alpha, alpha);  }  else{    gl_FragColor = vFrontColor;  }}",webglMaxTempsWorkaround=/Windows/.test(navigator.userAgent),vertexShaderSrc3D="varying vec4 vFrontColor;attribute vec3 aVertex;attribute vec3 aNormal;attribute vec4 aColor;attribute vec2 aTexture;varying   vec2 vTexture;uniform vec4 uColor;uniform bool uUsingMat;uniform vec3 uSpecular;uniform vec3 uMaterialEmissive;uniform vec3 uMaterialAmbient;uniform vec3 uMaterialSpecular;uniform float uShininess;uniform mat4 uModel;uniform mat4 uView;uniform mat4 uProjection;uniform mat4 uNormalTransform;uniform int uLightCount;uniform vec3 uFalloff;struct Light {  int type;  vec3 color;  vec3 position;  vec3 direction;  float angle;  vec3 halfVector;  float concentration;};uniform Light uLights0;uniform Light uLights1;uniform Light uLights2;uniform Light uLights3;uniform Light uLights4;uniform Light uLights5;uniform Light uLights6;uniform Light uLights7;Light getLight(int index){  if(index == 0) return uLights0;  if(index == 1) return uLights1;  if(index == 2) return uLights2;  if(index == 3) return uLights3;  if(index == 4) return uLights4;  if(index == 5) return uLights5;  if(index == 6) return uLights6;  return uLights7;}void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {  float d = length( light.position - ecPos );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));  totalAmbient += light.color * attenuation;}void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerFactor = 0.0;  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-normalize(ecPos) )));  if( nDotVP != 0.0 ){    powerFactor = pow( nDotVH, uShininess );  }  col += light.color * nDotVP;  spec += uSpecular * powerFactor;}void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float powerFactor;   vec3 VP = light.position - ecPos;  float d = length( VP );   VP = normalize( VP );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));  float nDotVP = max( 0.0, dot( vertNormal, VP ));  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));  if( nDotVP == 0.0 ) {    powerFactor = 0.0;  }  else {    powerFactor = pow( nDotHV, uShininess );  }  spec += uSpecular * powerFactor * attenuation;  col += light.color * nDotVP * attenuation;}void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {  float spotAttenuation;  float powerFactor = 0.0;  vec3 VP = light.position - ecPos;  vec3 ldir = normalize( -light.direction );  float d = length( VP );  VP = normalize( VP );  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ) );  float spotDot = dot( VP, ldir );"+(webglMaxTempsWorkaround?"  spotAttenuation = 1.0; ":"  if( spotDot > cos( light.angle ) ) {    spotAttenuation = pow( spotDot, light.concentration );  }  else{    spotAttenuation = 0.0;  }  attenuation *= spotAttenuation;")+"  float nDotVP = max( 0.0, dot( vertNormal, VP ) );  vec3 halfVector = normalize( VP - normalize(ecPos) );  float nDotHV = max( 0.0, dot( vertNormal, halfVector ) );  if( nDotVP != 0.0 ) {    powerFactor = pow( nDotHV, uShininess );  }  spec += uSpecular * powerFactor * attenuation;  col += light.color * nDotVP * attenuation;}void main(void) {  vec3 finalAmbient = vec3( 0.0 );  vec3 finalDiffuse = vec3( 0.0 );  vec3 finalSpecular = vec3( 0.0 );  vec4 col = uColor;  if ( uColor[0] == -1.0 ){    col = aColor;  }  vec3 norm = normalize(vec3( uNormalTransform * vec4( aNormal, 0.0 ) ));  vec4 ecPos4 = uView * uModel * vec4(aVertex, 1.0);  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;  if( uLightCount == 0 ) {    vFrontColor = col + vec4(uMaterialSpecular, 1.0);  }  else {    for( int i = 0; i < 8; i++ ) {      Light l = getLight(i);      if( i >= uLightCount ){        break;      }      if( l.type == 0 ) {        AmbientLight( finalAmbient, ecPos, l );      }      else if( l.type == 1 ) {        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else if( l.type == 2 ) {        PointLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }      else {        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, l );      }    }   if( uUsingMat == false ) {     vFrontColor = vec4(       vec3( col ) * finalAmbient +       vec3( col ) * finalDiffuse +       vec3( col ) * finalSpecular,       col[3] );   }   else{     vFrontColor = vec4(        uMaterialEmissive +        (vec3(col) * uMaterialAmbient * finalAmbient ) +        (vec3(col) * finalDiffuse) +        (uMaterialSpecular * finalSpecular),        col[3] );    }  }  vTexture.xy = aTexture.xy;  gl_Position = uProjection * uView * uModel * vec4( aVertex, 1.0 );}",fragmentShaderSrc3D="#ifdef GL_ES\nprecision highp float;\n#endif\nvarying vec4 vFrontColor;uniform sampler2D uSampler;uniform bool uUsingTexture;varying vec2 vTexture;void main(void){  if( uUsingTexture ){    gl_FragColor = vec4(texture2D(uSampler, vTexture.xy)) * vFrontColor;  }  else{    gl_FragColor = vFrontColor;  }}",createProgramObject=function(curContext,vetexShaderSource,fragmentShaderSource){
var vertexShaderObject=curContext.createShader(curContext.VERTEX_SHADER);if(curContext.shaderSource(vertexShaderObject,vetexShaderSource),curContext.compileShader(vertexShaderObject),!curContext.getShaderParameter(vertexShaderObject,curContext.COMPILE_STATUS))throw curContext.getShaderInfoLog(vertexShaderObject);var fragmentShaderObject=curContext.createShader(curContext.FRAGMENT_SHADER);if(curContext.shaderSource(fragmentShaderObject,fragmentShaderSource),curContext.compileShader(fragmentShaderObject),!curContext.getShaderParameter(fragmentShaderObject,curContext.COMPILE_STATUS))throw curContext.getShaderInfoLog(fragmentShaderObject);var programObject=curContext.createProgram();if(curContext.attachShader(programObject,vertexShaderObject),curContext.attachShader(programObject,fragmentShaderObject),curContext.linkProgram(programObject),!curContext.getProgramParameter(programObject,curContext.LINK_STATUS))throw"Error linking shaders.";return programObject},imageModeCorner=function(x,y,w,h,whAreSizes){return{x:x,y:y,w:w,h:h}},imageModeConvert=imageModeCorner,imageModeCorners=function(x,y,w,h,whAreSizes){return{x:x,y:y,w:whAreSizes?w:w-x,h:whAreSizes?h:h-y}},imageModeCenter=function(x,y,w,h,whAreSizes){return{x:x-w/2,y:y-h/2,w:w,h:h}},DrawingShared=function(){},Drawing2D=function(){},Drawing3D=function(){},DrawingPre=function(){};Drawing2D.prototype=new DrawingShared,Drawing2D.prototype.constructor=Drawing2D,Drawing3D.prototype=new DrawingShared,Drawing3D.prototype.constructor=Drawing3D,DrawingPre.prototype=new DrawingShared,DrawingPre.prototype.constructor=DrawingPre,DrawingShared.prototype.a3DOnlyFunction=nop;var charMap={},Char=p.Character=function(chr){return"string"==typeof chr&&1===chr.length?this.code=chr.charCodeAt(0):"number"==typeof chr?this.code=chr:chr instanceof Char?this.code=chr:this.code=NaN,charMap[this.code]===undef?charMap[this.code]=this:charMap[this.code]};Char.prototype.toString=function(){return String.fromCharCode(this.code)},Char.prototype.valueOf=function(){return this.code};var PShape=p.PShape=function(family){this.family=family||0,this.visible=!0,this.style=!0,this.children=[],this.nameTable=[],this.params=[],this.name="",this.image=null,this.matrix=null,this.kind=null,this.close=null,this.width=null,this.height=null,this.parent=null};PShape.prototype={isVisible:function(){return this.visible},setVisible:function(visible){this.visible=visible},disableStyle:function(){this.style=!1;for(var i=0,j=this.children.length;j>i;i++)this.children[i].disableStyle()},enableStyle:function(){this.style=!0;for(var i=0,j=this.children.length;j>i;i++)this.children[i].enableStyle()},getFamily:function(){return this.family},getWidth:function(){return this.width},getHeight:function(){return this.height},setName:function(name){this.name=name},getName:function(){return this.name},draw:function(renderContext){renderContext=renderContext||p,this.visible&&(this.pre(renderContext),this.drawImpl(renderContext),this.post(renderContext))},drawImpl:function(renderContext){0===this.family?this.drawGroup(renderContext):1===this.family?this.drawPrimitive(renderContext):3===this.family?this.drawGeometry(renderContext):21===this.family&&this.drawPath(renderContext)},drawPath:function(renderContext){var i,j;if(0!==this.vertices.length){if(renderContext.beginShape(),0===this.vertexCodes.length)if(2===this.vertices[0].length)for(i=0,j=this.vertices.length;j>i;i++)renderContext.vertex(this.vertices[i][0],this.vertices[i][1]);else for(i=0,j=this.vertices.length;j>i;i++)renderContext.vertex(this.vertices[i][0],this.vertices[i][1],this.vertices[i][2]);else{var index=0;if(2===this.vertices[0].length)for(i=0,j=this.vertexCodes.length;j>i;i++)0===this.vertexCodes[i]?(renderContext.vertex(this.vertices[index][0],this.vertices[index][1],this.vertices[index].moveTo),renderContext.breakShape=!1,index++):1===this.vertexCodes[i]?(renderContext.bezierVertex(this.vertices[index+0][0],this.vertices[index+0][1],this.vertices[index+1][0],this.vertices[index+1][1],this.vertices[index+2][0],this.vertices[index+2][1]),index+=3):2===this.vertexCodes[i]?(renderContext.curveVertex(this.vertices[index][0],this.vertices[index][1]),index++):3===this.vertexCodes[i]&&(renderContext.breakShape=!0);else for(i=0,j=this.vertexCodes.length;j>i;i++)0===this.vertexCodes[i]?(renderContext.vertex(this.vertices[index][0],this.vertices[index][1],this.vertices[index][2]),this.vertices[index].moveTo===!0?vertArray[vertArray.length-1].moveTo=!0:this.vertices[index].moveTo===!1&&(vertArray[vertArray.length-1].moveTo=!1),renderContext.breakShape=!1):1===this.vertexCodes[i]?(renderContext.bezierVertex(this.vertices[index+0][0],this.vertices[index+0][1],this.vertices[index+0][2],this.vertices[index+1][0],this.vertices[index+1][1],this.vertices[index+1][2],this.vertices[index+2][0],this.vertices[index+2][1],this.vertices[index+2][2]),index+=3):2===this.vertexCodes[i]?(renderContext.curveVertex(this.vertices[index][0],this.vertices[index][1],this.vertices[index][2]),index++):3===this.vertexCodes[i]&&(renderContext.breakShape=!0)}renderContext.endShape(this.close?2:1)}},drawGeometry:function(renderContext){var i,j;if(renderContext.beginShape(this.kind),this.style)for(i=0,j=this.vertices.length;j>i;i++)renderContext.vertex(this.vertices[i]);else for(i=0,j=this.vertices.length;j>i;i++){var vert=this.vertices[i];0===vert[2]?renderContext.vertex(vert[0],vert[1]):renderContext.vertex(vert[0],vert[1],vert[2])}renderContext.endShape()},drawGroup:function(renderContext){for(var i=0,j=this.children.length;j>i;i++)this.children[i].draw(renderContext)},drawPrimitive:function(renderContext){if(2===this.kind)renderContext.point(this.params[0],this.params[1]);else if(4===this.kind)4===this.params.length?renderContext.line(this.params[0],this.params[1],this.params[2],this.params[3]):renderContext.line(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);else if(8===this.kind)renderContext.triangle(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);else if(16===this.kind)renderContext.quad(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5],this.params[6],this.params[7]);else if(30===this.kind)if(null!==this.image){var imMode=imageModeConvert;renderContext.imageMode(0),renderContext.image(this.image,this.params[0],this.params[1],this.params[2],this.params[3]),imageModeConvert=imMode}else{var rcMode=curRectMode;renderContext.rectMode(0),renderContext.rect(this.params[0],this.params[1],this.params[2],this.params[3]),curRectMode=rcMode}else if(31===this.kind){var elMode=curEllipseMode;renderContext.ellipseMode(0),renderContext.ellipse(this.params[0],this.params[1],this.params[2],this.params[3]),curEllipseMode=elMode}else if(32===this.kind){var eMode=curEllipseMode;renderContext.ellipseMode(0),renderContext.arc(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]),curEllipseMode=eMode}else 41===this.kind?1===this.params.length?renderContext.box(this.params[0]):renderContext.box(this.params[0],this.params[1],this.params[2]):40===this.kind&&renderContext.sphere(this.params[0])},pre:function(renderContext){this.matrix&&(renderContext.pushMatrix(),renderContext.transform(this.matrix)),this.style&&(renderContext.pushStyle(),this.styles(renderContext))},post:function(renderContext){this.matrix&&renderContext.popMatrix(),this.style&&renderContext.popStyle()},styles:function(renderContext){this.stroke?(renderContext.stroke(this.strokeColor),renderContext.strokeWeight(this.strokeWeight),renderContext.strokeCap(this.strokeCap),renderContext.strokeJoin(this.strokeJoin)):renderContext.noStroke(),this.fill?renderContext.fill(this.fillColor):renderContext.noFill()},getChild:function(child){var i,j;if("number"==typeof child)return this.children[child];var found;if(""===child||this.name===child)return this;if(this.nameTable.length>0){for(i=0,j=this.nameTable.length;j>i||found;i++)if(this.nameTable[i].getName===child){found=this.nameTable[i];break}if(found)return found}for(i=0,j=this.children.length;j>i;i++)if(found=this.children[i].getChild(child))return found;return null},getChildCount:function(){return this.children.length},addChild:function(child){this.children.push(child),child.parent=this,null!==child.getName()&&this.addName(child.getName(),child)},addName:function(name,shape){null!==this.parent?this.parent.addName(name,shape):this.nameTable.push([name,shape])},translate:function(){2===arguments.length?(this.checkMatrix(2),this.matrix.translate(arguments[0],arguments[1])):(this.checkMatrix(3),this.matrix.translate(arguments[0],arguments[1],0))},checkMatrix:function(dimensions){null===this.matrix?2===dimensions?this.matrix=new p.PMatrix2D:this.matrix=new p.PMatrix3D:3===dimensions&&this.matrix instanceof p.PMatrix2D&&(this.matrix=new p.PMatrix3D)},rotateX:function(angle){this.rotate(angle,1,0,0)},rotateY:function(angle){this.rotate(angle,0,1,0)},rotateZ:function(angle){this.rotate(angle,0,0,1)},rotate:function(){1===arguments.length?(this.checkMatrix(2),this.matrix.rotate(arguments[0])):(this.checkMatrix(3),this.matrix.rotate(arguments[0],arguments[1],arguments[2],arguments[3]))},scale:function(){2===arguments.length?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1])):3===arguments.length?(this.checkMatrix(2),this.matrix.scale(arguments[0],arguments[1],arguments[2])):(this.checkMatrix(2),this.matrix.scale(arguments[0]))},resetMatrix:function(){this.checkMatrix(2),this.matrix.reset()},applyMatrix:function(matrix){1===arguments.length?this.applyMatrix(matrix.elements[0],matrix.elements[1],0,matrix.elements[2],matrix.elements[3],matrix.elements[4],0,matrix.elements[5],0,0,1,0,0,0,0,1):6===arguments.length?(this.checkMatrix(2),this.matrix.apply(arguments[0],arguments[1],arguments[2],0,arguments[3],arguments[4],arguments[5],0,0,0,1,0,0,0,0,1)):16===arguments.length&&(this.checkMatrix(3),this.matrix.apply(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15]))}};var PShapeSVG=p.PShapeSVG=function(){if(p.PShape.call(this),1===arguments.length){if(this.element=arguments[0],this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=4278190080,this.strokeWeight=1,this.strokeCap="butt",this.strokeJoin="miter",this.strokeGradient=null,this.strokeGradientPaint=null,this.strokeName=null,this.strokeOpacity=1,this.fill=!0,this.fillColor=4278190080,this.fillGradient=null,this.fillGradientPaint=null,this.fillName=null,this.fillOpacity=1,"svg"!==this.element.getName())throw"root is not <svg>, it's <"+this.element.getName()+">"}else 2===arguments.length&&("string"==typeof arguments[1]?arguments[1].indexOf(".svg")>-1&&(this.element=new p.XMLElement(p,arguments[1]),this.vertexCodes=[],this.vertices=[],this.opacity=1,this.stroke=!1,this.strokeColor=4278190080,this.strokeWeight=1,this.strokeCap="butt",this.strokeJoin="miter",this.strokeGradient="",this.strokeGradientPaint="",this.strokeName="",this.strokeOpacity=1,this.fill=!0,this.fillColor=4278190080,this.fillGradient=null,this.fillGradientPaint=null,this.fillOpacity=1):arguments[0]&&(this.element=arguments[1],this.vertexCodes=arguments[0].vertexCodes.slice(),this.vertices=arguments[0].vertices.slice(),this.stroke=arguments[0].stroke,this.strokeColor=arguments[0].strokeColor,this.strokeWeight=arguments[0].strokeWeight,this.strokeCap=arguments[0].strokeCap,this.strokeJoin=arguments[0].strokeJoin,this.strokeGradient=arguments[0].strokeGradient,this.strokeGradientPaint=arguments[0].strokeGradientPaint,this.strokeName=arguments[0].strokeName,this.fill=arguments[0].fill,this.fillColor=arguments[0].fillColor,this.fillGradient=arguments[0].fillGradient,this.fillGradientPaint=arguments[0].fillGradientPaint,this.fillName=arguments[0].fillName,this.strokeOpacity=arguments[0].strokeOpacity,this.fillOpacity=arguments[0].fillOpacity,this.opacity=arguments[0].opacity));this.name=this.element.getStringAttribute("id");var displayStr=this.element.getStringAttribute("display","inline");this.visible="none"!==displayStr;var str=this.element.getAttribute("transform");str&&(this.matrix=this.parseMatrix(str));var viewBoxStr=this.element.getStringAttribute("viewBox");if(null!==viewBoxStr){var viewBox=viewBoxStr.split(" ");this.width=viewBox[2],this.height=viewBox[3]}var unitWidth=this.element.getStringAttribute("width"),unitHeight=this.element.getStringAttribute("height");if(null!==unitWidth)this.width=this.parseUnitSize(unitWidth),this.height=this.parseUnitSize(unitHeight);else if(0===this.width||0===this.height)throw this.width=1,this.height=1,"The width and/or height is not readable in the <svg> tag of this file.";this.parseColors(this.element),this.parseChildren(this.element)};PShapeSVG.prototype=new PShape,PShapeSVG.prototype.parseMatrix=function(){function getCoords(s){var m=[];return s.replace(/\((.*?)\)/,function(){return function(all,params){m=params.replace(/,+/g," ").split(/\s+/)}}()),m}return function(str){this.checkMatrix(2);var pieces=[];if(str.replace(/\s*(\w+)\((.*?)\)/g,function(all){pieces.push(p.trim(all))}),0===pieces.length)return null;for(var i=0,j=pieces.length;j>i;i++){var m=getCoords(pieces[i]);if(-1!==pieces[i].indexOf("matrix"))this.matrix.set(m[0],m[2],m[4],m[1],m[3],m[5]);else if(-1!==pieces[i].indexOf("translate")){var tx=m[0],ty=2===m.length?m[1]:0;this.matrix.translate(tx,ty)}else if(-1!==pieces[i].indexOf("scale")){var sx=m[0],sy=2===m.length?m[1]:m[0];this.matrix.scale(sx,sy)}else if(-1!==pieces[i].indexOf("rotate")){var angle=m[0];1===m.length?this.matrix.rotate(p.radians(angle)):3===m.length&&(this.matrix.translate(m[1],m[2]),this.matrix.rotate(p.radians(m[0])),this.matrix.translate(-m[1],-m[2]))}else-1!==pieces[i].indexOf("skewX")?this.matrix.skewX(parseFloat(m[0])):-1!==pieces[i].indexOf("skewY")?this.matrix.skewY(m[0]):-1!==pieces[i].indexOf("shearX")?this.matrix.shearX(m[0]):-1!==pieces[i].indexOf("shearY")&&this.matrix.shearY(m[0])}return this.matrix}}(),PShapeSVG.prototype.parseChildren=function(element){for(var newelement=element.getChildren(),children=new p.PShape,i=0,j=newelement.length;j>i;i++){var kid=this.parseChild(newelement[i]);kid&&children.addChild(kid)}this.children.push(children)},PShapeSVG.prototype.getName=function(){return this.name},PShapeSVG.prototype.parseChild=function(elem){var shape,name=elem.getName();return"g"===name?shape=new PShapeSVG(this,elem):"defs"===name?shape=new PShapeSVG(this,elem):"line"===name?(shape=new PShapeSVG(this,elem),shape.parseLine()):"circle"===name?(shape=new PShapeSVG(this,elem),shape.parseEllipse(!0)):"ellipse"===name?(shape=new PShapeSVG(this,elem),shape.parseEllipse(!1)):"rect"===name?(shape=new PShapeSVG(this,elem),shape.parseRect()):"polygon"===name?(shape=new PShapeSVG(this,elem),shape.parsePoly(!0)):"polyline"===name?(shape=new PShapeSVG(this,elem),shape.parsePoly(!1)):"path"===name?(shape=new PShapeSVG(this,elem),shape.parsePath()):"radialGradient"===name?unimplemented("PShapeSVG.prototype.parseChild, name = radialGradient"):"linearGradient"===name?unimplemented("PShapeSVG.prototype.parseChild, name = linearGradient"):"text"===name?unimplemented("PShapeSVG.prototype.parseChild, name = text"):"filter"===name?unimplemented("PShapeSVG.prototype.parseChild, name = filter"):"mask"===name?unimplemented("PShapeSVG.prototype.parseChild, name = mask"):nop(),shape},PShapeSVG.prototype.parsePath=function(){this.family=21,this.kind=0;var pathData=p.trim(this.element.getStringAttribute("d").replace(/[\s,]+/g," "));if(null!==pathData){pathData=p.__toCharArray(pathData);for(var lastInstruction,command,j,k,cx=0,cy=0,ctrlX=0,ctrlY=0,ctrlX1=0,ctrlX2=0,ctrlY1=0,ctrlY2=0,endX=0,endY=0,ppx=0,ppy=0,px=0,py=0,i=0,valOf=0,str="",tmpArray=[],flag=!1;i<pathData.length;)if(valOf=pathData[i].valueOf(),valOf>=65&&90>=valOf||valOf>=97&&122>=valOf){if(j=i,i++,i<pathData.length)for(tmpArray=[],valOf=pathData[i].valueOf();!(valOf>=65&&90>=valOf||valOf>=97&&100>=valOf||valOf>=102&&122>=valOf)&&flag===!1;)32===valOf?(""!==str&&(tmpArray.push(parseFloat(str)),str=""),i++):45===valOf?101===pathData[i-1].valueOf()?(str+=pathData[i].toString(),i++):(""!==str&&tmpArray.push(parseFloat(str)),str=pathData[i].toString(),i++):(str+=pathData[i].toString(),i++),i===pathData.length?flag=!0:valOf=pathData[i].valueOf();if(""!==str&&(tmpArray.push(parseFloat(str)),str=""),command=pathData[j],valOf=command.valueOf(),77===valOf){if(tmpArray.length>=2&&tmpArray.length%2===0&&(cx=tmpArray[0],cy=tmpArray[1],this.parsePathMoveto(cx,cy),tmpArray.length>2))for(j=2,k=tmpArray.length;k>j;j+=2)cx=tmpArray[j],cy=tmpArray[j+1],this.parsePathLineto(cx,cy)}else if(109===valOf){if(tmpArray.length>=2&&tmpArray.length%2===0&&(cx+=tmpArray[0],cy+=tmpArray[1],this.parsePathMoveto(cx,cy),tmpArray.length>2))for(j=2,k=tmpArray.length;k>j;j+=2)cx+=tmpArray[j],cy+=tmpArray[j+1],this.parsePathLineto(cx,cy)}else if(76===valOf){if(tmpArray.length>=2&&tmpArray.length%2===0)for(j=0,k=tmpArray.length;k>j;j+=2)cx=tmpArray[j],cy=tmpArray[j+1],this.parsePathLineto(cx,cy)}else if(108===valOf){if(tmpArray.length>=2&&tmpArray.length%2===0)for(j=0,k=tmpArray.length;k>j;j+=2)cx+=tmpArray[j],cy+=tmpArray[j+1],this.parsePathLineto(cx,cy)}else if(72===valOf)for(j=0,k=tmpArray.length;k>j;j++)cx=tmpArray[j],this.parsePathLineto(cx,cy);else if(104===valOf)for(j=0,k=tmpArray.length;k>j;j++)cx+=tmpArray[j],this.parsePathLineto(cx,cy);else if(86===valOf)for(j=0,k=tmpArray.length;k>j;j++)cy=tmpArray[j],this.parsePathLineto(cx,cy);else if(118===valOf)for(j=0,k=tmpArray.length;k>j;j++)cy+=tmpArray[j],this.parsePathLineto(cx,cy);else if(67===valOf){if(tmpArray.length>=6&&tmpArray.length%6===0)for(j=0,k=tmpArray.length;k>j;j+=6)ctrlX1=tmpArray[j],ctrlY1=tmpArray[j+1],ctrlX2=tmpArray[j+2],ctrlY2=tmpArray[j+3],endX=tmpArray[j+4],endY=tmpArray[j+5],this.parsePathCurveto(ctrlX1,ctrlY1,ctrlX2,ctrlY2,endX,endY),cx=endX,cy=endY}else if(99===valOf){if(tmpArray.length>=6&&tmpArray.length%6===0)for(j=0,k=tmpArray.length;k>j;j+=6)ctrlX1=cx+tmpArray[j],ctrlY1=cy+tmpArray[j+1],ctrlX2=cx+tmpArray[j+2],ctrlY2=cy+tmpArray[j+3],endX=cx+tmpArray[j+4],endY=cy+tmpArray[j+5],this.parsePathCurveto(ctrlX1,ctrlY1,ctrlX2,ctrlY2,endX,endY),cx=endX,cy=endY}else if(83===valOf){if(tmpArray.length>=4&&tmpArray.length%4===0)for(j=0,k=tmpArray.length;k>j;j+=4)"c"===lastInstruction.toLowerCase()||"s"===lastInstruction.toLowerCase()?(ppx=this.vertices[this.vertices.length-2][0],ppy=this.vertices[this.vertices.length-2][1],px=this.vertices[this.vertices.length-1][0],py=this.vertices[this.vertices.length-1][1],ctrlX1=px+(px-ppx),ctrlY1=py+(py-ppy)):(ctrlX1=this.vertices[this.vertices.length-1][0],ctrlY1=this.vertices[this.vertices.length-1][1]),ctrlX2=tmpArray[j],ctrlY2=tmpArray[j+1],endX=tmpArray[j+2],endY=tmpArray[j+3],this.parsePathCurveto(ctrlX1,ctrlY1,ctrlX2,ctrlY2,endX,endY),cx=endX,cy=endY}else if(115===valOf){if(tmpArray.length>=4&&tmpArray.length%4===0)for(j=0,k=tmpArray.length;k>j;j+=4)"c"===lastInstruction.toLowerCase()||"s"===lastInstruction.toLowerCase()?(ppx=this.vertices[this.vertices.length-2][0],ppy=this.vertices[this.vertices.length-2][1],px=this.vertices[this.vertices.length-1][0],py=this.vertices[this.vertices.length-1][1],ctrlX1=px+(px-ppx),ctrlY1=py+(py-ppy)):(ctrlX1=this.vertices[this.vertices.length-1][0],ctrlY1=this.vertices[this.vertices.length-1][1]),ctrlX2=cx+tmpArray[j],ctrlY2=cy+tmpArray[j+1],endX=cx+tmpArray[j+2],endY=cy+tmpArray[j+3],this.parsePathCurveto(ctrlX1,ctrlY1,ctrlX2,ctrlY2,endX,endY),cx=endX,cy=endY}else if(81===valOf){if(tmpArray.length>=4&&tmpArray.length%4===0)for(j=0,k=tmpArray.length;k>j;j+=4)ctrlX=tmpArray[j],ctrlY=tmpArray[j+1],endX=tmpArray[j+2],endY=tmpArray[j+3],this.parsePathQuadto(cx,cy,ctrlX,ctrlY,endX,endY),cx=endX,cy=endY}else if(113===valOf){if(tmpArray.length>=4&&tmpArray.length%4===0)for(j=0,k=tmpArray.length;k>j;j+=4)ctrlX=cx+tmpArray[j],ctrlY=cy+tmpArray[j+1],endX=cx+tmpArray[j+2],endY=cy+tmpArray[j+3],this.parsePathQuadto(cx,cy,ctrlX,ctrlY,endX,endY),cx=endX,cy=endY}else if(84===valOf){if(tmpArray.length>=2&&tmpArray.length%2===0)for(j=0,k=tmpArray.length;k>j;j+=2)"q"===lastInstruction.toLowerCase()||"t"===lastInstruction.toLowerCase()?(ppx=this.vertices[this.vertices.length-2][0],ppy=this.vertices[this.vertices.length-2][1],px=this.vertices[this.vertices.length-1][0],py=this.vertices[this.vertices.length-1][1],ctrlX=px+(px-ppx),ctrlY=py+(py-ppy)):(ctrlX=cx,ctrlY=cy),endX=tmpArray[j],endY=tmpArray[j+1],this.parsePathQuadto(cx,cy,ctrlX,ctrlY,endX,endY),cx=endX,cy=endY}else if(116===valOf){if(tmpArray.length>=2&&tmpArray.length%2===0)for(j=0,k=tmpArray.length;k>j;j+=2)"q"===lastInstruction.toLowerCase()||"t"===lastInstruction.toLowerCase()?(ppx=this.vertices[this.vertices.length-2][0],ppy=this.vertices[this.vertices.length-2][1],px=this.vertices[this.vertices.length-1][0],py=this.vertices[this.vertices.length-1][1],ctrlX=px+(px-ppx),ctrlY=py+(py-ppy)):(ctrlX=cx,ctrlY=cy),endX=cx+tmpArray[j],endY=cy+tmpArray[j+1],this.parsePathQuadto(cx,cy,ctrlX,ctrlY,endX,endY),cx=endX,cy=endY}else(90===valOf||122===valOf)&&(this.close=!0);lastInstruction=command.toString()}else i++}},PShapeSVG.prototype.parsePathQuadto=function(x1,y1,cx,cy,x2,y2){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(1),this.parsePathVertex(x1+2*(cx-x1)/3,y1+2*(cy-y1)/3),this.parsePathVertex(x2+2*(cx-x2)/3,y2+2*(cy-y2)/3),this.parsePathVertex(x2,y2)},PShapeSVG.prototype.parsePathCurveto=function(x1,y1,x2,y2,x3,y3){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(1),this.parsePathVertex(x1,y1),this.parsePathVertex(x2,y2),this.parsePathVertex(x3,y3)},PShapeSVG.prototype.parsePathLineto=function(px,py){if(!(this.vertices.length>0))throw"Path must start with M/m";this.parsePathCode(0),this.parsePathVertex(px,py),this.vertices[this.vertices.length-1].moveTo=!1},PShapeSVG.prototype.parsePathMoveto=function(px,py){this.vertices.length>0&&this.parsePathCode(3),this.parsePathCode(0),this.parsePathVertex(px,py),this.vertices[this.vertices.length-1].moveTo=!0},PShapeSVG.prototype.parsePathVertex=function(x,y){var verts=[];verts[0]=x,verts[1]=y,this.vertices.push(verts)},PShapeSVG.prototype.parsePathCode=function(what){this.vertexCodes.push(what)},PShapeSVG.prototype.parsePoly=function(val){this.family=21,this.close=val;var pointsAttr=p.trim(this.element.getStringAttribute("points").replace(/[,\s]+/g," "));if(null!==pointsAttr){var pointsBuffer=pointsAttr.split(" ");if(pointsBuffer.length%2!==0)throw"Error parsing polygon points: odd number of coordinates provided";for(var i=0,j=pointsBuffer.length;j>i;i++){var verts=[];verts[0]=pointsBuffer[i],verts[1]=pointsBuffer[++i],this.vertices.push(verts)}}},PShapeSVG.prototype.parseRect=function(){if(this.kind=30,this.family=1,this.params=[],this.params[0]=this.element.getFloatAttribute("x"),this.params[1]=this.element.getFloatAttribute("y"),this.params[2]=this.element.getFloatAttribute("width"),this.params[3]=this.element.getFloatAttribute("height"),this.params[2]<0||this.params[3]<0)throw"svg error: negative width or height found while parsing <rect>"},PShapeSVG.prototype.parseEllipse=function(val){this.kind=31,this.family=1,this.params=[],this.params[0]=0|this.element.getFloatAttribute("cx"),this.params[1]=0|this.element.getFloatAttribute("cy");var rx,ry;if(val){if(rx=ry=this.element.getFloatAttribute("r"),0>rx)throw"svg error: negative radius found while parsing <circle>"}else if(rx=this.element.getFloatAttribute("rx"),ry=this.element.getFloatAttribute("ry"),0>rx||0>ry)throw"svg error: negative x-axis radius or y-axis radius found while parsing <ellipse>";this.params[0]-=rx,this.params[1]-=ry,this.params[2]=2*rx,this.params[3]=2*ry},PShapeSVG.prototype.parseLine=function(){this.kind=4,this.family=1,this.params=[],this.params[0]=this.element.getFloatAttribute("x1"),this.params[1]=this.element.getFloatAttribute("y1"),this.params[2]=this.element.getFloatAttribute("x2"),this.params[3]=this.element.getFloatAttribute("y2")},PShapeSVG.prototype.parseColors=function(element){if(element.hasAttribute("opacity")&&this.setOpacity(element.getAttribute("opacity")),element.hasAttribute("stroke")&&this.setStroke(element.getAttribute("stroke")),element.hasAttribute("stroke-width")&&this.setStrokeWeight(element.getAttribute("stroke-width")),element.hasAttribute("stroke-linejoin")&&this.setStrokeJoin(element.getAttribute("stroke-linejoin")),element.hasAttribute("stroke-linecap")&&this.setStrokeCap(element.getStringAttribute("stroke-linecap")),element.hasAttribute("fill")&&this.setFill(element.getStringAttribute("fill")),element.hasAttribute("style"))for(var styleText=element.getStringAttribute("style"),styleTokens=styleText.toString().split(";"),i=0,j=styleTokens.length;j>i;i++){var tokens=p.trim(styleTokens[i].split(":"));"fill"===tokens[0]?this.setFill(tokens[1]):"fill-opacity"===tokens[0]?this.setFillOpacity(tokens[1]):"stroke"===tokens[0]?this.setStroke(tokens[1]):"stroke-width"===tokens[0]?this.setStrokeWeight(tokens[1]):"stroke-linecap"===tokens[0]?this.setStrokeCap(tokens[1]):"stroke-linejoin"===tokens[0]?this.setStrokeJoin(tokens[1]):"stroke-opacity"===tokens[0]?this.setStrokeOpacity(tokens[1]):"opacity"===tokens[0]&&this.setOpacity(tokens[1])}},PShapeSVG.prototype.setFillOpacity=function(opacityText){this.fillOpacity=parseFloat(opacityText),this.fillColor=255*this.fillOpacity<<24|16777215&this.fillColor},PShapeSVG.prototype.setFill=function(fillText){var opacityMask=4278190080&this.fillColor;"none"===fillText?this.fill=!1:0===fillText.indexOf("#")?(this.fill=!0,4===fillText.length&&(fillText=fillText.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.fillColor=opacityMask|16777215&parseInt(fillText.substring(1),16)):0===fillText.indexOf("rgb")?(this.fill=!0,this.fillColor=opacityMask|this.parseRGB(fillText)):0===fillText.indexOf("url(#")?this.fillName=fillText.substring(5,fillText.length-1):colors[fillText]&&(this.fill=!0,this.fillColor=opacityMask|16777215&parseInt(colors[fillText].substring(1),16))},PShapeSVG.prototype.setOpacity=function(opacity){this.strokeColor=255*parseFloat(opacity)<<24|16777215&this.strokeColor,this.fillColor=255*parseFloat(opacity)<<24|16777215&this.fillColor},PShapeSVG.prototype.setStroke=function(strokeText){var opacityMask=4278190080&this.strokeColor;"none"===strokeText?this.stroke=!1:"#"===strokeText.charAt(0)?(this.stroke=!0,4===strokeText.length&&(strokeText=strokeText.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")),this.strokeColor=opacityMask|16777215&parseInt(strokeText.substring(1),16)):0===strokeText.indexOf("rgb")?(this.stroke=!0,this.strokeColor=opacityMask|this.parseRGB(strokeText)):0===strokeText.indexOf("url(#")?this.strokeName=strokeText.substring(5,strokeText.length-1):colors[strokeText]&&(this.stroke=!0,this.strokeColor=opacityMask|16777215&parseInt(colors[strokeText].substring(1),16))},PShapeSVG.prototype.setStrokeWeight=function(weight){this.strokeWeight=this.parseUnitSize(weight)},PShapeSVG.prototype.setStrokeJoin=function(linejoin){"miter"===linejoin?this.strokeJoin="miter":"round"===linejoin?this.strokeJoin="round":"bevel"===linejoin&&(this.strokeJoin="bevel")},PShapeSVG.prototype.setStrokeCap=function(linecap){"butt"===linecap?this.strokeCap="butt":"round"===linecap?this.strokeCap="round":"square"===linecap&&(this.strokeCap="square")},PShapeSVG.prototype.setStrokeOpacity=function(opacityText){this.strokeOpacity=parseFloat(opacityText),this.strokeColor=255*this.strokeOpacity<<24|16777215&this.strokeColor},PShapeSVG.prototype.parseRGB=function(color){var sub=color.substring(color.indexOf("(")+1,color.indexOf(")")),values=sub.split(", ");return values[0]<<16|values[1]<<8|values[2]},PShapeSVG.prototype.parseUnitSize=function(text){var len=text.length-2;return 0>len?text:text.indexOf("pt")===len?1.25*parseFloat(text.substring(0,len)):text.indexOf("pc")===len?15*parseFloat(text.substring(0,len)):text.indexOf("mm")===len?3.543307*parseFloat(text.substring(0,len)):text.indexOf("cm")===len?35.43307*parseFloat(text.substring(0,len)):text.indexOf("in")===len?90*parseFloat(text.substring(0,len)):text.indexOf("px")===len?parseFloat(text.substring(0,len)):parseFloat(text)},p.shape=function(shape,x,y,width,height){arguments.length>=1&&null!==arguments[0]&&shape.isVisible()&&(p.pushMatrix(),3===curShapeMode?5===arguments.length?(p.translate(x-width/2,y-height/2),p.scale(width/shape.getWidth(),height/shape.getHeight())):3===arguments.length?p.translate(x-shape.getWidth()/2,-shape.getHeight()/2):p.translate(-shape.getWidth()/2,-shape.getHeight()/2):0===curShapeMode?5===arguments.length?(p.translate(x,y),p.scale(width/shape.getWidth(),height/shape.getHeight())):3===arguments.length&&p.translate(x,y):1===curShapeMode&&(5===arguments.length?(width-=x,height-=y,p.translate(x,y),p.scale(width/shape.getWidth(),height/shape.getHeight())):3===arguments.length&&p.translate(x,y)),shape.draw(p),(1===arguments.length&&3===curShapeMode||arguments.length>1)&&p.popMatrix())},p.shapeMode=function(mode){curShapeMode=mode},p.loadShape=function(filename){return 1===arguments.length&&filename.indexOf(".svg")>-1?new PShapeSVG(null,filename):null};var XMLAttribute=function(fname,n,nameSpace,v,t){this.fullName=fname||"",this.name=n||"",this.namespace=nameSpace||"",this.value=v,this.type=t};XMLAttribute.prototype={getName:function(){return this.name},getFullName:function(){return this.fullName},getNamespace:function(){return this.namespace},getValue:function(){return this.value},getType:function(){return this.type},setValue:function(newval){this.value=newval}};var XMLElement=p.XMLElement=function(selector,uri,sysid,line){this.attributes=[],this.children=[],this.fullName=null,this.name=null,this.namespace="",this.content=null,this.parent=null,this.lineNr="",this.systemID="",this.type="ELEMENT",selector&&("string"==typeof selector?uri===undef&&selector.indexOf("<")>-1?this.parse(selector):(this.fullName=selector,this.namespace=uri,this.systemId=sysid,this.lineNr=line):this.parse(uri))};XMLElement.prototype={parse:function(textstring){var xmlDoc;try{var extension=textstring.substring(textstring.length-4);(".xml"===extension||".svg"===extension)&&(textstring=ajax(textstring)),xmlDoc=(new DOMParser).parseFromString(textstring,"text/xml");var elements=xmlDoc.documentElement;if(!elements)throw"Error loading document";return this.parseChildrenRecursive(null,elements),this}catch(e){throw e}},parseChildrenRecursive:function(parent,elementpath){var xmlelement,xmlattribute,tmpattrib,l,m,child;if(parent?(xmlelement=new XMLElement(elementpath.nodeName),xmlelement.parent=parent):(this.fullName=elementpath.localName,this.name=elementpath.nodeName,xmlelement=this),3===elementpath.nodeType&&""!==elementpath.textContent)return this.createPCDataElement(elementpath.textContent);if(4===elementpath.nodeType)return this.createCDataElement(elementpath.textContent);if(elementpath.attributes)for(l=0,m=elementpath.attributes.length;m>l;l++)tmpattrib=elementpath.attributes[l],xmlattribute=new XMLAttribute(tmpattrib.getname,tmpattrib.nodeName,tmpattrib.namespaceURI,tmpattrib.nodeValue,tmpattrib.nodeType),xmlelement.attributes.push(xmlattribute);if(elementpath.childNodes)for(l=0,m=elementpath.childNodes.length;m>l;l++){var node=elementpath.childNodes[l];child=xmlelement.parseChildrenRecursive(xmlelement,node),null!==child&&xmlelement.children.push(child)}return xmlelement},createElement:function(fullname,namespaceuri,sysid,line){return sysid===undef?new XMLElement(fullname,namespaceuri):new XMLElement(fullname,namespaceuri,sysid,line)},createPCDataElement:function(content,isCDATA){if(""===content.replace(/^\s+$/g,""))return null;var pcdata=new XMLElement;return pcdata.type="TEXT",pcdata.content=content,pcdata},createCDataElement:function(content){var cdata=this.createPCDataElement(content);if(null===cdata)return null;cdata.type="CDATA";var entity,htmlentities={"<":"&lt;",">":"&gt;","'":"&apos;",
'"':"&quot;"};for(entity in htmlentities)Object.hasOwnProperty(htmlentities,entity)||(content=content.replace(new RegExp(entity,"g"),htmlentities[entity]));return cdata.cdata=content,cdata},hasAttribute:function(){return 1===arguments.length?null!==this.getAttribute(arguments[0]):2===arguments.length?null!==this.getAttribute(arguments[0],arguments[1]):void 0},equals:function(other){if(!(other instanceof XMLElement))return!1;var i,j;if(this.fullName!==other.fullName)return!1;if(this.attributes.length!==other.getAttributeCount())return!1;if(this.attributes.length!==other.attributes.length)return!1;var attr_name,attr_ns,attr_other;for(i=0,j=this.attributes.length;j>i;i++){if(attr_name=this.attributes[i].getName(),attr_ns=this.attributes[i].getNamespace(),attr_other=other.findAttribute(attr_name,attr_ns),null===attr_other)return!1;if(this.attributes[i].getValue()!==attr_other.getValue())return!1;if(this.attributes[i].getType()!==attr_other.getType())return!1}if(this.children.length!==other.getChildCount())return!1;if(this.children.length>0){var child1,child2;for(i=0,j=this.children.length;j>i;i++)if(child1=this.getChild(i),child2=other.getChild(i),!child1.equals(child2))return!1;return!0}return this.content===other.content},getContent:function(){if("TEXT"===this.type||"CDATA"===this.type)return this.content;var children=this.children;return 1!==children.length||"TEXT"!==children[0].type&&"CDATA"!==children[0].type?null:children[0].content},getAttribute:function(){var attribute;return 2===arguments.length?(attribute=this.findAttribute(arguments[0]),attribute?attribute.getValue():arguments[1]):1===arguments.length?(attribute=this.findAttribute(arguments[0]),attribute?attribute.getValue():null):3===arguments.length?(attribute=this.findAttribute(arguments[0],arguments[1]),attribute?attribute.getValue():arguments[2]):void 0},getStringAttribute:function(){return 1===arguments.length?this.getAttribute(arguments[0]):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getString:function(attributeName){return this.getStringAttribute(attributeName)},getFloatAttribute:function(){return 1===arguments.length?parseFloat(this.getAttribute(arguments[0],0)):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getFloat:function(attributeName){return this.getFloatAttribute(attributeName)},getIntAttribute:function(){return 1===arguments.length?this.getAttribute(arguments[0],0):2===arguments.length?this.getAttribute(arguments[0],arguments[1]):this.getAttribute(arguments[0],arguments[1],arguments[2])},getInt:function(attributeName){return this.getIntAttribute(attributeName)},hasChildren:function(){return this.children.length>0},addChild:function(child){null!==child&&(child.parent=this,this.children.push(child))},insertChild:function(child,index){if(child){if(null===child.getLocalName()&&!this.hasChildren()){var lastChild=this.children[this.children.length-1];if(null===lastChild.getLocalName())return void lastChild.setContent(lastChild.getContent()+child.getContent())}child.parent=this,this.children.splice(index,0,child)}},getChild:function(selector){if("number"==typeof selector)return this.children[selector];if(-1!==selector.indexOf("/"))return this.getChildRecursive(selector.split("/"),0);for(var kid,kidName,i=0,j=this.getChildCount();j>i;i++)if(kid=this.getChild(i),kidName=kid.getName(),null!==kidName&&kidName===selector)return kid;return null},getChildren:function(){if(1===arguments.length){if("number"==typeof arguments[0])return this.getChild(arguments[0]);if(-1!==arguments[0].indexOf("/"))return this.getChildrenRecursive(arguments[0].split("/"),0);for(var kid,kidName,matches=[],i=0,j=this.getChildCount();j>i;i++)kid=this.getChild(i),kidName=kid.getName(),null!==kidName&&kidName===arguments[0]&&matches.push(kid);return matches}return this.children},getChildCount:function(){return this.children.length},getChildRecursive:function(items,offset){if(offset===items.length)return this;for(var kid,kidName,matchName=items[offset],i=0,j=this.getChildCount();j>i;i++)if(kid=this.getChild(i),kidName=kid.getName(),null!==kidName&&kidName===matchName)return kid.getChildRecursive(items,offset+1);return null},getChildrenRecursive:function(items,offset){if(offset===items.length-1)return this.getChildren(items[offset]);for(var matches=this.getChildren(items[offset]),kidMatches=[],i=0;i<matches.length;i++)kidMatches=kidMatches.concat(matches[i].getChildrenRecursive(items,offset+1));return kidMatches},isLeaf:function(){return!this.hasChildren()},listChildren:function(){for(var arr=[],i=0,j=this.children.length;j>i;i++)arr.push(this.getChild(i).getName());return arr},removeAttribute:function(name,namespace){this.namespace=namespace||"";for(var i=0,j=this.attributes.length;j>i;i++)if(this.attributes[i].getName()===name&&this.attributes[i].getNamespace()===this.namespace){this.attributes.splice(i,1);break}},removeChild:function(child){if(child)for(var i=0,j=this.children.length;j>i;i++)if(this.children[i].equals(child)){this.children.splice(i,1);break}},removeChildAtIndex:function(index){this.children.length>index&&this.children.splice(index,1)},findAttribute:function(name,namespace){this.namespace=namespace||"";for(var i=0,j=this.attributes.length;j>i;i++)if(this.attributes[i].getName()===name&&this.attributes[i].getNamespace()===this.namespace)return this.attributes[i];return null},setAttribute:function(){var attr;if(3===arguments.length){var index=arguments[0].indexOf(":"),name=arguments[0].substring(index+1);attr=this.findAttribute(name,arguments[1]),attr?attr.setValue(arguments[2]):(attr=new XMLAttribute(arguments[0],name,arguments[1],arguments[2],"CDATA"),this.attributes.push(attr))}else attr=this.findAttribute(arguments[0]),attr?attr.setValue(arguments[1]):(attr=new XMLAttribute(arguments[0],arguments[0],null,arguments[1],"CDATA"),this.attributes.push(attr))},setString:function(attribute,value){this.setAttribute(attribute,value)},setInt:function(attribute,value){this.setAttribute(attribute,value)},setFloat:function(attribute,value){this.setAttribute(attribute,value)},setContent:function(content){this.children.length>0&&Processing.debug("Tried to set content for XMLElement with children"),this.content=content},setName:function(){if(1===arguments.length)this.name=arguments[0],this.fullName=arguments[0],this.namespace=null;else{var index=arguments[0].indexOf(":");null===arguments[1]||0>index?this.name=arguments[0]:this.name=arguments[0].substring(index+1),this.fullName=arguments[0],this.namespace=arguments[1]}},getName:function(){return this.fullName},getLocalName:function(){return this.name},getAttributeCount:function(){return this.attributes.length},toString:function(){if("TEXT"===this.type)return this.content;if("CDATA"===this.type)return this.cdata;var a,c,tagstring=this.fullName,xmlstring="<"+tagstring;for(a=0;a<this.attributes.length;a++){var attr=this.attributes[a];xmlstring+=" "+attr.getName()+'="'+attr.getValue()+'"'}if(0===this.children.length)xmlstring+=""===this.content?"/>":">"+this.content+"</"+tagstring+">";else{for(xmlstring+=">",c=0;c<this.children.length;c++)xmlstring+=this.children[c].toString();xmlstring+="</"+tagstring+">"}return xmlstring}},XMLElement.parse=function(xmlstring){var element=new XMLElement;return element.parse(xmlstring),element};var XML=p.XML=p.XMLElement;p.loadXML=function(uri){return new XML(p,uri)};var printMatrixHelper=function(elements){for(var big=0,i=0;i<elements.length;i++)big=0!==i?Math.max(big,Math.abs(elements[i])):Math.abs(elements[i]);var digits=(big+"").indexOf(".");return 0===digits?digits=1:-1===digits&&(digits=(big+"").length),digits},PMatrix2D=p.PMatrix2D=function(){0===arguments.length?this.reset():1===arguments.length&&arguments[0]instanceof PMatrix2D?this.set(arguments[0].array()):6===arguments.length&&this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])};PMatrix2D.prototype={set:function(){if(6===arguments.length){var a=arguments;this.set([a[0],a[1],a[2],a[3],a[4],a[5]])}else 1===arguments.length&&arguments[0]instanceof PMatrix2D?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){var outgoing=new PMatrix2D;return outgoing.set(this.elements),outgoing},reset:function(){this.set([1,0,0,0,1,0])},array:function(){return this.elements.slice()},translate:function(tx,ty){this.elements[2]=tx*this.elements[0]+ty*this.elements[1]+this.elements[2],this.elements[5]=tx*this.elements[3]+ty*this.elements[4]+this.elements[5]},invTranslate:function(tx,ty){this.translate(-tx,-ty)},transpose:function(){},mult:function(source,target){var x,y;return source instanceof PVector?(x=source.x,y=source.y,target||(target=new PVector)):source instanceof Array&&(x=source[0],y=source[1],target||(target=[])),target instanceof Array?(target[0]=this.elements[0]*x+this.elements[1]*y+this.elements[2],target[1]=this.elements[3]*x+this.elements[4]*y+this.elements[5]):target instanceof PVector&&(target.x=this.elements[0]*x+this.elements[1]*y+this.elements[2],target.y=this.elements[3]*x+this.elements[4]*y+this.elements[5],target.z=0),target},multX:function(x,y){return x*this.elements[0]+y*this.elements[1]+this.elements[2]},multY:function(x,y){return x*this.elements[3]+y*this.elements[4]+this.elements[5]},skewX:function(angle){this.apply(1,0,1,angle,0,0)},skewY:function(angle){this.apply(1,0,1,0,angle,0)},shearX:function(angle){this.apply(1,0,1,Math.tan(angle),0,0)},shearY:function(angle){this.apply(1,0,1,0,Math.tan(angle),0)},determinant:function(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]},invert:function(){var d=this.determinant();if(Math.abs(d)>-2147483648){var old00=this.elements[0],old01=this.elements[1],old02=this.elements[2],old10=this.elements[3],old11=this.elements[4],old12=this.elements[5];return this.elements[0]=old11/d,this.elements[3]=-old10/d,this.elements[1]=-old01/d,this.elements[4]=old00/d,this.elements[2]=(old01*old12-old11*old02)/d,this.elements[5]=(old10*old02-old00*old12)/d,!0}return!1},scale:function(sx,sy){sx&&!sy&&(sy=sx),sx&&sy&&(this.elements[0]*=sx,this.elements[1]*=sy,this.elements[3]*=sx,this.elements[4]*=sy)},invScale:function(sx,sy){sx&&!sy&&(sy=sx),this.scale(1/sx,1/sy)},apply:function(){var source;1===arguments.length&&arguments[0]instanceof PMatrix2D?source=arguments[0].array():6===arguments.length?source=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(source=arguments[0]);for(var result=[0,0,this.elements[2],0,0,this.elements[5]],e=0,row=0;2>row;row++)for(var col=0;3>col;col++,e++)result[e]+=this.elements[3*row+0]*source[col+0]+this.elements[3*row+1]*source[col+3];this.elements=result.slice()},preApply:function(){var source;1===arguments.length&&arguments[0]instanceof PMatrix2D?source=arguments[0].array():6===arguments.length?source=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(source=arguments[0]);var result=[0,0,source[2],0,0,source[5]];result[2]=source[2]+this.elements[2]*source[0]+this.elements[5]*source[1],result[5]=source[5]+this.elements[2]*source[3]+this.elements[5]*source[4],result[0]=this.elements[0]*source[0]+this.elements[3]*source[1],result[3]=this.elements[0]*source[3]+this.elements[3]*source[4],result[1]=this.elements[1]*source[0]+this.elements[4]*source[1],result[4]=this.elements[1]*source[3]+this.elements[4]*source[4],this.elements=result.slice()},rotate:function(angle){var c=Math.cos(angle),s=Math.sin(angle),temp1=this.elements[0],temp2=this.elements[1];this.elements[0]=c*temp1+s*temp2,this.elements[1]=-s*temp1+c*temp2,temp1=this.elements[3],temp2=this.elements[4],this.elements[3]=c*temp1+s*temp2,this.elements[4]=-s*temp1+c*temp2},rotateZ:function(angle){this.rotate(angle)},invRotateZ:function(angle){this.rotateZ(angle-Math.PI)},print:function(){var digits=printMatrixHelper(this.elements),output=""+p.nfs(this.elements[0],digits,4)+" "+p.nfs(this.elements[1],digits,4)+" "+p.nfs(this.elements[2],digits,4)+"\n"+p.nfs(this.elements[3],digits,4)+" "+p.nfs(this.elements[4],digits,4)+" "+p.nfs(this.elements[5],digits,4)+"\n\n";p.println(output)}};var PMatrix3D=p.PMatrix3D=function(){this.reset()};PMatrix3D.prototype={set:function(){16===arguments.length?this.elements=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof PMatrix3D?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())},get:function(){var outgoing=new PMatrix3D;return outgoing.set(this.elements),outgoing},reset:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},array:function(){return this.elements.slice()},translate:function(tx,ty,tz){tz===undef&&(tz=0),this.elements[3]+=tx*this.elements[0]+ty*this.elements[1]+tz*this.elements[2],this.elements[7]+=tx*this.elements[4]+ty*this.elements[5]+tz*this.elements[6],this.elements[11]+=tx*this.elements[8]+ty*this.elements[9]+tz*this.elements[10],this.elements[15]+=tx*this.elements[12]+ty*this.elements[13]+tz*this.elements[14]},transpose:function(){var temp=this.elements[4];this.elements[4]=this.elements[1],this.elements[1]=temp,temp=this.elements[8],this.elements[8]=this.elements[2],this.elements[2]=temp,temp=this.elements[6],this.elements[6]=this.elements[9],this.elements[9]=temp,temp=this.elements[3],this.elements[3]=this.elements[12],this.elements[12]=temp,temp=this.elements[7],this.elements[7]=this.elements[13],this.elements[13]=temp,temp=this.elements[11],this.elements[11]=this.elements[14],this.elements[14]=temp},mult:function(source,target){var x,y,z,w;return source instanceof PVector?(x=source.x,y=source.y,z=source.z,w=1,target||(target=new PVector)):source instanceof Array&&(x=source[0],y=source[1],z=source[2],w=source[3]||1,(!target||3!==target.length&&4!==target.length)&&(target=[0,0,0])),target instanceof Array&&(3===target.length?(target[0]=this.elements[0]*x+this.elements[1]*y+this.elements[2]*z+this.elements[3],target[1]=this.elements[4]*x+this.elements[5]*y+this.elements[6]*z+this.elements[7],target[2]=this.elements[8]*x+this.elements[9]*y+this.elements[10]*z+this.elements[11]):4===target.length&&(target[0]=this.elements[0]*x+this.elements[1]*y+this.elements[2]*z+this.elements[3]*w,target[1]=this.elements[4]*x+this.elements[5]*y+this.elements[6]*z+this.elements[7]*w,target[2]=this.elements[8]*x+this.elements[9]*y+this.elements[10]*z+this.elements[11]*w,target[3]=this.elements[12]*x+this.elements[13]*y+this.elements[14]*z+this.elements[15]*w)),target instanceof PVector&&(target.x=this.elements[0]*x+this.elements[1]*y+this.elements[2]*z+this.elements[3],target.y=this.elements[4]*x+this.elements[5]*y+this.elements[6]*z+this.elements[7],target.z=this.elements[8]*x+this.elements[9]*y+this.elements[10]*z+this.elements[11]),target},preApply:function(){var source;1===arguments.length&&arguments[0]instanceof PMatrix3D?source=arguments[0].array():16===arguments.length?source=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(source=arguments[0]);for(var result=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0,row=0;4>row;row++)for(var col=0;4>col;col++,e++)result[e]+=this.elements[col+0]*source[4*row+0]+this.elements[col+4]*source[4*row+1]+this.elements[col+8]*source[4*row+2]+this.elements[col+12]*source[4*row+3];this.elements=result.slice()},apply:function(){var source;1===arguments.length&&arguments[0]instanceof PMatrix3D?source=arguments[0].array():16===arguments.length?source=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(source=arguments[0]);for(var result=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0,row=0;4>row;row++)for(var col=0;4>col;col++,e++)result[e]+=this.elements[4*row+0]*source[col+0]+this.elements[4*row+1]*source[col+4]+this.elements[4*row+2]*source[col+8]+this.elements[4*row+3]*source[col+12];this.elements=result.slice()},rotate:function(angle,v0,v1,v2){if(v1){var c=p.cos(angle),s=p.sin(angle),t=1-c;this.apply(t*v0*v0+c,t*v0*v1-s*v2,t*v0*v2+s*v1,0,t*v0*v1+s*v2,t*v1*v1+c,t*v1*v2-s*v0,0,t*v0*v2-s*v1,t*v1*v2+s*v0,t*v2*v2+c,0,0,0,0,1)}else this.rotateZ(angle)},invApply:function(){inverseCopy===undef&&(inverseCopy=new PMatrix3D);var a=arguments;return inverseCopy.set(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]),inverseCopy.invert()?(this.preApply(inverseCopy),!0):!1},rotateX:function(angle){var c=p.cos(angle),s=p.sin(angle);this.apply([1,0,0,0,0,c,-s,0,0,s,c,0,0,0,0,1])},rotateY:function(angle){var c=p.cos(angle),s=p.sin(angle);this.apply([c,0,s,0,0,1,0,0,-s,0,c,0,0,0,0,1])},rotateZ:function(angle){var c=Math.cos(angle),s=Math.sin(angle);this.apply([c,-s,0,0,s,c,0,0,0,0,1,0,0,0,0,1])},scale:function(sx,sy,sz){!sx||sy||sz?sx&&sy&&!sz&&(sz=1):sy=sz=sx,sx&&sy&&sz&&(this.elements[0]*=sx,this.elements[1]*=sy,this.elements[2]*=sz,this.elements[4]*=sx,this.elements[5]*=sy,this.elements[6]*=sz,this.elements[8]*=sx,this.elements[9]*=sy,this.elements[10]*=sz,this.elements[12]*=sx,this.elements[13]*=sy,this.elements[14]*=sz)},skewX:function(angle){var t=Math.tan(angle);this.apply(1,t,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(angle){var t=Math.tan(angle);this.apply(1,0,0,0,t,1,0,0,0,0,1,0,0,0,0,1)},shearX:function(angle){var t=Math.tan(angle);this.apply(1,t,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},shearY:function(angle){var t=Math.tan(angle);this.apply(1,0,0,0,t,1,0,0,0,0,1,0,0,0,0,1)},multX:function(x,y,z,w){return z?w?this.elements[0]*x+this.elements[1]*y+this.elements[2]*z+this.elements[3]*w:this.elements[0]*x+this.elements[1]*y+this.elements[2]*z+this.elements[3]:this.elements[0]*x+this.elements[1]*y+this.elements[3]},multY:function(x,y,z,w){return z?w?this.elements[4]*x+this.elements[5]*y+this.elements[6]*z+this.elements[7]*w:this.elements[4]*x+this.elements[5]*y+this.elements[6]*z+this.elements[7]:this.elements[4]*x+this.elements[5]*y+this.elements[7]},multZ:function(x,y,z,w){return w?this.elements[8]*x+this.elements[9]*y+this.elements[10]*z+this.elements[11]*w:this.elements[8]*x+this.elements[9]*y+this.elements[10]*z+this.elements[11]},multW:function(x,y,z,w){return w?this.elements[12]*x+this.elements[13]*y+this.elements[14]*z+this.elements[15]*w:this.elements[12]*x+this.elements[13]*y+this.elements[14]*z+this.elements[15]},invert:function(){var fA0=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4],fA1=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4],fA2=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4],fA3=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5],fA4=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5],fA5=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6],fB0=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12],fB1=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12],fB2=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12],fB3=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13],fB4=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13],fB5=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14],fDet=fA0*fB5-fA1*fB4+fA2*fB3+fA3*fB2-fA4*fB1+fA5*fB0;if(Math.abs(fDet)<=1e-9)return!1;var kInv=[];kInv[0]=+this.elements[5]*fB5-this.elements[6]*fB4+this.elements[7]*fB3,kInv[4]=-this.elements[4]*fB5+this.elements[6]*fB2-this.elements[7]*fB1,kInv[8]=+this.elements[4]*fB4-this.elements[5]*fB2+this.elements[7]*fB0,kInv[12]=-this.elements[4]*fB3+this.elements[5]*fB1-this.elements[6]*fB0,kInv[1]=-this.elements[1]*fB5+this.elements[2]*fB4-this.elements[3]*fB3,kInv[5]=+this.elements[0]*fB5-this.elements[2]*fB2+this.elements[3]*fB1,kInv[9]=-this.elements[0]*fB4+this.elements[1]*fB2-this.elements[3]*fB0,kInv[13]=+this.elements[0]*fB3-this.elements[1]*fB1+this.elements[2]*fB0,kInv[2]=+this.elements[13]*fA5-this.elements[14]*fA4+this.elements[15]*fA3,kInv[6]=-this.elements[12]*fA5+this.elements[14]*fA2-this.elements[15]*fA1,kInv[10]=+this.elements[12]*fA4-this.elements[13]*fA2+this.elements[15]*fA0,kInv[14]=-this.elements[12]*fA3+this.elements[13]*fA1-this.elements[14]*fA0,kInv[3]=-this.elements[9]*fA5+this.elements[10]*fA4-this.elements[11]*fA3,kInv[7]=+this.elements[8]*fA5-this.elements[10]*fA2+this.elements[11]*fA1,kInv[11]=-this.elements[8]*fA4+this.elements[9]*fA2-this.elements[11]*fA0,kInv[15]=+this.elements[8]*fA3-this.elements[9]*fA1+this.elements[10]*fA0;var fInvDet=1/fDet;return kInv[0]*=fInvDet,kInv[1]*=fInvDet,kInv[2]*=fInvDet,kInv[3]*=fInvDet,kInv[4]*=fInvDet,kInv[5]*=fInvDet,kInv[6]*=fInvDet,kInv[7]*=fInvDet,kInv[8]*=fInvDet,kInv[9]*=fInvDet,kInv[10]*=fInvDet,kInv[11]*=fInvDet,kInv[12]*=fInvDet,kInv[13]*=fInvDet,kInv[14]*=fInvDet,kInv[15]*=fInvDet,this.elements=kInv.slice(),!0},toString:function(){for(var str="",i=0;15>i;i++)str+=this.elements[i]+", ";return str+=this.elements[15]},print:function(){var digits=printMatrixHelper(this.elements),output=""+p.nfs(this.elements[0],digits,4)+" "+p.nfs(this.elements[1],digits,4)+" "+p.nfs(this.elements[2],digits,4)+" "+p.nfs(this.elements[3],digits,4)+"\n"+p.nfs(this.elements[4],digits,4)+" "+p.nfs(this.elements[5],digits,4)+" "+p.nfs(this.elements[6],digits,4)+" "+p.nfs(this.elements[7],digits,4)+"\n"+p.nfs(this.elements[8],digits,4)+" "+p.nfs(this.elements[9],digits,4)+" "+p.nfs(this.elements[10],digits,4)+" "+p.nfs(this.elements[11],digits,4)+"\n"+p.nfs(this.elements[12],digits,4)+" "+p.nfs(this.elements[13],digits,4)+" "+p.nfs(this.elements[14],digits,4)+" "+p.nfs(this.elements[15],digits,4)+"\n\n";p.println(output)},invTranslate:function(tx,ty,tz){this.preApply(1,0,0,-tx,0,1,0,-ty,0,0,1,-tz,0,0,0,1)},invRotateX:function(angle){var c=Math.cos(-angle),s=Math.sin(-angle);this.preApply([1,0,0,0,0,c,-s,0,0,s,c,0,0,0,0,1])},invRotateY:function(angle){var c=Math.cos(-angle),s=Math.sin(-angle);this.preApply([c,0,s,0,0,1,0,0,-s,0,c,0,0,0,0,1])},invRotateZ:function(angle){var c=Math.cos(-angle),s=Math.sin(-angle);this.preApply([c,-s,0,0,s,c,0,0,0,0,1,0,0,0,0,1])},invScale:function(x,y,z){this.preApply([1/x,0,0,0,0,1/y,0,0,0,0,1/z,0,0,0,0,1])}};var PMatrixStack=p.PMatrixStack=function(){this.matrixStack=[]};PMatrixStack.prototype.load=function(){var tmpMatrix=drawing.$newPMatrix();1===arguments.length?tmpMatrix.set(arguments[0]):tmpMatrix.set(arguments),this.matrixStack.push(tmpMatrix)},Drawing2D.prototype.$newPMatrix=function(){return new PMatrix2D},Drawing3D.prototype.$newPMatrix=function(){return new PMatrix3D},PMatrixStack.prototype.push=function(){this.matrixStack.push(this.peek())},PMatrixStack.prototype.pop=function(){return this.matrixStack.pop()},PMatrixStack.prototype.peek=function(){var tmpMatrix=drawing.$newPMatrix();return tmpMatrix.set(this.matrixStack[this.matrixStack.length-1]),tmpMatrix},PMatrixStack.prototype.mult=function(matrix){this.matrixStack[this.matrixStack.length-1].apply(matrix)},p.split=function(str,delim){return str.split(delim)},p.splitTokens=function(str,tokens){if(tokens===undef)return str.split(/\s+/g);var i,c,chars=tokens.split(/()/g),buffer="",len=str.length,tokenized=[];for(i=0;len>i;i++)c=str[i],chars.indexOf(c)>-1?(""!==buffer&&tokenized.push(buffer),buffer=""):buffer+=c;return""!==buffer&&tokenized.push(buffer),tokenized},p.append=function(array,element){return array[array.length]=element,array},p.concat=function(array1,array2){return array1.concat(array2)},p.sort=function(array,numElem){var ret=[];if(array.length>0){for(var elemsToCopy=numElem>0?numElem:array.length,i=0;elemsToCopy>i;i++)ret.push(array[i]);if("string"==typeof array[0]?ret.sort():ret.sort(function(a,b){return a-b}),numElem>0)for(var j=ret.length;j<array.length;j++)ret.push(array[j])}return ret},p.splice=function(array,value,index){if(0===value.length)return array;if(value instanceof Array)for(var i=0,j=index;i<value.length;j++,i++)array.splice(j,0,value[i]);else array.splice(index,0,value);return array},p.subset=function(array,offset,length){var end=length!==undef?offset+length:array.length;return array.slice(offset,end)},p.join=function(array,seperator){return array.join(seperator)},p.shorten=function(ary){for(var newary=[],len=ary.length,i=0;len>i;i++)newary[i]=ary[i];return newary.pop(),newary},p.expand=function(ary,targetSize){var temp=ary.slice(0),newSize=targetSize||2*ary.length;return temp.length=newSize,temp},p.arrayCopy=function(){var src,dest,length,srcPos=0,destPos=0;2===arguments.length?(src=arguments[0],dest=arguments[1],length=src.length):3===arguments.length?(src=arguments[0],dest=arguments[1],length=arguments[2]):5===arguments.length&&(src=arguments[0],srcPos=arguments[1],dest=arguments[2],destPos=arguments[3],length=arguments[4]);for(var i=srcPos,j=destPos;length+srcPos>i;i++,j++){if(dest[j]===undef)throw"array index out of bounds exception";dest[j]=src[i]}},p.reverse=function(array){return array.reverse()},p.mix=function(a,b,f){return a+((b-a)*f>>8)},p.peg=function(n){return 0>n?0:n>255?255:n},p.modes=function(){function applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb){var a=min(((4278190080&c1)>>>24)+f,255)<<24,r=ar+((cr-ar)*f>>8);r=(0>r?0:r>255?255:r)<<16;var g=ag+((cg-ag)*f>>8);g=(0>g?0:g>255?255:g)<<8;var b=ab+((cb-ab)*f>>8);return b=0>b?0:b>255?255:b,a|r|g|b}var ALPHA_MASK=4278190080,RED_MASK=16711680,GREEN_MASK=65280,BLUE_MASK=255,min=Math.min,max=Math.max;return{replace:function(c1,c2){return c2},blend:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=c1&RED_MASK,ag=c1&GREEN_MASK,ab=c1&BLUE_MASK,br=c2&RED_MASK,bg=c2&GREEN_MASK,bb=c2&BLUE_MASK;return min(((c1&ALPHA_MASK)>>>24)+f,255)<<24|ar+((br-ar)*f>>8)&RED_MASK|ag+((bg-ag)*f>>8)&GREEN_MASK|ab+((bb-ab)*f>>8)&BLUE_MASK},add:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24;return min(((c1&ALPHA_MASK)>>>24)+f,255)<<24|min((c1&RED_MASK)+((c2&RED_MASK)>>8)*f,RED_MASK)&RED_MASK|min((c1&GREEN_MASK)+((c2&GREEN_MASK)>>8)*f,GREEN_MASK)&GREEN_MASK|min((c1&BLUE_MASK)+((c2&BLUE_MASK)*f>>8),BLUE_MASK)},subtract:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24;return min(((c1&ALPHA_MASK)>>>24)+f,255)<<24|max((c1&RED_MASK)-((c2&RED_MASK)>>8)*f,GREEN_MASK)&RED_MASK|max((c1&GREEN_MASK)-((c2&GREEN_MASK)>>8)*f,BLUE_MASK)&GREEN_MASK|max((c1&BLUE_MASK)-((c2&BLUE_MASK)*f>>8),0)},lightest:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24;return min(((c1&ALPHA_MASK)>>>24)+f,255)<<24|max(c1&RED_MASK,((c2&RED_MASK)>>8)*f)&RED_MASK|max(c1&GREEN_MASK,((c2&GREEN_MASK)>>8)*f)&GREEN_MASK|max(c1&BLUE_MASK,(c2&BLUE_MASK)*f>>8)},darkest:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=c1&RED_MASK,ag=c1&GREEN_MASK,ab=c1&BLUE_MASK,br=min(c1&RED_MASK,((c2&RED_MASK)>>8)*f),bg=min(c1&GREEN_MASK,((c2&GREEN_MASK)>>8)*f),bb=min(c1&BLUE_MASK,(c2&BLUE_MASK)*f>>8);return min(((c1&ALPHA_MASK)>>>24)+f,255)<<24|ar+((br-ar)*f>>8)&RED_MASK|ag+((bg-ag)*f>>8)&GREEN_MASK|ab+((bb-ab)*f>>8)&BLUE_MASK},difference:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=(c1&RED_MASK)>>16,ag=(c1&GREEN_MASK)>>8,ab=c1&BLUE_MASK,br=(c2&RED_MASK)>>16,bg=(c2&GREEN_MASK)>>8,bb=c2&BLUE_MASK,cr=ar>br?ar-br:br-ar,cg=ag>bg?ag-bg:bg-ag,cb=ab>bb?ab-bb:bb-ab;return applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb)},exclusion:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=(c1&RED_MASK)>>16,ag=(c1&GREEN_MASK)>>8,ab=c1&BLUE_MASK,br=(c2&RED_MASK)>>16,bg=(c2&GREEN_MASK)>>8,bb=c2&BLUE_MASK,cr=ar+br-(ar*br>>7),cg=ag+bg-(ag*bg>>7),cb=ab+bb-(ab*bb>>7);return applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb)},multiply:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=(c1&RED_MASK)>>16,ag=(c1&GREEN_MASK)>>8,ab=c1&BLUE_MASK,br=(c2&RED_MASK)>>16,bg=(c2&GREEN_MASK)>>8,bb=c2&BLUE_MASK,cr=ar*br>>8,cg=ag*bg>>8,cb=ab*bb>>8;return applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb)},screen:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=(c1&RED_MASK)>>16,ag=(c1&GREEN_MASK)>>8,ab=c1&BLUE_MASK,br=(c2&RED_MASK)>>16,bg=(c2&GREEN_MASK)>>8,bb=c2&BLUE_MASK,cr=255-((255-ar)*(255-br)>>8),cg=255-((255-ag)*(255-bg)>>8),cb=255-((255-ab)*(255-bb)>>8);return applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb)},hard_light:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=(c1&RED_MASK)>>16,ag=(c1&GREEN_MASK)>>8,ab=c1&BLUE_MASK,br=(c2&RED_MASK)>>16,bg=(c2&GREEN_MASK)>>8,bb=c2&BLUE_MASK,cr=128>br?ar*br>>7:255-((255-ar)*(255-br)>>7),cg=128>bg?ag*bg>>7:255-((255-ag)*(255-bg)>>7),cb=128>bb?ab*bb>>7:255-((255-ab)*(255-bb)>>7);return applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb)},soft_light:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=(c1&RED_MASK)>>16,ag=(c1&GREEN_MASK)>>8,ab=c1&BLUE_MASK,br=(c2&RED_MASK)>>16,bg=(c2&GREEN_MASK)>>8,bb=c2&BLUE_MASK,cr=(ar*br>>7)+(ar*ar>>8)-(ar*ar*br>>15),cg=(ag*bg>>7)+(ag*ag>>8)-(ag*ag*bg>>15),cb=(ab*bb>>7)+(ab*ab>>8)-(ab*ab*bb>>15);return applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb)},overlay:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=(c1&RED_MASK)>>16,ag=(c1&GREEN_MASK)>>8,ab=c1&BLUE_MASK,br=(c2&RED_MASK)>>16,bg=(c2&GREEN_MASK)>>8,bb=c2&BLUE_MASK,cr=128>ar?ar*br>>7:255-((255-ar)*(255-br)>>7),cg=128>ag?ag*bg>>7:255-((255-ag)*(255-bg)>>7),cb=128>ab?ab*bb>>7:255-((255-ab)*(255-bb)>>7);return applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb)},dodge:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=(c1&RED_MASK)>>16,ag=(c1&GREEN_MASK)>>8,ab=c1&BLUE_MASK,br=(c2&RED_MASK)>>16,bg=(c2&GREEN_MASK)>>8,bb=c2&BLUE_MASK,cr=255;255!==br&&(cr=(ar<<8)/(255-br),cr=0>cr?0:cr>255?255:cr);var cg=255;255!==bg&&(cg=(ag<<8)/(255-bg),cg=0>cg?0:cg>255?255:cg);var cb=255;return 255!==bb&&(cb=(ab<<8)/(255-bb),cb=0>cb?0:cb>255?255:cb),applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb)},burn:function(c1,c2){var f=(c2&ALPHA_MASK)>>>24,ar=(c1&RED_MASK)>>16,ag=(c1&GREEN_MASK)>>8,ab=c1&BLUE_MASK,br=(c2&RED_MASK)>>16,bg=(c2&GREEN_MASK)>>8,bb=c2&BLUE_MASK,cr=0;0!==br&&(cr=(255-ar<<8)/br,cr=255-(0>cr?0:cr>255?255:cr));var cg=0;0!==bg&&(cg=(255-ag<<8)/bg,cg=255-(0>cg?0:cg>255?255:cg));var cb=0;return 0!==bb&&(cb=(255-ab<<8)/bb,cb=255-(0>cb?0:cb>255?255:cb)),applyMode(c1,f,ar,ag,ab,br,bg,bb,cr,cg,cb)}}}(),p.color=function(aValue1,aValue2,aValue3,aValue4){return aValue1!==undef&&aValue2!==undef&&aValue3!==undef&&aValue4!==undef?color$4(aValue1,aValue2,aValue3,aValue4):aValue1!==undef&&aValue2!==undef&&aValue3!==undef?color$4(aValue1,aValue2,aValue3,colorModeA):aValue1!==undef&&aValue2!==undef?color$2(aValue1,aValue2):"number"==typeof aValue1?color$1(aValue1):color$4(colorModeX,colorModeY,colorModeZ,colorModeA)},p.color.toString=function(colorInt){return"rgba("+(colorInt>>16&255)+","+(colorInt>>8&255)+","+(255&colorInt)+","+(colorInt>>24&255)/255+")"},p.color.toInt=function(r,g,b,a){return a<<24&4278190080|r<<16&16711680|g<<8&65280|255&b},p.color.toArray=function(colorInt){return[colorInt>>16&255,colorInt>>8&255,255&colorInt,colorInt>>24&255]},p.color.toGLArray=function(colorInt){return[((16711680&colorInt)>>>16)/255,(colorInt>>8&255)/255,(255&colorInt)/255,(colorInt>>24&255)/255]},p.color.toRGB=function(h,s,b){h=h>colorModeX?colorModeX:h,s=s>colorModeY?colorModeY:s,b=b>colorModeZ?colorModeZ:b,h=h/colorModeX*360,s=s/colorModeY*100,b=b/colorModeZ*100;var br=Math.round(b/100*255);if(0===s)return[br,br,br];var hue=h%360,f=hue%60,p=Math.round(b*(100-s)/1e4*255),q=Math.round(b*(6e3-s*f)/6e5*255),t=Math.round(b*(6e3-s*(60-f))/6e5*255);switch(Math.floor(hue/60)){case 0:return[br,t,p];case 1:return[q,br,p];case 2:return[p,br,t];case 3:return[p,q,br];case 4:return[t,p,br];case 5:return[br,p,q]}},p.brightness=function(colInt){return colorToHSB(colInt)[2]},p.saturation=function(colInt){return colorToHSB(colInt)[1]},p.hue=function(colInt){return colorToHSB(colInt)[0]},p.red=function(aColor){return(aColor>>16&255)/255*colorModeX},p.green=function(aColor){return((65280&aColor)>>>8)/255*colorModeY},p.blue=function(aColor){return(255&aColor)/255*colorModeZ},p.alpha=function(aColor){return(aColor>>24&255)/255*colorModeA},p.lerpColor=function(c1,c2,amt){var r,g,b,a,r1,g1,b1,a1,r2,g2,b2,a2,hsb1,hsb2,rgb,h,s,colorBits1=p.color(c1),colorBits2=p.color(c2);return 3===curColorMode?(hsb1=colorToHSB(colorBits1),a1=(colorBits1>>24&255)/colorModeA,hsb2=colorToHSB(colorBits2),a2=((4278190080&colorBits2)>>>24)/colorModeA,
h=p.lerp(hsb1[0],hsb2[0],amt),s=p.lerp(hsb1[1],hsb2[1],amt),b=p.lerp(hsb1[2],hsb2[2],amt),rgb=p.color.toRGB(h,s,b),a=p.lerp(a1,a2,amt)*colorModeA,a<<24&4278190080|(255&rgb[0])<<16|(255&rgb[1])<<8|255&rgb[2]):(r1=colorBits1>>16&255,g1=colorBits1>>8&255,b1=255&colorBits1,a1=(colorBits1>>24&255)/colorModeA,r2=(16711680&colorBits2)>>>16,g2=colorBits2>>8&255,b2=255&colorBits2,a2=(colorBits2>>24&255)/colorModeA,r=0|p.lerp(r1,r2,amt),g=0|p.lerp(g1,g2,amt),b=0|p.lerp(b1,b2,amt),a=p.lerp(a1,a2,amt)*colorModeA,a<<24&4278190080|r<<16&16711680|g<<8&65280|255&b)},p.colorMode=function(){curColorMode=arguments[0],arguments.length>1&&(colorModeX=arguments[1],colorModeY=arguments[2]||arguments[1],colorModeZ=arguments[3]||arguments[1],colorModeA=arguments[4]||arguments[1])},p.blendColor=function(c1,c2,mode){return 0===mode?p.modes.replace(c1,c2):1===mode?p.modes.blend(c1,c2):2===mode?p.modes.add(c1,c2):4===mode?p.modes.subtract(c1,c2):8===mode?p.modes.lightest(c1,c2):16===mode?p.modes.darkest(c1,c2):32===mode?p.modes.difference(c1,c2):64===mode?p.modes.exclusion(c1,c2):128===mode?p.modes.multiply(c1,c2):256===mode?p.modes.screen(c1,c2):1024===mode?p.modes.hard_light(c1,c2):2048===mode?p.modes.soft_light(c1,c2):512===mode?p.modes.overlay(c1,c2):4096===mode?p.modes.dodge(c1,c2):8192===mode?p.modes.burn(c1,c2):void 0},p.printMatrix=function(){modelView.print()},Drawing2D.prototype.translate=function(x,y){modelView.translate(x,y),modelViewInv.invTranslate(x,y),curContext.translate(x,y)},Drawing3D.prototype.translate=function(x,y,z){modelView.translate(x,y,z),modelViewInv.invTranslate(x,y,z)},Drawing2D.prototype.scale=function(x,y){modelView.scale(x,y),modelViewInv.invScale(x,y),curContext.scale(x,y||x)},Drawing3D.prototype.scale=function(x,y,z){modelView.scale(x,y,z),modelViewInv.invScale(x,y,z)},Drawing2D.prototype.transform=function(pmatrix){var e=pmatrix.array();curContext.transform(e[0],e[3],e[1],e[4],e[2],e[5])},Drawing3D.prototype.transformm=function(pmatrix3d){throw"p.transform is currently not supported in 3D mode"},Drawing2D.prototype.pushMatrix=function(){userMatrixStack.load(modelView),userReverseMatrixStack.load(modelViewInv),saveContext()},Drawing3D.prototype.pushMatrix=function(){userMatrixStack.load(modelView),userReverseMatrixStack.load(modelViewInv)},Drawing2D.prototype.popMatrix=function(){modelView.set(userMatrixStack.pop()),modelViewInv.set(userReverseMatrixStack.pop()),restoreContext()},Drawing3D.prototype.popMatrix=function(){modelView.set(userMatrixStack.pop()),modelViewInv.set(userReverseMatrixStack.pop())},Drawing2D.prototype.resetMatrix=function(){modelView.reset(),modelViewInv.reset(),curContext.setTransform(1,0,0,1,0,0)},Drawing3D.prototype.resetMatrix=function(){modelView.reset(),modelViewInv.reset()},DrawingShared.prototype.applyMatrix=function(){var a=arguments;modelView.apply(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]),modelViewInv.invApply(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])},Drawing2D.prototype.applyMatrix=function(){for(var a=arguments,cnt=a.length;16>cnt;cnt++)a[cnt]=0;a[10]=a[15]=1,DrawingShared.prototype.applyMatrix.apply(this,a)},p.rotateX=function(angleInRadians){modelView.rotateX(angleInRadians),modelViewInv.invRotateX(angleInRadians)},Drawing2D.prototype.rotateZ=function(){throw"rotateZ() is not supported in 2D mode. Use rotate(float) instead."},Drawing3D.prototype.rotateZ=function(angleInRadians){modelView.rotateZ(angleInRadians),modelViewInv.invRotateZ(angleInRadians)},p.rotateY=function(angleInRadians){modelView.rotateY(angleInRadians),modelViewInv.invRotateY(angleInRadians)},Drawing2D.prototype.rotate=function(angleInRadians){modelView.rotateZ(angleInRadians),modelViewInv.invRotateZ(angleInRadians),curContext.rotate(angleInRadians)},Drawing3D.prototype.rotate=function(angleInRadians){p.rotateZ(angleInRadians)},Drawing2D.prototype.shearX=function(angleInRadians){modelView.shearX(angleInRadians),curContext.transform(1,0,angleInRadians,1,0,0)},Drawing3D.prototype.shearX=function(angleInRadians){modelView.shearX(angleInRadians)},Drawing2D.prototype.shearY=function(angleInRadians){modelView.shearY(angleInRadians),curContext.transform(1,angleInRadians,0,1,0,0)},Drawing3D.prototype.shearY=function(angleInRadians){modelView.shearY(angleInRadians)},p.pushStyle=function(){saveContext(),p.pushMatrix();var newState={doFill:doFill,currentFillColor:currentFillColor,doStroke:doStroke,currentStrokeColor:currentStrokeColor,curTint:curTint,curRectMode:curRectMode,curColorMode:curColorMode,colorModeX:colorModeX,colorModeZ:colorModeZ,colorModeY:colorModeY,colorModeA:colorModeA,curTextFont:curTextFont,horizontalTextAlignment:horizontalTextAlignment,verticalTextAlignment:verticalTextAlignment,textMode:textMode,curFontName:curFontName,curTextSize:curTextSize,curTextAscent:curTextAscent,curTextDescent:curTextDescent,curTextLeading:curTextLeading};styleArray.push(newState)},p.popStyle=function(){var oldState=styleArray.pop();if(!oldState)throw"Too many popStyle() without enough pushStyle()";restoreContext(),p.popMatrix(),doFill=oldState.doFill,currentFillColor=oldState.currentFillColor,doStroke=oldState.doStroke,currentStrokeColor=oldState.currentStrokeColor,curTint=oldState.curTint,curRectMode=oldState.curRectMode,curColorMode=oldState.curColorMode,colorModeX=oldState.colorModeX,colorModeZ=oldState.colorModeZ,colorModeY=oldState.colorModeY,colorModeA=oldState.colorModeA,curTextFont=oldState.curTextFont,curFontName=oldState.curFontName,curTextSize=oldState.curTextSize,horizontalTextAlignment=oldState.horizontalTextAlignment,verticalTextAlignment=oldState.verticalTextAlignment,textMode=oldState.textMode,curTextAscent=oldState.curTextAscent,curTextDescent=oldState.curTextDescent,curTextLeading=oldState.curTextLeading},p.year=function(){return(new Date).getFullYear()},p.month=function(){return(new Date).getMonth()+1},p.day=function(){return(new Date).getDate()},p.hour=function(){return(new Date).getHours()},p.minute=function(){return(new Date).getMinutes()},p.second=function(){return(new Date).getSeconds()},p.millis=function(){return Date.now()-start},Drawing2D.prototype.redraw=function(){redrawHelper(),curContext.lineWidth=lineWidth;var pmouseXLastEvent=p.pmouseX,pmouseYLastEvent=p.pmouseY;p.pmouseX=pmouseXLastFrame,p.pmouseY=pmouseYLastFrame,saveContext(),p.draw(),restoreContext(),pmouseXLastFrame=p.mouseX,pmouseYLastFrame=p.mouseY,p.pmouseX=pmouseXLastEvent,p.pmouseY=pmouseYLastEvent},Drawing3D.prototype.redraw=function(){redrawHelper();var pmouseXLastEvent=p.pmouseX,pmouseYLastEvent=p.pmouseY;p.pmouseX=pmouseXLastFrame,p.pmouseY=pmouseYLastFrame,curContext.clear(curContext.DEPTH_BUFFER_BIT),curContextCache={attributes:{},locations:{}},p.noLights(),p.lightFalloff(1,0,0),p.shininess(1),p.ambient(255,255,255),p.specular(0,0,0),p.emissive(0,0,0),p.camera(),p.draw(),pmouseXLastFrame=p.mouseX,pmouseYLastFrame=p.mouseY,p.pmouseX=pmouseXLastEvent,p.pmouseY=pmouseYLastEvent},p.noLoop=function(){doLoop=!1,loopStarted=!1,clearInterval(looping),curSketch.onPause()},p.loop=function(){loopStarted||(timeSinceLastFPS=Date.now(),framesSinceLastFPS=0,looping=window.setInterval(function(){try{curSketch.onFrameStart(),p.redraw(),curSketch.onFrameEnd()}catch(e_loop){throw window.clearInterval(looping),e_loop}},curMsPerFrame),doLoop=!0,loopStarted=!0,curSketch.onLoop())},p.frameRate=function(aRate){curFrameRate=aRate,curMsPerFrame=1e3/curFrameRate,doLoop&&(p.noLoop(),p.loop())};var eventHandlers=[];p.exit=function(){window.clearInterval(looping),removeInstance(p.externals.canvas.id),delete curElement.onmousedown;for(var lib in Processing.lib)Processing.lib.hasOwnProperty(lib)&&Processing.lib[lib].hasOwnProperty("detach")&&Processing.lib[lib].detach(p);for(var i=eventHandlers.length;i--;)detachEventHandler(eventHandlers[i]);curSketch.onExit()},p.cursor=function(){if(arguments.length>1||1===arguments.length&&arguments[0]instanceof p.PImage){var x,y,image=arguments[0];if(arguments.length>=3){if(x=arguments[1],y=arguments[2],0>x||0>y||y>=image.height||x>=image.width)throw"x and y must be non-negative and less than the dimensions of the image"}else x=image.width>>>1,y=image.height>>>1;var imageDataURL=image.toDataURL(),style='url("'+imageDataURL+'") '+x+" "+y+", default";curCursor=curElement.style.cursor=style}else if(1===arguments.length){var mode=arguments[0];curCursor=curElement.style.cursor=mode}else curCursor=curElement.style.cursor=oldCursor},p.noCursor=function(){curCursor=curElement.style.cursor=PConstants.NOCURSOR},p.link=function(href,target){target!==undef?window.open(href,target):window.location=href},p.beginDraw=nop,p.endDraw=nop,Drawing2D.prototype.toImageData=function(x,y,w,h){return x=x!==undef?x:0,y=y!==undef?y:0,w=w!==undef?w:p.width,h=h!==undef?h:p.height,curContext.getImageData(x,y,w,h)},Drawing3D.prototype.toImageData=function(x,y,w,h){x=x!==undef?x:0,y=y!==undef?y:0,w=w!==undef?w:p.width,h=h!==undef?h:p.height;var c=document.createElement("canvas"),ctx=c.getContext("2d"),obj=ctx.createImageData(w,h),uBuff=new Uint8Array(w*h*4);curContext.readPixels(x,y,w,h,curContext.RGBA,curContext.UNSIGNED_BYTE,uBuff);for(var i=0,ul=uBuff.length,obj_data=obj.data;ul>i;i++)obj_data[i]=uBuff[(h-1-Math.floor(i/4/w))*w*4+i%(4*w)];return obj},p.status=function(text){window.status=text},p.binary=function(num,numBits){var bit;if(numBits>0)bit=numBits;else if(num instanceof Char)bit=16,num|=0;else for(bit=32;bit>1&&!(num>>>bit-1&1);)bit--;for(var result="";bit>0;)result+=num>>>--bit&1?"1":"0";return result},p.unbinary=function(binaryString){for(var i=binaryString.length-1,mask=1,result=0;i>=0;){var ch=binaryString[i--];if("0"!==ch&&"1"!==ch)throw"the value passed into unbinary was not an 8 bit binary number";"1"===ch&&(result+=mask),mask<<=1}return result},p.nf=function(value,leftDigits,rightDigits){return nfCore(value,"","-",leftDigits,rightDigits)},p.nfs=function(value,leftDigits,rightDigits){return nfCore(value," ","-",leftDigits,rightDigits)},p.nfp=function(value,leftDigits,rightDigits){return nfCore(value,"+","-",leftDigits,rightDigits)},p.nfc=function(value,leftDigits,rightDigits){return nfCore(value,"","-",leftDigits,rightDigits,",")};var decimalToHex=function(d,padding){padding=padding===undef||null===padding?padding=8:padding,0>d&&(d=4294967295+d+1);for(var hex=Number(d).toString(16).toUpperCase();hex.length<padding;)hex="0"+hex;return hex.length>=padding&&(hex=hex.substring(hex.length-padding,hex.length)),hex};p.hex=function(value,len){return 1===arguments.length&&(len=value instanceof Char?4:8),decimalToHex(value,len)},p.unhex=function(hex){if(hex instanceof Array){for(var arr=[],i=0;i<hex.length;i++)arr.push(unhexScalar(hex[i]));return arr}return unhexScalar(hex)},p.loadStrings=function(filename){if(localStorage[filename])return localStorage[filename].split("\n");var filecontent=ajax(filename);return"string"!=typeof filecontent||""===filecontent?[]:(filecontent=filecontent.replace(/(\r\n?)/g,"\n").replace(/\n$/,""),filecontent.split("\n"))},p.saveStrings=function(filename,strings){localStorage[filename]=strings.join("\n")},p.loadBytes=function(url){for(var string=ajax(url),ret=[],i=0;i<string.length;i++)ret.push(string.charCodeAt(i));return ret},p.matchAll=function(aString,aRegExp){for(var latest,results=[],regexp=new RegExp(aRegExp,"g");null!==(latest=regexp.exec(aString));)results.push(latest),0===latest[0].length&&++regexp.lastIndex;return results.length>0?results:null},p.__contains=function(subject,subStr){return"string"!=typeof subject?subject.contains.apply(subject,removeFirstArgument(arguments)):null!==subject&&null!==subStr&&"string"==typeof subStr&&subject.indexOf(subStr)>-1},p.__replaceAll=function(subject,regex,replacement){return"string"!=typeof subject?subject.replaceAll.apply(subject,removeFirstArgument(arguments)):subject.replace(new RegExp(regex,"g"),replacement)},p.__replaceFirst=function(subject,regex,replacement){return"string"!=typeof subject?subject.replaceFirst.apply(subject,removeFirstArgument(arguments)):subject.replace(new RegExp(regex,""),replacement)},p.__replace=function(subject,what,replacement){if("string"!=typeof subject)return subject.replace.apply(subject,removeFirstArgument(arguments));if(what instanceof RegExp)return subject.replace(what,replacement);if("string"!=typeof what&&(what=what.toString()),""===what)return subject;var i=subject.indexOf(what);if(0>i)return subject;var j=0,result="";do result+=subject.substring(j,i)+replacement,j=i+what.length;while((i=subject.indexOf(what,j))>=0);return result+subject.substring(j)},p.__equals=function(subject,other){return subject.equals instanceof Function?subject.equals.apply(subject,removeFirstArgument(arguments)):subject.valueOf()===other.valueOf()},p.__equalsIgnoreCase=function(subject,other){return"string"!=typeof subject?subject.equalsIgnoreCase.apply(subject,removeFirstArgument(arguments)):subject.toLowerCase()===other.toLowerCase()},p.__toCharArray=function(subject){if("string"!=typeof subject)return subject.toCharArray.apply(subject,removeFirstArgument(arguments));for(var chars=[],i=0,len=subject.length;len>i;++i)chars[i]=new Char(subject.charAt(i));return chars},p.__split=function(subject,regex,limit){if("string"!=typeof subject)return subject.split.apply(subject,removeFirstArgument(arguments));var pattern=new RegExp(regex);if(limit===undef||1>limit)return subject.split(pattern);for(var pos,result=[],currSubject=subject;-1!==(pos=currSubject.search(pattern))&&result.length<limit-1;){var match=pattern.exec(currSubject).toString();result.push(currSubject.substring(0,pos)),currSubject=currSubject.substring(pos+match.length)}return(-1!==pos||""!==currSubject)&&result.push(currSubject),result},p.__codePointAt=function(subject,idx){var hi,low,code=subject.charCodeAt(idx);return code>=55296&&56319>=code?(hi=code,low=subject.charCodeAt(idx+1),1024*(hi-55296)+(low-56320)+65536):code},p.match=function(str,regexp){return str.match(regexp)},p.__matches=function(str,regexp){return new RegExp(regexp).test(str)},p.__startsWith=function(subject,prefix,toffset){return"string"!=typeof subject?subject.startsWith.apply(subject,removeFirstArgument(arguments)):(toffset=toffset||0,0>toffset||toffset>subject.length?!1:""===prefix||prefix===subject?!0:subject.indexOf(prefix)===toffset)},p.__endsWith=function(subject,suffix){if("string"!=typeof subject)return subject.endsWith.apply(subject,removeFirstArgument(arguments));var suffixLen=suffix?suffix.length:0;return""===suffix||suffix===subject?!0:subject.indexOf(suffix)===subject.length-suffixLen},p.__hashCode=function(subject){return subject.hashCode instanceof Function?subject.hashCode.apply(subject,removeFirstArgument(arguments)):virtHashCode(subject)},p.__printStackTrace=function(subject){p.println("Exception: "+subject.toString())};var logBuffer=[];p.println=function(message){var bufferLen=logBuffer.length;bufferLen&&(Processing.logger.log(logBuffer.join("")),logBuffer.length=0),0===arguments.length&&0===bufferLen?Processing.logger.log(""):0!==arguments.length&&Processing.logger.log(message)},p.print=function(message){logBuffer.push(message)},p.str=function(val){if(val instanceof Array){for(var arr=[],i=0;i<val.length;i++)arr.push(val[i].toString()+"");return arr}return val.toString()+""},p.trim=function(str){if(str instanceof Array){for(var arr=[],i=0;i<str.length;i++)arr.push(str[i].replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,""));return arr}return str.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,"")},p.parseBoolean=function(val){if(val instanceof Array){for(var ret=[],i=0;i<val.length;i++)ret.push(booleanScalar(val[i]));return ret}return booleanScalar(val)},p.parseByte=function(what){if(what instanceof Array){for(var bytes=[],i=0;i<what.length;i++)bytes.push(0-(128&what[i])|127&what[i]);return bytes}return 0-(128&what)|127&what},p.parseChar=function(key){if("number"==typeof key)return new Char(String.fromCharCode(65535&key));if(key instanceof Array){for(var ret=[],i=0;i<key.length;i++)ret.push(new Char(String.fromCharCode(65535&key[i])));return ret}throw"char() may receive only one argument of type int, byte, int[], or byte[]."},p.parseFloat=function(val){if(val instanceof Array){for(var ret=[],i=0;i<val.length;i++)ret.push(floatScalar(val[i]));return ret}return floatScalar(val)},p.parseInt=function(val,radix){if(val instanceof Array){for(var ret=[],i=0;i<val.length;i++)"string"!=typeof val[i]||/^\s*[+\-]?\d+\s*$/.test(val[i])?ret.push(intScalar(val[i],radix)):ret.push(0);return ret}return intScalar(val,radix)},p.__int_cast=function(val){return 0|val},p.__instanceof=function(obj,type){if("function"!=typeof type)throw"Function is expected as type argument for instanceof operator";if("string"==typeof obj)return type===Object||type===String;if(obj instanceof type)return!0;if("object"!=typeof obj||null===obj)return!1;var objType=obj.constructor;if(type.$isInterface){for(var interfaces=[];objType;)objType.$interfaces&&(interfaces=interfaces.concat(objType.$interfaces)),objType=objType.$base;for(;interfaces.length>0;){var i=interfaces.shift();if(i===type)return!0;i.$interfaces&&(interfaces=interfaces.concat(i.$interfaces))}return!1}for(;objType.hasOwnProperty("$base");)if(objType=objType.$base,objType===type)return!0;return!1},p.abs=Math.abs,p.ceil=Math.ceil,p.constrain=function(aNumber,aMin,aMax){return aNumber>aMax?aMax:aMin>aNumber?aMin:aNumber},p.dist=function(){var dx,dy,dz;return 4===arguments.length?(dx=arguments[0]-arguments[2],dy=arguments[1]-arguments[3],Math.sqrt(dx*dx+dy*dy)):6===arguments.length?(dx=arguments[0]-arguments[3],dy=arguments[1]-arguments[4],dz=arguments[2]-arguments[5],Math.sqrt(dx*dx+dy*dy+dz*dz)):void 0},p.exp=Math.exp,p.floor=Math.floor,p.lerp=function(value1,value2,amt){return(value2-value1)*amt+value1},p.log=Math.log,p.mag=function(a,b,c){return c?Math.sqrt(a*a+b*b+c*c):Math.sqrt(a*a+b*b)},p.map=function(value,istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((value-istart)/(istop-istart))},p.max=function(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[1]:arguments[0];var numbers=1===arguments.length?arguments[0]:arguments;if(!("length"in numbers&&numbers.length>0))throw"Non-empty array is expected";for(var max=numbers[0],count=numbers.length,i=1;count>i;++i)max<numbers[i]&&(max=numbers[i]);return max},p.min=function(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[0]:arguments[1];var numbers=1===arguments.length?arguments[0]:arguments;if(!("length"in numbers&&numbers.length>0))throw"Non-empty array is expected";for(var min=numbers[0],count=numbers.length,i=1;count>i;++i)min>numbers[i]&&(min=numbers[i]);return min},p.norm=function(aNumber,low,high){return(aNumber-low)/(high-low)},p.pow=Math.pow,p.round=Math.round,p.sq=function(aNumber){return aNumber*aNumber},p.sqrt=Math.sqrt,p.acos=Math.acos,p.asin=Math.asin,p.atan=Math.atan,p.atan2=Math.atan2,p.cos=Math.cos,p.degrees=function(aAngle){return 180*aAngle/Math.PI},p.radians=function(aAngle){return aAngle/180*Math.PI},p.sin=Math.sin,p.tan=Math.tan;var currentRandom=Math.random;p.random=function(){if(0===arguments.length)return currentRandom();if(1===arguments.length)return currentRandom()*arguments[0];var aMin=arguments[0],aMax=arguments[1];return currentRandom()*(aMax-aMin)+aMin},Marsaglia.createRandomized=function(){var now=new Date;return new Marsaglia(now/6e4&4294967295,4294967295&now)},p.randomSeed=function(seed){currentRandom=new Marsaglia(seed).nextDouble},p.Random=function(seed){var nextNextGaussian,random,haveNextNextGaussian=!1;this.nextGaussian=function(){if(haveNextNextGaussian)return haveNextNextGaussian=!1,nextNextGaussian;var v1,v2,s;do v1=2*random()-1,v2=2*random()-1,s=v1*v1+v2*v2;while(s>=1||0===s);var multiplier=Math.sqrt(-2*Math.log(s)/s);return nextNextGaussian=v2*multiplier,haveNextNextGaussian=!0,v1*multiplier},random=seed===undef?Math.random:new Marsaglia(seed).nextDouble};var noiseProfile={generator:undef,octaves:4,fallout:.5,seed:undef};p.noise=function(x,y,z){noiseProfile.generator===undef&&(noiseProfile.generator=new PerlinNoise(noiseProfile.seed));for(var generator=noiseProfile.generator,effect=1,k=1,sum=0,i=0;i<noiseProfile.octaves;++i){switch(effect*=noiseProfile.fallout,arguments.length){case 1:sum+=effect*(1+generator.noise1d(k*x))/2;break;case 2:sum+=effect*(1+generator.noise2d(k*x,k*y))/2;break;case 3:sum+=effect*(1+generator.noise3d(k*x,k*y,k*z))/2}k*=2}return sum},p.noiseDetail=function(octaves,fallout){noiseProfile.octaves=octaves,fallout!==undef&&(noiseProfile.fallout=fallout)},p.noiseSeed=function(seed){noiseProfile.seed=seed,noiseProfile.generator=undef},DrawingShared.prototype.size=function(aWidth,aHeight,aMode){doStroke&&p.stroke(0),doFill&&p.fill(255);var savedProperties={fillStyle:curContext.fillStyle,strokeStyle:curContext.strokeStyle,lineCap:curContext.lineCap,lineJoin:curContext.lineJoin};curElement.style.length>0&&(curElement.style.removeProperty("width"),curElement.style.removeProperty("height")),curElement.width=p.width=aWidth||100,curElement.height=p.height=aHeight||100;for(var prop in savedProperties)savedProperties.hasOwnProperty(prop)&&(curContext[prop]=savedProperties[prop]);p.textFont(curTextFont),p.background(),maxPixelsCached=Math.max(1e3,aWidth*aHeight*.05),p.externals.context=curContext;for(var i=0;720>i;i++)sinLUT[i]=p.sin(i*(Math.PI/180)*.5),cosLUT[i]=p.cos(i*(Math.PI/180)*.5)},Drawing2D.prototype.size=function(aWidth,aHeight,aMode){curContext===undef&&(curContext=curElement.getContext("2d"),userMatrixStack=new PMatrixStack,userReverseMatrixStack=new PMatrixStack,modelView=new PMatrix2D,modelViewInv=new PMatrix2D),DrawingShared.prototype.size.apply(this,arguments)},Drawing3D.prototype.size=function(){var size3DCalled=!1;return function(aWidth,aHeight,aMode){function getGLContext(canvas){for(var gl,ctxNames=["experimental-webgl","webgl","webkit-3d"],i=0,l=ctxNames.length;l>i&&!(gl=canvas.getContext(ctxNames[i],{antialias:!1,preserveDrawingBuffer:!0}));i++);return gl}if(size3DCalled)throw"Multiple calls to size() for 3D renders are not allowed.";size3DCalled=!0;try{curElement.width=p.width=aWidth||100,curElement.height=p.height=aHeight||100,curContext=getGLContext(curElement),canTex=curContext.createTexture(),textTex=curContext.createTexture()}catch(e_size){Processing.debug(e_size)}if(!curContext)throw"WebGL context is not supported on this browser.";curContext.viewport(0,0,curElement.width,curElement.height),curContext.enable(curContext.DEPTH_TEST),curContext.enable(curContext.BLEND),curContext.blendFunc(curContext.SRC_ALPHA,curContext.ONE_MINUS_SRC_ALPHA),programObject2D=createProgramObject(curContext,vertexShaderSrc2D,fragmentShaderSrc2D),programObjectUnlitShape=createProgramObject(curContext,vertexShaderSrcUnlitShape,fragmentShaderSrcUnlitShape),p.strokeWeight(1),programObject3D=createProgramObject(curContext,vertexShaderSrc3D,fragmentShaderSrc3D),curContext.useProgram(programObject3D),uniformi("usingTexture3d",programObject3D,"usingTexture",usingTexture),p.lightFalloff(1,0,0),p.shininess(1),p.ambient(255,255,255),p.specular(0,0,0),p.emissive(0,0,0),boxBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,boxBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,boxVerts,curContext.STATIC_DRAW),boxNormBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,boxNormBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,boxNorms,curContext.STATIC_DRAW),boxOutlineBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,boxOutlineBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,boxOutlineVerts,curContext.STATIC_DRAW),rectBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,rectBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,rectVerts,curContext.STATIC_DRAW),rectNormBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,rectNormBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,rectNorms,curContext.STATIC_DRAW),sphereBuffer=curContext.createBuffer(),lineBuffer=curContext.createBuffer(),fillBuffer=curContext.createBuffer(),fillColorBuffer=curContext.createBuffer(),strokeColorBuffer=curContext.createBuffer(),shapeTexVBO=curContext.createBuffer(),pointBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,pointBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array([0,0,0]),curContext.STATIC_DRAW),textBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,textBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),curContext.STATIC_DRAW),textureBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ARRAY_BUFFER,textureBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),curContext.STATIC_DRAW),indexBuffer=curContext.createBuffer(),curContext.bindBuffer(curContext.ELEMENT_ARRAY_BUFFER,indexBuffer),curContext.bufferData(curContext.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,2,3,0]),curContext.STATIC_DRAW),cam=new PMatrix3D,cameraInv=new PMatrix3D,modelView=new PMatrix3D,modelViewInv=new PMatrix3D,projection=new PMatrix3D,p.camera(),p.perspective(),userMatrixStack=new PMatrixStack,userReverseMatrixStack=new PMatrixStack,curveBasisMatrix=new PMatrix3D,curveToBezierMatrix=new PMatrix3D,curveDrawMatrix=new PMatrix3D,bezierDrawMatrix=new PMatrix3D,bezierBasisInverse=new PMatrix3D,bezierBasisMatrix=new PMatrix3D,bezierBasisMatrix.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0),DrawingShared.prototype.size.apply(this,arguments)}}(),Drawing2D.prototype.ambientLight=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.ambientLight=function(r,g,b,x,y,z){if(8===lightCount)throw"can only create 8 lights";var pos=new PVector(x,y,z),view=new PMatrix3D;view.scale(1,-1,1),view.apply(modelView.array()),view.mult(pos,pos);var col=color$4(r,g,b,0),normalizedCol=[(col>>16&255)/255,(col>>8&255)/255,(255&col)/255];curContext.useProgram(programObject3D),uniformf("uLights.color.3d."+lightCount,programObject3D,"uLights"+lightCount+".color",normalizedCol),uniformf("uLights.position.3d."+lightCount,programObject3D,"uLights"+lightCount+".position",pos.array()),uniformi("uLights.type.3d."+lightCount,programObject3D,"uLights"+lightCount+".type",0),uniformi("uLightCount3d",programObject3D,"uLightCount",++lightCount)},Drawing2D.prototype.directionalLight=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.directionalLight=function(r,g,b,nx,ny,nz){if(8===lightCount)throw"can only create 8 lights";curContext.useProgram(programObject3D);var mvm=new PMatrix3D;mvm.scale(1,-1,1),mvm.apply(modelView.array()),mvm=mvm.array();var dir=[mvm[0]*nx+mvm[4]*ny+mvm[8]*nz,mvm[1]*nx+mvm[5]*ny+mvm[9]*nz,mvm[2]*nx+mvm[6]*ny+mvm[10]*nz],col=color$4(r,g,b,0),normalizedCol=[(col>>16&255)/255,(col>>8&255)/255,(255&col)/255];uniformf("uLights.color.3d."+lightCount,programObject3D,"uLights"+lightCount+".color",normalizedCol),uniformf("uLights.position.3d."+lightCount,programObject3D,"uLights"+lightCount+".position",dir),uniformi("uLights.type.3d."+lightCount,programObject3D,"uLights"+lightCount+".type",1),uniformi("uLightCount3d",programObject3D,"uLightCount",++lightCount)},Drawing2D.prototype.lightFalloff=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.lightFalloff=function(constant,linear,quadratic){curContext.useProgram(programObject3D),uniformf("uFalloff3d",programObject3D,"uFalloff",[constant,linear,quadratic])},Drawing2D.prototype.lightSpecular=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.lightSpecular=function(r,g,b){var col=color$4(r,g,b,0),normalizedCol=[(col>>16&255)/255,(col>>8&255)/255,(255&col)/255];curContext.useProgram(programObject3D),uniformf("uSpecular3d",programObject3D,"uSpecular",normalizedCol)},p.lights=function(){p.ambientLight(128,128,128),p.directionalLight(128,128,128,0,0,-1),p.lightFalloff(1,0,0),p.lightSpecular(0,0,0)},Drawing2D.prototype.pointLight=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.pointLight=function(r,g,b,x,y,z){if(8===lightCount)throw"can only create 8 lights";var pos=new PVector(x,y,z),view=new PMatrix3D;view.scale(1,-1,1),view.apply(modelView.array()),view.mult(pos,pos);var col=color$4(r,g,b,0),normalizedCol=[(col>>16&255)/255,(col>>8&255)/255,(255&col)/255];curContext.useProgram(programObject3D),uniformf("uLights.color.3d."+lightCount,programObject3D,"uLights"+lightCount+".color",normalizedCol),uniformf("uLights.position.3d."+lightCount,programObject3D,"uLights"+lightCount+".position",pos.array()),uniformi("uLights.type.3d."+lightCount,programObject3D,"uLights"+lightCount+".type",2),uniformi("uLightCount3d",programObject3D,"uLightCount",++lightCount)},Drawing2D.prototype.noLights=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.noLights=function(){lightCount=0,curContext.useProgram(programObject3D),uniformi("uLightCount3d",programObject3D,"uLightCount",lightCount)},Drawing2D.prototype.spotLight=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.spotLight=function(r,g,b,x,y,z,nx,ny,nz,angle,concentration){if(8===lightCount)throw"can only create 8 lights";curContext.useProgram(programObject3D);var pos=new PVector(x,y,z),mvm=new PMatrix3D;mvm.scale(1,-1,1),mvm.apply(modelView.array()),mvm.mult(pos,pos),mvm=mvm.array();var dir=[mvm[0]*nx+mvm[4]*ny+mvm[8]*nz,mvm[1]*nx+mvm[5]*ny+mvm[9]*nz,mvm[2]*nx+mvm[6]*ny+mvm[10]*nz],col=color$4(r,g,b,0),normalizedCol=[(col>>16&255)/255,(col>>8&255)/255,(255&col)/255];uniformf("uLights.color.3d."+lightCount,programObject3D,"uLights"+lightCount+".color",normalizedCol),uniformf("uLights.position.3d."+lightCount,programObject3D,"uLights"+lightCount+".position",pos.array()),uniformf("uLights.direction.3d."+lightCount,programObject3D,"uLights"+lightCount+".direction",dir),uniformf("uLights.concentration.3d."+lightCount,programObject3D,"uLights"+lightCount+".concentration",concentration),uniformf("uLights.angle.3d."+lightCount,programObject3D,"uLights"+lightCount+".angle",angle),uniformi("uLights.type.3d."+lightCount,programObject3D,"uLights"+lightCount+".type",3),uniformi("uLightCount3d",programObject3D,"uLightCount",++lightCount)},Drawing2D.prototype.beginCamera=function(){throw"beginCamera() is not available in 2D mode"},Drawing3D.prototype.beginCamera=function(){if(manipulatingCamera)throw"You cannot call beginCamera() again before calling endCamera()";manipulatingCamera=!0,modelView=cameraInv,modelViewInv=cam},Drawing2D.prototype.endCamera=function(){throw"endCamera() is not available in 2D mode"},Drawing3D.prototype.endCamera=function(){if(!manipulatingCamera)throw"You cannot call endCamera() before calling beginCamera()";modelView.set(cam),modelViewInv.set(cameraInv),manipulatingCamera=!1},p.camera=function(eyeX,eyeY,eyeZ,centerX,centerY,centerZ,upX,upY,upZ){eyeX===undef&&(cameraX=p.width/2,cameraY=p.height/2,cameraZ=cameraY/Math.tan(cameraFOV/2),eyeX=cameraX,eyeY=cameraY,eyeZ=cameraZ,centerX=cameraX,centerY=cameraY,centerZ=0,upX=0,upY=1,upZ=0);var z=new PVector(eyeX-centerX,eyeY-centerY,eyeZ-centerZ),y=new PVector(upX,upY,upZ);z.normalize();var x=PVector.cross(y,z);y=PVector.cross(z,x),x.normalize(),y.normalize();var xX=x.x,xY=x.y,xZ=x.z,yX=y.x,yY=y.y,yZ=y.z,zX=z.x,zY=z.y,zZ=z.z;cam.set(xX,xY,xZ,0,yX,yY,yZ,0,zX,zY,zZ,0,0,0,0,1),cam.translate(-eyeX,-eyeY,-eyeZ),cameraInv.reset(),cameraInv.invApply(xX,xY,xZ,0,yX,yY,yZ,0,zX,zY,zZ,0,0,0,0,1),cameraInv.translate(eyeX,eyeY,eyeZ),modelView.set(cam),modelViewInv.set(cameraInv)},p.perspective=function(fov,aspect,near,far){0===arguments.length&&(cameraY=curElement.height/2,cameraZ=cameraY/Math.tan(cameraFOV/2),cameraNear=cameraZ/10,cameraFar=10*cameraZ,cameraAspect=p.width/p.height,fov=cameraFOV,aspect=cameraAspect,near=cameraNear,far=cameraFar);var yMax,yMin,xMax,xMin;yMax=near*Math.tan(fov/2),yMin=-yMax,xMax=yMax*aspect,xMin=yMin*aspect,p.frustum(xMin,xMax,yMin,yMax,near,far)},Drawing2D.prototype.frustum=function(){throw"Processing.js: frustum() is not supported in 2D mode"},Drawing3D.prototype.frustum=function(left,right,bottom,top,near,far){
frustumMode=!0,projection=new PMatrix3D,projection.set(2*near/(right-left),0,(right+left)/(right-left),0,0,2*near/(top-bottom),(top+bottom)/(top-bottom),0,0,0,-(far+near)/(far-near),-(2*far*near)/(far-near),0,0,-1,0);var proj=new PMatrix3D;proj.set(projection),proj.transpose(),curContext.useProgram(programObject2D),uniformMatrix("projection2d",programObject2D,"uProjection",!1,proj.array()),curContext.useProgram(programObject3D),uniformMatrix("projection3d",programObject3D,"uProjection",!1,proj.array()),curContext.useProgram(programObjectUnlitShape),uniformMatrix("uProjectionUS",programObjectUnlitShape,"uProjection",!1,proj.array())},p.ortho=function(left,right,bottom,top,near,far){0===arguments.length&&(left=0,right=p.width,bottom=0,top=p.height,near=-10,far=10);var x=2/(right-left),y=2/(top-bottom),z=-2/(far-near),tx=-(right+left)/(right-left),ty=-(top+bottom)/(top-bottom),tz=-(far+near)/(far-near);projection=new PMatrix3D,projection.set(x,0,0,tx,0,y,0,ty,0,0,z,tz,0,0,0,1);var proj=new PMatrix3D;proj.set(projection),proj.transpose(),curContext.useProgram(programObject2D),uniformMatrix("projection2d",programObject2D,"uProjection",!1,proj.array()),curContext.useProgram(programObject3D),uniformMatrix("projection3d",programObject3D,"uProjection",!1,proj.array()),curContext.useProgram(programObjectUnlitShape),uniformMatrix("uProjectionUS",programObjectUnlitShape,"uProjection",!1,proj.array()),frustumMode=!1},p.printProjection=function(){projection.print()},p.printCamera=function(){cam.print()},Drawing2D.prototype.box=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.box=function(w,h,d){h&&d||(h=d=w);var model=new PMatrix3D;model.scale(w,h,d);var view=new PMatrix3D;if(view.scale(1,-1,1),view.apply(modelView.array()),view.transpose(),doFill){if(curContext.useProgram(programObject3D),uniformMatrix("model3d",programObject3D,"uModel",!1,model.array()),uniformMatrix("view3d",programObject3D,"uView",!1,view.array()),curContext.enable(curContext.POLYGON_OFFSET_FILL),curContext.polygonOffset(1,1),uniformf("color3d",programObject3D,"uColor",fillStyle),lightCount>0){var v=new PMatrix3D;v.set(view);var m=new PMatrix3D;m.set(model),v.mult(m);var normalMatrix=new PMatrix3D;normalMatrix.set(v),normalMatrix.invert(),normalMatrix.transpose(),uniformMatrix("uNormalTransform3d",programObject3D,"uNormalTransform",!1,normalMatrix.array()),vertexAttribPointer("aNormal3d",programObject3D,"aNormal",3,boxNormBuffer)}else disableVertexAttribPointer("aNormal3d",programObject3D,"aNormal");vertexAttribPointer("aVertex3d",programObject3D,"aVertex",3,boxBuffer),disableVertexAttribPointer("aColor3d",programObject3D,"aColor"),disableVertexAttribPointer("aTexture3d",programObject3D,"aTexture"),curContext.drawArrays(curContext.TRIANGLES,0,boxVerts.length/3),curContext.disable(curContext.POLYGON_OFFSET_FILL)}lineWidth>0&&doStroke&&(curContext.useProgram(programObject2D),uniformMatrix("uModel2d",programObject2D,"uModel",!1,model.array()),uniformMatrix("uView2d",programObject2D,"uView",!1,view.array()),uniformf("uColor2d",programObject2D,"uColor",strokeStyle),uniformi("uIsDrawingText2d",programObject2D,"uIsDrawingText",!1),vertexAttribPointer("vertex2d",programObject2D,"aVertex",3,boxOutlineBuffer),disableVertexAttribPointer("aTextureCoord2d",programObject2D,"aTextureCoord"),curContext.drawArrays(curContext.LINES,0,boxOutlineVerts.length/3))};var initSphere=function(){var i;for(sphereVerts=[],i=0;sphereDetailU>i;i++)sphereVerts.push(0),sphereVerts.push(-1),sphereVerts.push(0),sphereVerts.push(sphereX[i]),sphereVerts.push(sphereY[i]),sphereVerts.push(sphereZ[i]);sphereVerts.push(0),sphereVerts.push(-1),sphereVerts.push(0),sphereVerts.push(sphereX[0]),sphereVerts.push(sphereY[0]),sphereVerts.push(sphereZ[0]);var v1,v11,v2,voff=0;for(i=2;sphereDetailV>i;i++){v1=v11=voff,voff+=sphereDetailU,v2=voff;for(var j=0;sphereDetailU>j;j++)sphereVerts.push(sphereX[v1]),sphereVerts.push(sphereY[v1]),sphereVerts.push(sphereZ[v1++]),sphereVerts.push(sphereX[v2]),sphereVerts.push(sphereY[v2]),sphereVerts.push(sphereZ[v2++]);v1=v11,v2=voff,sphereVerts.push(sphereX[v1]),sphereVerts.push(sphereY[v1]),sphereVerts.push(sphereZ[v1]),sphereVerts.push(sphereX[v2]),sphereVerts.push(sphereY[v2]),sphereVerts.push(sphereZ[v2])}for(i=0;sphereDetailU>i;i++)v2=voff+i,sphereVerts.push(sphereX[v2]),sphereVerts.push(sphereY[v2]),sphereVerts.push(sphereZ[v2]),sphereVerts.push(0),sphereVerts.push(1),sphereVerts.push(0);sphereVerts.push(sphereX[voff]),sphereVerts.push(sphereY[voff]),sphereVerts.push(sphereZ[voff]),sphereVerts.push(0),sphereVerts.push(1),sphereVerts.push(0),curContext.bindBuffer(curContext.ARRAY_BUFFER,sphereBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array(sphereVerts),curContext.STATIC_DRAW)};p.sphereDetail=function(ures,vres){var i;if(1===arguments.length&&(ures=vres=arguments[0]),3>ures&&(ures=3),2>vres&&(vres=2),ures!==sphereDetailU||vres!==sphereDetailV){var delta=720/ures,cx=new Float32Array(ures),cz=new Float32Array(ures);for(i=0;ures>i;i++)cx[i]=cosLUT[i*delta%720|0],cz[i]=sinLUT[i*delta%720|0];var vertCount=ures*(vres-1)+2,currVert=0;sphereX=new Float32Array(vertCount),sphereY=new Float32Array(vertCount),sphereZ=new Float32Array(vertCount);var angle_step=360/vres,angle=angle_step;for(i=1;vres>i;i++){for(var curradius=sinLUT[angle%720|0],currY=-cosLUT[angle%720|0],j=0;ures>j;j++)sphereX[currVert]=cx[j]*curradius,sphereY[currVert]=currY,sphereZ[currVert++]=cz[j]*curradius;angle+=angle_step}sphereDetailU=ures,sphereDetailV=vres,initSphere()}},Drawing2D.prototype.sphere=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.sphere=function(){var sRad=arguments[0];(3>sphereDetailU||2>sphereDetailV)&&p.sphereDetail(30);var model=new PMatrix3D;model.scale(sRad,sRad,sRad);var view=new PMatrix3D;if(view.scale(1,-1,1),view.apply(modelView.array()),view.transpose(),doFill){if(lightCount>0){var v=new PMatrix3D;v.set(view);var m=new PMatrix3D;m.set(model),v.mult(m);var normalMatrix=new PMatrix3D;normalMatrix.set(v),normalMatrix.invert(),normalMatrix.transpose(),uniformMatrix("uNormalTransform3d",programObject3D,"uNormalTransform",!1,normalMatrix.array()),vertexAttribPointer("aNormal3d",programObject3D,"aNormal",3,sphereBuffer)}else disableVertexAttribPointer("aNormal3d",programObject3D,"aNormal");curContext.useProgram(programObject3D),disableVertexAttribPointer("aTexture3d",programObject3D,"aTexture"),uniformMatrix("uModel3d",programObject3D,"uModel",!1,model.array()),uniformMatrix("uView3d",programObject3D,"uView",!1,view.array()),vertexAttribPointer("aVertex3d",programObject3D,"aVertex",3,sphereBuffer),disableVertexAttribPointer("aColor3d",programObject3D,"aColor"),curContext.enable(curContext.POLYGON_OFFSET_FILL),curContext.polygonOffset(1,1),uniformf("uColor3d",programObject3D,"uColor",fillStyle),curContext.drawArrays(curContext.TRIANGLE_STRIP,0,sphereVerts.length/3),curContext.disable(curContext.POLYGON_OFFSET_FILL)}lineWidth>0&&doStroke&&(curContext.useProgram(programObject2D),uniformMatrix("uModel2d",programObject2D,"uModel",!1,model.array()),uniformMatrix("uView2d",programObject2D,"uView",!1,view.array()),vertexAttribPointer("aVertex2d",programObject2D,"aVertex",3,sphereBuffer),disableVertexAttribPointer("aTextureCoord2d",programObject2D,"aTextureCoord"),uniformf("uColor2d",programObject2D,"uColor",strokeStyle),uniformi("uIsDrawingText",programObject2D,"uIsDrawingText",!1),curContext.drawArrays(curContext.LINE_STRIP,0,sphereVerts.length/3))},p.modelX=function(x,y,z){var mv=modelView.array(),ci=cameraInv.array(),ax=mv[0]*x+mv[1]*y+mv[2]*z+mv[3],ay=mv[4]*x+mv[5]*y+mv[6]*z+mv[7],az=mv[8]*x+mv[9]*y+mv[10]*z+mv[11],aw=mv[12]*x+mv[13]*y+mv[14]*z+mv[15],ox=ci[0]*ax+ci[1]*ay+ci[2]*az+ci[3]*aw,ow=ci[12]*ax+ci[13]*ay+ci[14]*az+ci[15]*aw;return 0!==ow?ox/ow:ox},p.modelY=function(x,y,z){var mv=modelView.array(),ci=cameraInv.array(),ax=mv[0]*x+mv[1]*y+mv[2]*z+mv[3],ay=mv[4]*x+mv[5]*y+mv[6]*z+mv[7],az=mv[8]*x+mv[9]*y+mv[10]*z+mv[11],aw=mv[12]*x+mv[13]*y+mv[14]*z+mv[15],oy=ci[4]*ax+ci[5]*ay+ci[6]*az+ci[7]*aw,ow=ci[12]*ax+ci[13]*ay+ci[14]*az+ci[15]*aw;return 0!==ow?oy/ow:oy},p.modelZ=function(x,y,z){var mv=modelView.array(),ci=cameraInv.array(),ax=mv[0]*x+mv[1]*y+mv[2]*z+mv[3],ay=mv[4]*x+mv[5]*y+mv[6]*z+mv[7],az=mv[8]*x+mv[9]*y+mv[10]*z+mv[11],aw=mv[12]*x+mv[13]*y+mv[14]*z+mv[15],oz=ci[8]*ax+ci[9]*ay+ci[10]*az+ci[11]*aw,ow=ci[12]*ax+ci[13]*ay+ci[14]*az+ci[15]*aw;return 0!==ow?oz/ow:oz},Drawing2D.prototype.ambient=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.ambient=function(v1,v2,v3){curContext.useProgram(programObject3D),uniformi("uUsingMat3d",programObject3D,"uUsingMat",!0);var col=p.color(v1,v2,v3);uniformf("uMaterialAmbient3d",programObject3D,"uMaterialAmbient",p.color.toGLArray(col).slice(0,3))},Drawing2D.prototype.emissive=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.emissive=function(v1,v2,v3){curContext.useProgram(programObject3D),uniformi("uUsingMat3d",programObject3D,"uUsingMat",!0);var col=p.color(v1,v2,v3);uniformf("uMaterialEmissive3d",programObject3D,"uMaterialEmissive",p.color.toGLArray(col).slice(0,3))},Drawing2D.prototype.shininess=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.shininess=function(shine){curContext.useProgram(programObject3D),uniformi("uUsingMat3d",programObject3D,"uUsingMat",!0),uniformf("uShininess3d",programObject3D,"uShininess",shine)},Drawing2D.prototype.specular=DrawingShared.prototype.a3DOnlyFunction,Drawing3D.prototype.specular=function(v1,v2,v3){curContext.useProgram(programObject3D),uniformi("uUsingMat3d",programObject3D,"uUsingMat",!0);var col=p.color(v1,v2,v3);uniformf("uMaterialSpecular3d",programObject3D,"uMaterialSpecular",p.color.toGLArray(col).slice(0,3))},p.screenX=function(x,y,z){var mv=modelView.array();if(16===mv.length){var ax=mv[0]*x+mv[1]*y+mv[2]*z+mv[3],ay=mv[4]*x+mv[5]*y+mv[6]*z+mv[7],az=mv[8]*x+mv[9]*y+mv[10]*z+mv[11],aw=mv[12]*x+mv[13]*y+mv[14]*z+mv[15],pj=projection.array(),ox=pj[0]*ax+pj[1]*ay+pj[2]*az+pj[3]*aw,ow=pj[12]*ax+pj[13]*ay+pj[14]*az+pj[15]*aw;return 0!==ow&&(ox/=ow),p.width*(1+ox)/2}return modelView.multX(x,y)},p.screenY=function(x,y,z){var mv=modelView.array();if(16===mv.length){var ax=mv[0]*x+mv[1]*y+mv[2]*z+mv[3],ay=mv[4]*x+mv[5]*y+mv[6]*z+mv[7],az=mv[8]*x+mv[9]*y+mv[10]*z+mv[11],aw=mv[12]*x+mv[13]*y+mv[14]*z+mv[15],pj=projection.array(),oy=pj[4]*ax+pj[5]*ay+pj[6]*az+pj[7]*aw,ow=pj[12]*ax+pj[13]*ay+pj[14]*az+pj[15]*aw;return 0!==ow&&(oy/=ow),p.height*(1+oy)/2}return modelView.multY(x,y)},p.screenZ=function(x,y,z){var mv=modelView.array();if(16!==mv.length)return 0;var pj=projection.array(),ax=mv[0]*x+mv[1]*y+mv[2]*z+mv[3],ay=mv[4]*x+mv[5]*y+mv[6]*z+mv[7],az=mv[8]*x+mv[9]*y+mv[10]*z+mv[11],aw=mv[12]*x+mv[13]*y+mv[14]*z+mv[15],oz=pj[8]*ax+pj[9]*ay+pj[10]*az+pj[11]*aw,ow=pj[12]*ax+pj[13]*ay+pj[14]*az+pj[15]*aw;return 0!==ow&&(oz/=ow),(oz+1)/2},DrawingShared.prototype.fill=function(){var color=p.color(arguments[0],arguments[1],arguments[2],arguments[3]);color===currentFillColor&&doFill||(doFill=!0,currentFillColor=color)},Drawing2D.prototype.fill=function(){DrawingShared.prototype.fill.apply(this,arguments),isFillDirty=!0},Drawing3D.prototype.fill=function(){DrawingShared.prototype.fill.apply(this,arguments),fillStyle=p.color.toGLArray(currentFillColor)},p.noFill=function(){doFill=!1},DrawingShared.prototype.stroke=function(){var color=p.color(arguments[0],arguments[1],arguments[2],arguments[3]);color===currentStrokeColor&&doStroke||(doStroke=!0,currentStrokeColor=color)},Drawing2D.prototype.stroke=function(){DrawingShared.prototype.stroke.apply(this,arguments),isStrokeDirty=!0},Drawing3D.prototype.stroke=function(){DrawingShared.prototype.stroke.apply(this,arguments),strokeStyle=p.color.toGLArray(currentStrokeColor)},p.noStroke=function(){doStroke=!1},DrawingShared.prototype.strokeWeight=function(w){lineWidth=w},Drawing2D.prototype.strokeWeight=function(w){DrawingShared.prototype.strokeWeight.apply(this,arguments),curContext.lineWidth=w},Drawing3D.prototype.strokeWeight=function(w){DrawingShared.prototype.strokeWeight.apply(this,arguments),curContext.useProgram(programObject2D),uniformf("pointSize2d",programObject2D,"uPointSize",w),curContext.useProgram(programObjectUnlitShape),uniformf("pointSizeUnlitShape",programObjectUnlitShape,"uPointSize",w),curContext.lineWidth(w)},p.strokeCap=function(value){drawing.$ensureContext().lineCap=value},p.strokeJoin=function(value){drawing.$ensureContext().lineJoin=value},Drawing2D.prototype.smooth=function(){renderSmooth=!0;var style=curElement.style;style.setProperty("image-rendering","optimizeQuality","important"),style.setProperty("-ms-interpolation-mode","bicubic","important"),curContext.hasOwnProperty("mozImageSmoothingEnabled")&&(curContext.mozImageSmoothingEnabled=!0)},Drawing3D.prototype.smooth=function(){renderSmooth=!0},Drawing2D.prototype.noSmooth=function(){renderSmooth=!1;var style=curElement.style;style.setProperty("image-rendering","optimizeSpeed","important"),style.setProperty("image-rendering","-moz-crisp-edges","important"),style.setProperty("image-rendering","-webkit-optimize-contrast","important"),style.setProperty("image-rendering","optimize-contrast","important"),style.setProperty("-ms-interpolation-mode","nearest-neighbor","important"),curContext.hasOwnProperty("mozImageSmoothingEnabled")&&(curContext.mozImageSmoothingEnabled=!1)},Drawing3D.prototype.noSmooth=function(){renderSmooth=!1},Drawing2D.prototype.point=function(x,y){doStroke&&(x=Math.round(x),y=Math.round(y),curContext.fillStyle=p.color.toString(currentStrokeColor),isFillDirty=!0,lineWidth>1?(curContext.beginPath(),curContext.arc(x,y,lineWidth/2,0,6.283185307179586,!1),curContext.fill()):curContext.fillRect(x,y,1,1))},Drawing3D.prototype.point=function(x,y,z){var model=new PMatrix3D;model.translate(x,y,z||0),model.transpose();var view=new PMatrix3D;view.scale(1,-1,1),view.apply(modelView.array()),view.transpose(),curContext.useProgram(programObject2D),uniformMatrix("uModel2d",programObject2D,"uModel",!1,model.array()),uniformMatrix("uView2d",programObject2D,"uView",!1,view.array()),lineWidth>0&&doStroke&&(uniformf("uColor2d",programObject2D,"uColor",strokeStyle),uniformi("uIsDrawingText2d",programObject2D,"uIsDrawingText",!1),uniformi("uSmooth2d",programObject2D,"uSmooth",renderSmooth),vertexAttribPointer("aVertex2d",programObject2D,"aVertex",3,pointBuffer),disableVertexAttribPointer("aTextureCoord2d",programObject2D,"aTextureCoord"),curContext.drawArrays(curContext.POINTS,0,1))},p.beginShape=function(type){curShape=type,curvePoints=[],vertArray=[]},Drawing2D.prototype.vertex=function(x,y,moveTo){var vert=[];firstVert&&(firstVert=!1),vert.isVert=!0,vert[0]=x,vert[1]=y,vert[2]=0,vert[3]=0,vert[4]=0,vert[5]=currentFillColor,vert[6]=currentStrokeColor,vertArray.push(vert),moveTo&&(vertArray[vertArray.length-1].moveTo=moveTo)},Drawing3D.prototype.vertex=function(x,y,z,u,v){var vert=[];firstVert&&(firstVert=!1),vert.isVert=!0,v===undef&&usingTexture&&(v=u,u=z,z=0),u!==undef&&v!==undef&&(2===curTextureMode&&(u/=curTexture.width,v/=curTexture.height),u=u>1?1:u,u=0>u?0:u,v=v>1?1:v,v=0>v?0:v),vert[0]=x,vert[1]=y,vert[2]=z||0,vert[3]=u||0,vert[4]=v||0,vert[5]=fillStyle[0],vert[6]=fillStyle[1],vert[7]=fillStyle[2],vert[8]=fillStyle[3],vert[9]=strokeStyle[0],vert[10]=strokeStyle[1],vert[11]=strokeStyle[2],vert[12]=strokeStyle[3],vert[13]=normalX,vert[14]=normalY,vert[15]=normalZ,vertArray.push(vert)};var point3D=function(vArray,cArray){var view=new PMatrix3D;view.scale(1,-1,1),view.apply(modelView.array()),view.transpose(),curContext.useProgram(programObjectUnlitShape),uniformMatrix("uViewUS",programObjectUnlitShape,"uView",!1,view.array()),uniformi("uSmoothUS",programObjectUnlitShape,"uSmooth",renderSmooth),vertexAttribPointer("aVertexUS",programObjectUnlitShape,"aVertex",3,pointBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array(vArray),curContext.STREAM_DRAW),vertexAttribPointer("aColorUS",programObjectUnlitShape,"aColor",4,fillColorBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array(cArray),curContext.STREAM_DRAW),curContext.drawArrays(curContext.POINTS,0,vArray.length/3)},line3D=function(vArray,mode,cArray){var ctxMode;ctxMode="LINES"===mode?curContext.LINES:"LINE_LOOP"===mode?curContext.LINE_LOOP:curContext.LINE_STRIP;var view=new PMatrix3D;view.scale(1,-1,1),view.apply(modelView.array()),view.transpose(),curContext.useProgram(programObjectUnlitShape),uniformMatrix("uViewUS",programObjectUnlitShape,"uView",!1,view.array()),vertexAttribPointer("aVertexUS",programObjectUnlitShape,"aVertex",3,lineBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array(vArray),curContext.STREAM_DRAW),vertexAttribPointer("aColorUS",programObjectUnlitShape,"aColor",4,strokeColorBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array(cArray),curContext.STREAM_DRAW),curContext.drawArrays(ctxMode,0,vArray.length/3)},fill3D=function(vArray,mode,cArray,tArray){var ctxMode;ctxMode="TRIANGLES"===mode?curContext.TRIANGLES:"TRIANGLE_FAN"===mode?curContext.TRIANGLE_FAN:curContext.TRIANGLE_STRIP;var view=new PMatrix3D;view.scale(1,-1,1),view.apply(modelView.array()),view.transpose(),curContext.useProgram(programObject3D),uniformMatrix("model3d",programObject3D,"uModel",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),uniformMatrix("view3d",programObject3D,"uView",!1,view.array()),curContext.enable(curContext.POLYGON_OFFSET_FILL),curContext.polygonOffset(1,1),uniformf("color3d",programObject3D,"uColor",[-1,0,0,0]),vertexAttribPointer("vertex3d",programObject3D,"aVertex",3,fillBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array(vArray),curContext.STREAM_DRAW),usingTexture&&null!==curTint&&curTint3d(cArray),vertexAttribPointer("aColor3d",programObject3D,"aColor",4,fillColorBuffer),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array(cArray),curContext.STREAM_DRAW),disableVertexAttribPointer("aNormal3d",programObject3D,"aNormal"),usingTexture&&(uniformi("uUsingTexture3d",programObject3D,"uUsingTexture",usingTexture),vertexAttribPointer("aTexture3d",programObject3D,"aTexture",2,shapeTexVBO),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array(tArray),curContext.STREAM_DRAW)),curContext.drawArrays(ctxMode,0,vArray.length/3),curContext.disable(curContext.POLYGON_OFFSET_FILL)};Drawing2D.prototype.endShape=function(mode){if(0!==vertArray.length){var closeShape=2===mode;closeShape&&vertArray.push(vertArray[0]);var cachedVertArray,fillVertArray=[],colorVertArray=[],strokeVertArray=[],texVertArray=[];firstVert=!0;var i,j,vertArrayLength=vertArray.length;for(i=0;vertArrayLength>i;i++)for(cachedVertArray=vertArray[i],j=0;3>j;j++)fillVertArray.push(cachedVertArray[j]);for(i=0;vertArrayLength>i;i++)for(cachedVertArray=vertArray[i],j=5;9>j;j++)colorVertArray.push(cachedVertArray[j]);for(i=0;vertArrayLength>i;i++)for(cachedVertArray=vertArray[i],j=9;13>j;j++)strokeVertArray.push(cachedVertArray[j]);for(i=0;vertArrayLength>i;i++)cachedVertArray=vertArray[i],texVertArray.push(cachedVertArray[3]),texVertArray.push(cachedVertArray[4]);if(!isCurve||20!==curShape&&curShape!==undef)if(!isBezier||20!==curShape&&curShape!==undef)if(2===curShape)for(i=0;vertArrayLength>i;i++)cachedVertArray=vertArray[i],doStroke&&p.stroke(cachedVertArray[6]),p.point(cachedVertArray[0],cachedVertArray[1]);else if(4===curShape)for(i=0;vertArrayLength>i+1;i+=2)cachedVertArray=vertArray[i],doStroke&&p.stroke(vertArray[i+1][6]),p.line(cachedVertArray[0],cachedVertArray[1],vertArray[i+1][0],vertArray[i+1][1]);else if(9===curShape)for(i=0;vertArrayLength>i+2;i+=3)cachedVertArray=vertArray[i],curContext.beginPath(),curContext.moveTo(cachedVertArray[0],cachedVertArray[1]),curContext.lineTo(vertArray[i+1][0],vertArray[i+1][1]),curContext.lineTo(vertArray[i+2][0],vertArray[i+2][1]),curContext.lineTo(cachedVertArray[0],cachedVertArray[1]),doFill&&(p.fill(vertArray[i+2][5]),executeContextFill()),doStroke&&(p.stroke(vertArray[i+2][6]),executeContextStroke()),curContext.closePath();else if(10===curShape)for(i=0;vertArrayLength>i+1;i++)cachedVertArray=vertArray[i],curContext.beginPath(),curContext.moveTo(vertArray[i+1][0],vertArray[i+1][1]),curContext.lineTo(cachedVertArray[0],cachedVertArray[1]),doStroke&&p.stroke(vertArray[i+1][6]),doFill&&p.fill(vertArray[i+1][5]),vertArrayLength>i+2&&(curContext.lineTo(vertArray[i+2][0],vertArray[i+2][1]),doStroke&&p.stroke(vertArray[i+2][6]),doFill&&p.fill(vertArray[i+2][5])),fillStrokeClose();else if(11===curShape){if(vertArrayLength>2)for(curContext.beginPath(),curContext.moveTo(vertArray[0][0],vertArray[0][1]),curContext.lineTo(vertArray[1][0],vertArray[1][1]),curContext.lineTo(vertArray[2][0],vertArray[2][1]),doFill&&(p.fill(vertArray[2][5]),executeContextFill()),doStroke&&(p.stroke(vertArray[2][6]),executeContextStroke()),curContext.closePath(),i=3;vertArrayLength>i;i++)cachedVertArray=vertArray[i],curContext.beginPath(),curContext.moveTo(vertArray[0][0],vertArray[0][1]),curContext.lineTo(vertArray[i-1][0],vertArray[i-1][1]),curContext.lineTo(cachedVertArray[0],cachedVertArray[1]),doFill&&(p.fill(cachedVertArray[5]),executeContextFill()),doStroke&&(p.stroke(cachedVertArray[6]),executeContextStroke()),curContext.closePath()}else if(16===curShape)for(i=0;vertArrayLength>i+3;i+=4){for(cachedVertArray=vertArray[i],curContext.beginPath(),curContext.moveTo(cachedVertArray[0],cachedVertArray[1]),j=1;4>j;j++)curContext.lineTo(vertArray[i+j][0],vertArray[i+j][1]);curContext.lineTo(cachedVertArray[0],cachedVertArray[1]),doFill&&(p.fill(vertArray[i+3][5]),executeContextFill()),doStroke&&(p.stroke(vertArray[i+3][6]),executeContextStroke()),curContext.closePath()}else if(17===curShape){if(vertArrayLength>3)for(i=0;vertArrayLength>i+1;i+=2)cachedVertArray=vertArray[i],curContext.beginPath(),vertArrayLength>i+3?(curContext.moveTo(vertArray[i+2][0],vertArray[i+2][1]),curContext.lineTo(cachedVertArray[0],cachedVertArray[1]),curContext.lineTo(vertArray[i+1][0],vertArray[i+1][1]),curContext.lineTo(vertArray[i+3][0],vertArray[i+3][1]),doFill&&p.fill(vertArray[i+3][5]),doStroke&&p.stroke(vertArray[i+3][6])):(curContext.moveTo(cachedVertArray[0],cachedVertArray[1]),curContext.lineTo(vertArray[i+1][0],vertArray[i+1][1])),fillStrokeClose()}else{for(curContext.beginPath(),curContext.moveTo(vertArray[0][0],vertArray[0][1]),i=1;vertArrayLength>i;i++)cachedVertArray=vertArray[i],cachedVertArray.isVert&&(cachedVertArray.moveTo?curContext.moveTo(cachedVertArray[0],cachedVertArray[1]):curContext.lineTo(cachedVertArray[0],cachedVertArray[1]));fillStrokeClose()}else{for(curContext.beginPath(),i=0;vertArrayLength>i;i++)cachedVertArray=vertArray[i],vertArray[i].isVert?vertArray[i].moveTo?curContext.moveTo(cachedVertArray[0],cachedVertArray[1]):curContext.lineTo(cachedVertArray[0],cachedVertArray[1]):curContext.bezierCurveTo(vertArray[i][0],vertArray[i][1],vertArray[i][2],vertArray[i][3],vertArray[i][4],vertArray[i][5]);fillStrokeClose()}else if(vertArrayLength>3){var b=[],s=1-curTightness;for(curContext.beginPath(),curContext.moveTo(vertArray[1][0],vertArray[1][1]),i=1;vertArrayLength>i+2;i++)cachedVertArray=vertArray[i],b[0]=[cachedVertArray[0],cachedVertArray[1]],b[1]=[cachedVertArray[0]+(s*vertArray[i+1][0]-s*vertArray[i-1][0])/6,cachedVertArray[1]+(s*vertArray[i+1][1]-s*vertArray[i-1][1])/6],b[2]=[vertArray[i+1][0]+(s*vertArray[i][0]-s*vertArray[i+2][0])/6,vertArray[i+1][1]+(s*vertArray[i][1]-s*vertArray[i+2][1])/6],b[3]=[vertArray[i+1][0],vertArray[i+1][1]],curContext.bezierCurveTo(b[1][0],b[1][1],b[2][0],b[2][1],b[3][0],b[3][1]);fillStrokeClose()}isCurve=!1,isBezier=!1,curveVertArray=[],curveVertCount=0,closeShape&&vertArray.pop()}},Drawing3D.prototype.endShape=function(mode){if(0!==vertArray.length){var cachedVertArray,closeShape=2===mode,lineVertArray=[],fillVertArray=[],colorVertArray=[],strokeVertArray=[],texVertArray=[];firstVert=!0;var i,j,k,vertArrayLength=vertArray.length;for(i=0;vertArrayLength>i;i++)for(cachedVertArray=vertArray[i],j=0;3>j;j++)fillVertArray.push(cachedVertArray[j]);for(i=0;vertArrayLength>i;i++)for(cachedVertArray=vertArray[i],j=5;9>j;j++)colorVertArray.push(cachedVertArray[j]);for(i=0;vertArrayLength>i;i++)for(cachedVertArray=vertArray[i],j=9;13>j;j++)strokeVertArray.push(cachedVertArray[j]);for(i=0;vertArrayLength>i;i++)cachedVertArray=vertArray[i],texVertArray.push(cachedVertArray[3]),texVertArray.push(cachedVertArray[4]);if(closeShape){for(fillVertArray.push(vertArray[0][0]),fillVertArray.push(vertArray[0][1]),fillVertArray.push(vertArray[0][2]),i=5;9>i;i++)colorVertArray.push(vertArray[0][i]);for(i=9;13>i;i++)strokeVertArray.push(vertArray[0][i]);texVertArray.push(vertArray[0][3]),texVertArray.push(vertArray[0][4])}if(!isCurve||20!==curShape&&curShape!==undef)if(!isBezier||20!==curShape&&curShape!==undef){if(2===curShape){for(i=0;vertArrayLength>i;i++)for(cachedVertArray=vertArray[i],j=0;3>j;j++)lineVertArray.push(cachedVertArray[j]);point3D(lineVertArray,strokeVertArray)}else if(4===curShape){for(i=0;vertArrayLength>i;i++)for(cachedVertArray=vertArray[i],j=0;3>j;j++)lineVertArray.push(cachedVertArray[j]);for(i=0;vertArrayLength>i;i++)for(cachedVertArray=vertArray[i],j=5;9>j;j++)colorVertArray.push(cachedVertArray[j]);line3D(lineVertArray,"LINES",strokeVertArray)}else if(9===curShape){if(vertArrayLength>2)for(i=0;vertArrayLength>i+2;i+=3){for(fillVertArray=[],texVertArray=[],lineVertArray=[],colorVertArray=[],strokeVertArray=[],j=0;3>j;j++)for(k=0;3>k;k++)lineVertArray.push(vertArray[i+j][k]),fillVertArray.push(vertArray[i+j][k]);for(j=0;3>j;j++)for(k=3;5>k;k++)texVertArray.push(vertArray[i+j][k]);for(j=0;3>j;j++)for(k=5;9>k;k++)colorVertArray.push(vertArray[i+j][k]),strokeVertArray.push(vertArray[i+j][k+4]);doStroke&&line3D(lineVertArray,"LINE_LOOP",strokeVertArray),(doFill||usingTexture)&&fill3D(fillVertArray,"TRIANGLES",colorVertArray,texVertArray)}}else if(10===curShape){if(vertArrayLength>2)for(i=0;vertArrayLength>i+2;i++){for(lineVertArray=[],fillVertArray=[],strokeVertArray=[],colorVertArray=[],texVertArray=[],j=0;3>j;j++)for(k=0;3>k;k++)lineVertArray.push(vertArray[i+j][k]),fillVertArray.push(vertArray[i+j][k]);for(j=0;3>j;j++)for(k=3;5>k;k++)texVertArray.push(vertArray[i+j][k]);for(j=0;3>j;j++)for(k=5;9>k;k++)strokeVertArray.push(vertArray[i+j][k+4]),colorVertArray.push(vertArray[i+j][k]);(doFill||usingTexture)&&fill3D(fillVertArray,"TRIANGLE_STRIP",colorVertArray,texVertArray),doStroke&&line3D(lineVertArray,"LINE_LOOP",strokeVertArray)}}else if(11===curShape){if(vertArrayLength>2){for(i=0;3>i;i++)for(cachedVertArray=vertArray[i],j=0;3>j;j++)lineVertArray.push(cachedVertArray[j]);for(i=0;3>i;i++)for(cachedVertArray=vertArray[i],j=9;13>j;j++)strokeVertArray.push(cachedVertArray[j]);for(doStroke&&line3D(lineVertArray,"LINE_LOOP",strokeVertArray),i=2;vertArrayLength>i+1;i++){for(lineVertArray=[],strokeVertArray=[],lineVertArray.push(vertArray[0][0]),lineVertArray.push(vertArray[0][1]),lineVertArray.push(vertArray[0][2]),strokeVertArray.push(vertArray[0][9]),strokeVertArray.push(vertArray[0][10]),strokeVertArray.push(vertArray[0][11]),strokeVertArray.push(vertArray[0][12]),j=0;2>j;j++)for(k=0;3>k;k++)lineVertArray.push(vertArray[i+j][k]);for(j=0;2>j;j++)for(k=9;13>k;k++)strokeVertArray.push(vertArray[i+j][k]);doStroke&&line3D(lineVertArray,"LINE_STRIP",strokeVertArray)}(doFill||usingTexture)&&fill3D(fillVertArray,"TRIANGLE_FAN",colorVertArray,texVertArray)}}else if(16===curShape)for(i=0;vertArrayLength>i+3;i+=4){for(lineVertArray=[],j=0;4>j;j++)for(cachedVertArray=vertArray[i+j],k=0;3>k;k++)lineVertArray.push(cachedVertArray[k]);if(doStroke&&line3D(lineVertArray,"LINE_LOOP",strokeVertArray),doFill){for(fillVertArray=[],colorVertArray=[],texVertArray=[],j=0;3>j;j++)fillVertArray.push(vertArray[i][j]);for(j=5;9>j;j++)colorVertArray.push(vertArray[i][j]);for(j=0;3>j;j++)fillVertArray.push(vertArray[i+1][j]);for(j=5;9>j;j++)colorVertArray.push(vertArray[i+1][j]);for(j=0;3>j;j++)fillVertArray.push(vertArray[i+3][j]);for(j=5;9>j;j++)colorVertArray.push(vertArray[i+3][j]);for(j=0;3>j;j++)fillVertArray.push(vertArray[i+2][j]);for(j=5;9>j;j++)colorVertArray.push(vertArray[i+2][j]);usingTexture&&(texVertArray.push(vertArray[i+0][3]),texVertArray.push(vertArray[i+0][4]),texVertArray.push(vertArray[i+1][3]),texVertArray.push(vertArray[i+1][4]),texVertArray.push(vertArray[i+3][3]),texVertArray.push(vertArray[i+3][4]),texVertArray.push(vertArray[i+2][3]),texVertArray.push(vertArray[i+2][4])),fill3D(fillVertArray,"TRIANGLE_STRIP",colorVertArray,texVertArray)}}else if(17===curShape){var tempArray=[];if(vertArrayLength>3){for(i=0;2>i;i++)for(cachedVertArray=vertArray[i],j=0;3>j;j++)lineVertArray.push(cachedVertArray[j]);for(i=0;2>i;i++)for(cachedVertArray=vertArray[i],j=9;13>j;j++)strokeVertArray.push(cachedVertArray[j]);for(line3D(lineVertArray,"LINE_STRIP",strokeVertArray),vertArrayLength>4&&vertArrayLength%2>0&&(tempArray=fillVertArray.splice(fillVertArray.length-3),vertArray.pop()),i=0;vertArrayLength>i+3;i+=2){for(lineVertArray=[],strokeVertArray=[],j=0;3>j;j++)lineVertArray.push(vertArray[i+1][j]);for(j=0;3>j;j++)lineVertArray.push(vertArray[i+3][j]);for(j=0;3>j;j++)lineVertArray.push(vertArray[i+2][j]);for(j=0;3>j;j++)lineVertArray.push(vertArray[i+0][j]);for(j=9;13>j;j++)strokeVertArray.push(vertArray[i+1][j]);for(j=9;13>j;j++)strokeVertArray.push(vertArray[i+3][j]);for(j=9;13>j;j++)strokeVertArray.push(vertArray[i+2][j]);for(j=9;13>j;j++)strokeVertArray.push(vertArray[i+0][j]);doStroke&&line3D(lineVertArray,"LINE_STRIP",strokeVertArray)}(doFill||usingTexture)&&fill3D(fillVertArray,"TRIANGLE_LIST",colorVertArray,texVertArray)}}else if(1===vertArrayLength){for(j=0;3>j;j++)lineVertArray.push(vertArray[0][j]);for(j=9;13>j;j++)strokeVertArray.push(vertArray[0][j]);point3D(lineVertArray,strokeVertArray)}else{for(i=0;vertArrayLength>i;i++){for(cachedVertArray=vertArray[i],j=0;3>j;j++)lineVertArray.push(cachedVertArray[j]);for(j=5;9>j;j++)strokeVertArray.push(cachedVertArray[j])}doStroke&&closeShape?line3D(lineVertArray,"LINE_LOOP",strokeVertArray):doStroke&&!closeShape&&line3D(lineVertArray,"LINE_STRIP",strokeVertArray),(doFill||usingTexture)&&fill3D(fillVertArray,"TRIANGLE_FAN",colorVertArray,texVertArray)}usingTexture=!1,curContext.useProgram(programObject3D),uniformi("usingTexture3d",programObject3D,"uUsingTexture",usingTexture)}else lineVertArray=fillVertArray,lineVertArray.splice(lineVertArray.length-3),strokeVertArray.splice(strokeVertArray.length-4),doStroke&&line3D(lineVertArray,null,strokeVertArray),doFill&&fill3D(fillVertArray,"TRIANGLES",colorVertArray);else lineVertArray=fillVertArray,doStroke&&line3D(lineVertArray,null,strokeVertArray),doFill&&fill3D(fillVertArray,null,colorVertArray);isCurve=!1,isBezier=!1,curveVertArray=[],curveVertCount=0}};var splineForward=function(segments,matrix){var f=1/segments,ff=f*f,fff=ff*f;matrix.set(0,0,0,1,fff,ff,f,0,6*fff,2*ff,0,0,6*fff,0,0,0)},curveInit=function(){curveDrawMatrix||(curveBasisMatrix=new PMatrix3D,curveDrawMatrix=new PMatrix3D,curveInited=!0);var s=curTightness;curveBasisMatrix.set((s-1)/2,(s+3)/2,(-3-s)/2,(1-s)/2,1-s,(-5-s)/2,s+2,(s-1)/2,(s-1)/2,0,(1-s)/2,0,0,1,0,0),splineForward(curveDet,curveDrawMatrix),bezierBasisInverse||(curveToBezierMatrix=new PMatrix3D),curveToBezierMatrix.set(curveBasisMatrix),curveToBezierMatrix.preApply(bezierBasisInverse),curveDrawMatrix.apply(curveBasisMatrix)};Drawing2D.prototype.bezierVertex=function(){isBezier=!0;var vert=[];if(firstVert)throw"vertex() must be used at least once before calling bezierVertex()";for(var i=0;i<arguments.length;i++)vert[i]=arguments[i];vertArray.push(vert),vertArray[vertArray.length-1].isVert=!1},Drawing3D.prototype.bezierVertex=function(){isBezier=!0;if(firstVert)throw"vertex() must be used at least once before calling bezierVertex()";if(9===arguments.length){bezierDrawMatrix===undef&&(bezierDrawMatrix=new PMatrix3D);var lastPoint=vertArray.length-1;splineForward(bezDetail,bezierDrawMatrix),bezierDrawMatrix.apply(bezierBasisMatrix);for(var draw=bezierDrawMatrix.array(),x1=vertArray[lastPoint][0],y1=vertArray[lastPoint][1],z1=vertArray[lastPoint][2],xplot1=draw[4]*x1+draw[5]*arguments[0]+draw[6]*arguments[3]+draw[7]*arguments[6],xplot2=draw[8]*x1+draw[9]*arguments[0]+draw[10]*arguments[3]+draw[11]*arguments[6],xplot3=draw[12]*x1+draw[13]*arguments[0]+draw[14]*arguments[3]+draw[15]*arguments[6],yplot1=draw[4]*y1+draw[5]*arguments[1]+draw[6]*arguments[4]+draw[7]*arguments[7],yplot2=draw[8]*y1+draw[9]*arguments[1]+draw[10]*arguments[4]+draw[11]*arguments[7],yplot3=draw[12]*y1+draw[13]*arguments[1]+draw[14]*arguments[4]+draw[15]*arguments[7],zplot1=draw[4]*z1+draw[5]*arguments[2]+draw[6]*arguments[5]+draw[7]*arguments[8],zplot2=draw[8]*z1+draw[9]*arguments[2]+draw[10]*arguments[5]+draw[11]*arguments[8],zplot3=draw[12]*z1+draw[13]*arguments[2]+draw[14]*arguments[5]+draw[15]*arguments[8],j=0;bezDetail>j;j++)x1+=xplot1,
xplot1+=xplot2,xplot2+=xplot3,y1+=yplot1,yplot1+=yplot2,yplot2+=yplot3,z1+=zplot1,zplot1+=zplot2,zplot2+=zplot3,p.vertex(x1,y1,z1);p.vertex(arguments[6],arguments[7],arguments[8])}},p.texture=function(pimage){var curContext=drawing.$ensureContext();if(pimage.__texture)curContext.bindTexture(curContext.TEXTURE_2D,pimage.__texture);else if("canvas"===pimage.localName)curContext.bindTexture(curContext.TEXTURE_2D,canTex),curContext.texImage2D(curContext.TEXTURE_2D,0,curContext.RGBA,curContext.RGBA,curContext.UNSIGNED_BYTE,pimage),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_MAG_FILTER,curContext.LINEAR),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_MIN_FILTER,curContext.LINEAR),curContext.generateMipmap(curContext.TEXTURE_2D),curTexture.width=pimage.width,curTexture.height=pimage.height;else{var pot,texture=curContext.createTexture(),cvs=document.createElement("canvas"),cvsTextureCtx=cvs.getContext("2d");if(pimage.width&pimage.width-1===0)cvs.width=pimage.width;else{for(pot=1;pot<pimage.width;)pot*=2;cvs.width=pot}if(pimage.height&pimage.height-1===0)cvs.height=pimage.height;else{for(pot=1;pot<pimage.height;)pot*=2;cvs.height=pot}cvsTextureCtx.drawImage(pimage.sourceImg,0,0,pimage.width,pimage.height,0,0,cvs.width,cvs.height),curContext.bindTexture(curContext.TEXTURE_2D,texture),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_MIN_FILTER,curContext.LINEAR_MIPMAP_LINEAR),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_MAG_FILTER,curContext.LINEAR),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_WRAP_T,curContext.CLAMP_TO_EDGE),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_WRAP_S,curContext.CLAMP_TO_EDGE),curContext.texImage2D(curContext.TEXTURE_2D,0,curContext.RGBA,curContext.RGBA,curContext.UNSIGNED_BYTE,cvs),curContext.generateMipmap(curContext.TEXTURE_2D),pimage.__texture=texture,curTexture.width=pimage.width,curTexture.height=pimage.height}usingTexture=!0,curContext.useProgram(programObject3D),uniformi("usingTexture3d",programObject3D,"uUsingTexture",usingTexture)},p.textureMode=function(mode){curTextureMode=mode};var curveVertexSegment=function(x1,y1,z1,x2,y2,z2,x3,y3,z3,x4,y4,z4){var x0=x2,y0=y2,z0=z2,draw=curveDrawMatrix.array(),xplot1=draw[4]*x1+draw[5]*x2+draw[6]*x3+draw[7]*x4,xplot2=draw[8]*x1+draw[9]*x2+draw[10]*x3+draw[11]*x4,xplot3=draw[12]*x1+draw[13]*x2+draw[14]*x3+draw[15]*x4,yplot1=draw[4]*y1+draw[5]*y2+draw[6]*y3+draw[7]*y4,yplot2=draw[8]*y1+draw[9]*y2+draw[10]*y3+draw[11]*y4,yplot3=draw[12]*y1+draw[13]*y2+draw[14]*y3+draw[15]*y4,zplot1=draw[4]*z1+draw[5]*z2+draw[6]*z3+draw[7]*z4,zplot2=draw[8]*z1+draw[9]*z2+draw[10]*z3+draw[11]*z4,zplot3=draw[12]*z1+draw[13]*z2+draw[14]*z3+draw[15]*z4;p.vertex(x0,y0,z0);for(var j=0;curveDet>j;j++)x0+=xplot1,xplot1+=xplot2,xplot2+=xplot3,y0+=yplot1,yplot1+=yplot2,yplot2+=yplot3,z0+=zplot1,zplot1+=zplot2,zplot2+=zplot3,p.vertex(x0,y0,z0)};Drawing2D.prototype.curveVertex=function(x,y){isCurve=!0,p.vertex(x,y)},Drawing3D.prototype.curveVertex=function(x,y,z){isCurve=!0,curveInited||curveInit();var vert=[];vert[0]=x,vert[1]=y,vert[2]=z,curveVertArray.push(vert),curveVertCount++,curveVertCount>3&&curveVertexSegment(curveVertArray[curveVertCount-4][0],curveVertArray[curveVertCount-4][1],curveVertArray[curveVertCount-4][2],curveVertArray[curveVertCount-3][0],curveVertArray[curveVertCount-3][1],curveVertArray[curveVertCount-3][2],curveVertArray[curveVertCount-2][0],curveVertArray[curveVertCount-2][1],curveVertArray[curveVertCount-2][2],curveVertArray[curveVertCount-1][0],curveVertArray[curveVertCount-1][1],curveVertArray[curveVertCount-1][2])},Drawing2D.prototype.curve=function(x1,y1,x2,y2,x3,y3,x4,y4){p.beginShape(),p.curveVertex(x1,y1),p.curveVertex(x2,y2),p.curveVertex(x3,y3),p.curveVertex(x4,y4),p.endShape()},Drawing3D.prototype.curve=function(x1,y1,z1,x2,y2,z2,x3,y3,z3,x4,y4,z4){return z4!==undef?(p.beginShape(),p.curveVertex(x1,y1,z1),p.curveVertex(x2,y2,z2),p.curveVertex(x3,y3,z3),p.curveVertex(x4,y4,z4),void p.endShape()):(p.beginShape(),p.curveVertex(x1,y1),p.curveVertex(z1,x2),p.curveVertex(y2,z2),p.curveVertex(x3,y3),void p.endShape())},p.curveTightness=function(tightness){curTightness=tightness},p.curveDetail=function(detail){curveDet=detail,curveInit()},p.rectMode=function(aRectMode){curRectMode=aRectMode},p.imageMode=function(mode){switch(mode){case 0:imageModeConvert=imageModeCorner;break;case 1:imageModeConvert=imageModeCorners;break;case 3:imageModeConvert=imageModeCenter;break;default:throw"Invalid imageMode"}},p.ellipseMode=function(aEllipseMode){curEllipseMode=aEllipseMode},p.arc=function(x,y,width,height,start,stop){if(!(0>=width||start>stop)){for(1===curEllipseMode?(width-=x,height-=y):2===curEllipseMode?(x-=width,y-=height,width=2*width,height=2*height):3===curEllipseMode&&(x-=width/2,y-=height/2);0>start;)start+=6.283185307179586,stop+=6.283185307179586;stop-start>6.283185307179586&&(start=0,stop=6.283185307179586);var i,j,hr=width/2,vr=height/2,centerX=x+hr,centerY=y+vr,startLUT=0|.5+start*p.RAD_TO_DEG*2,stopLUT=0|.5+stop*p.RAD_TO_DEG*2;if(doFill){var savedStroke=doStroke;for(doStroke=!1,p.beginShape(),p.vertex(centerX,centerY),i=startLUT;stopLUT>=i;i++)j=i%720,p.vertex(centerX+cosLUT[j]*hr,centerY+sinLUT[j]*vr);p.endShape(2),doStroke=savedStroke}if(doStroke){var savedFill=doFill;for(doFill=!1,p.beginShape(),i=startLUT;stopLUT>=i;i++)j=i%720,p.vertex(centerX+cosLUT[j]*hr,centerY+sinLUT[j]*vr);p.endShape(),doFill=savedFill}}},Drawing2D.prototype.line=function(x1,y1,x2,y2){if(doStroke){if(x1=Math.round(x1),x2=Math.round(x2),y1=Math.round(y1),y2=Math.round(y2),x1===x2&&y1===y2)return void p.point(x1,y1);for(var swap=undef,lineCap=undef,drawCrisp=!0,currentModelView=modelView.array(),identityMatrix=[1,0,0,0,1,0],i=0;6>i&&drawCrisp;i++)drawCrisp=currentModelView[i]===identityMatrix[i];drawCrisp&&(x1===x2?(y1>y2&&(swap=y1,y1=y2,y2=swap),y2++,lineWidth%2===1&&curContext.translate(.5,0)):y1===y2&&(x1>x2&&(swap=x1,x1=x2,x2=swap),x2++,lineWidth%2===1&&curContext.translate(0,.5)),1===lineWidth&&(lineCap=curContext.lineCap,curContext.lineCap="butt")),curContext.beginPath(),curContext.moveTo(x1||0,y1||0),curContext.lineTo(x2||0,y2||0),executeContextStroke(),drawCrisp&&(x1===x2&&lineWidth%2===1?curContext.translate(-.5,0):y1===y2&&lineWidth%2===1&&curContext.translate(0,-.5),1===lineWidth&&(curContext.lineCap=lineCap))}},Drawing3D.prototype.line=function(x1,y1,z1,x2,y2,z2){if((y2===undef||z2===undef)&&(z2=0,y2=x2,x2=z1,z1=0),x1===x2&&y1===y2&&z1===z2)return void p.point(x1,y1,z1);var lineVerts=[x1,y1,z1,x2,y2,z2],view=new PMatrix3D;view.scale(1,-1,1),view.apply(modelView.array()),view.transpose(),lineWidth>0&&doStroke&&(curContext.useProgram(programObject2D),uniformMatrix("uModel2d",programObject2D,"uModel",!1,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),uniformMatrix("uView2d",programObject2D,"uView",!1,view.array()),uniformf("uColor2d",programObject2D,"uColor",strokeStyle),uniformi("uIsDrawingText",programObject2D,"uIsDrawingText",!1),vertexAttribPointer("aVertex2d",programObject2D,"aVertex",3,lineBuffer),disableVertexAttribPointer("aTextureCoord2d",programObject2D,"aTextureCoord"),curContext.bufferData(curContext.ARRAY_BUFFER,new Float32Array(lineVerts),curContext.STREAM_DRAW),curContext.drawArrays(curContext.LINES,0,2))},Drawing2D.prototype.bezier=function(){if(8!==arguments.length)throw"You must use 8 parameters for bezier() in 2D mode";p.beginShape(),p.vertex(arguments[0],arguments[1]),p.bezierVertex(arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]),p.endShape()},Drawing3D.prototype.bezier=function(){if(12!==arguments.length)throw"You must use 12 parameters for bezier() in 3D mode";p.beginShape(),p.vertex(arguments[0],arguments[1],arguments[2]),p.bezierVertex(arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]),p.endShape()},p.bezierDetail=function(detail){bezDetail=detail},p.bezierPoint=function(a,b,c,d,t){return(1-t)*(1-t)*(1-t)*a+3*(1-t)*(1-t)*t*b+3*(1-t)*t*t*c+t*t*t*d},p.bezierTangent=function(a,b,c,d,t){return 3*t*t*(-a+3*b-3*c+d)+6*t*(a-2*b+c)+3*(-a+b)},p.curvePoint=function(a,b,c,d,t){return.5*(2*b+(-a+c)*t+(2*a-5*b+4*c-d)*t*t+(-a+3*b-3*c+d)*t*t*t)},p.curveTangent=function(a,b,c,d,t){return.5*(-a+c+2*(2*a-5*b+4*c-d)*t+3*(-a+3*b-3*c+d)*t*t)},p.triangle=function(x1,y1,x2,y2,x3,y3){p.beginShape(9),p.vertex(x1,y1,0),p.vertex(x2,y2,0),p.vertex(x3,y3,0),p.endShape()},p.quad=function(x1,y1,x2,y2,x3,y3,x4,y4){p.beginShape(16),p.vertex(x1,y1,0),p.vertex(x2,y2,0),p.vertex(x3,y3,0),p.vertex(x4,y4,0),p.endShape()};var roundedRect$2d=function(x,y,width,height,tl,tr,br,bl){bl===undef&&(tr=tl,br=tl,bl=tl);var halfWidth=width/2,halfHeight=height/2;(tl>halfWidth||tl>halfHeight)&&(tl=Math.min(halfWidth,halfHeight)),(tr>halfWidth||tr>halfHeight)&&(tr=Math.min(halfWidth,halfHeight)),(br>halfWidth||br>halfHeight)&&(br=Math.min(halfWidth,halfHeight)),(bl>halfWidth||bl>halfHeight)&&(bl=Math.min(halfWidth,halfHeight)),(!doFill||doStroke)&&curContext.translate(.5,.5),curContext.beginPath(),curContext.moveTo(x+tl,y),curContext.lineTo(x+width-tr,y),curContext.quadraticCurveTo(x+width,y,x+width,y+tr),curContext.lineTo(x+width,y+height-br),curContext.quadraticCurveTo(x+width,y+height,x+width-br,y+height),curContext.lineTo(x+bl,y+height),curContext.quadraticCurveTo(x,y+height,x,y+height-bl),curContext.lineTo(x,y+tl),curContext.quadraticCurveTo(x,y,x+tl,y),(!doFill||doStroke)&&curContext.translate(-.5,-.5),executeContextFill(),executeContextStroke()};Drawing2D.prototype.rect=function(x,y,width,height,tl,tr,br,bl){if(width||height){if(1===curRectMode?(width-=x,height-=y):2===curRectMode?(width*=2,height*=2,x-=width/2,y-=height/2):3===curRectMode&&(x-=width/2,y-=height/2),x=Math.round(x),y=Math.round(y),width=Math.round(width),height=Math.round(height),tl!==undef)return void roundedRect$2d(x,y,width,height,tl,tr,br,bl);doStroke&&lineWidth%2===1&&curContext.translate(.5,.5),curContext.beginPath(),curContext.rect(x,y,width,height),executeContextFill(),executeContextStroke(),doStroke&&lineWidth%2===1&&curContext.translate(-.5,-.5)}},Drawing3D.prototype.rect=function(x,y,width,height,tl,tr,br,bl){if(tl!==undef)throw"rect() with rounded corners is not supported in 3D mode";1===curRectMode?(width-=x,height-=y):2===curRectMode?(width*=2,height*=2,x-=width/2,y-=height/2):3===curRectMode&&(x-=width/2,y-=height/2);var model=new PMatrix3D;model.translate(x,y,0),model.scale(width,height,1),model.transpose();var view=new PMatrix3D;if(view.scale(1,-1,1),view.apply(modelView.array()),view.transpose(),lineWidth>0&&doStroke&&(curContext.useProgram(programObject2D),uniformMatrix("uModel2d",programObject2D,"uModel",!1,model.array()),uniformMatrix("uView2d",programObject2D,"uView",!1,view.array()),uniformf("uColor2d",programObject2D,"uColor",strokeStyle),uniformi("uIsDrawingText2d",programObject2D,"uIsDrawingText",!1),vertexAttribPointer("aVertex2d",programObject2D,"aVertex",3,rectBuffer),disableVertexAttribPointer("aTextureCoord2d",programObject2D,"aTextureCoord"),curContext.drawArrays(curContext.LINE_LOOP,0,rectVerts.length/3)),doFill){if(curContext.useProgram(programObject3D),uniformMatrix("uModel3d",programObject3D,"uModel",!1,model.array()),uniformMatrix("uView3d",programObject3D,"uView",!1,view.array()),curContext.enable(curContext.POLYGON_OFFSET_FILL),curContext.polygonOffset(1,1),uniformf("color3d",programObject3D,"uColor",fillStyle),lightCount>0){var v=new PMatrix3D;v.set(view);var m=new PMatrix3D;m.set(model),v.mult(m);var normalMatrix=new PMatrix3D;normalMatrix.set(v),normalMatrix.invert(),normalMatrix.transpose(),uniformMatrix("uNormalTransform3d",programObject3D,"uNormalTransform",!1,normalMatrix.array()),vertexAttribPointer("aNormal3d",programObject3D,"aNormal",3,rectNormBuffer)}else disableVertexAttribPointer("normal3d",programObject3D,"aNormal");vertexAttribPointer("vertex3d",programObject3D,"aVertex",3,rectBuffer),curContext.drawArrays(curContext.TRIANGLE_FAN,0,rectVerts.length/3),curContext.disable(curContext.POLYGON_OFFSET_FILL)}},Drawing2D.prototype.ellipse=function(x,y,width,height){if(x=x||0,y=y||0,!(0>=width&&0>=height))if(2===curEllipseMode?(width*=2,height*=2):1===curEllipseMode?(width-=x,height-=y,x+=width/2,y+=height/2):0===curEllipseMode&&(x+=width/2,y+=height/2),width===height)curContext.beginPath(),curContext.arc(x,y,width/2,0,6.283185307179586,!1),executeContextFill(),executeContextStroke();else{var w=width/2,h=height/2,C=.5522847498307933,c_x=C*w,c_y=C*h;p.beginShape(),p.vertex(x+w,y),p.bezierVertex(x+w,y-c_y,x+c_x,y-h,x,y-h),p.bezierVertex(x-c_x,y-h,x-w,y-c_y,x-w,y),p.bezierVertex(x-w,y+c_y,x-c_x,y+h,x,y+h),p.bezierVertex(x+c_x,y+h,x+w,y+c_y,x+w,y),p.endShape()}},Drawing3D.prototype.ellipse=function(x,y,width,height){if(x=x||0,y=y||0,!(0>=width&&0>=height)){2===curEllipseMode?(width*=2,height*=2):1===curEllipseMode?(width-=x,height-=y,x+=width/2,y+=height/2):0===curEllipseMode&&(x+=width/2,y+=height/2);var w=width/2,h=height/2,C=.5522847498307933,c_x=C*w,c_y=C*h;if(p.beginShape(),p.vertex(x+w,y),p.bezierVertex(x+w,y-c_y,0,x+c_x,y-h,0,x,y-h,0),p.bezierVertex(x-c_x,y-h,0,x-w,y-c_y,0,x-w,y,0),p.bezierVertex(x-w,y+c_y,0,x-c_x,y+h,0,x,y+h,0),p.bezierVertex(x+c_x,y+h,0,x+w,y+c_y,0,x+w,y,0),p.endShape(),doFill){var i,j,xAv=0,yAv=0;for(i=0;i<vertArray.length;i++)xAv+=vertArray[i][0],yAv+=vertArray[i][1];xAv/=vertArray.length,yAv/=vertArray.length;var vert=[],fillVertArray=[],colorVertArray=[];for(vert[0]=xAv,vert[1]=yAv,vert[2]=0,vert[3]=0,vert[4]=0,vert[5]=fillStyle[0],vert[6]=fillStyle[1],vert[7]=fillStyle[2],vert[8]=fillStyle[3],vert[9]=strokeStyle[0],vert[10]=strokeStyle[1],vert[11]=strokeStyle[2],vert[12]=strokeStyle[3],vert[13]=normalX,vert[14]=normalY,vert[15]=normalZ,vertArray.unshift(vert),i=0;i<vertArray.length;i++){for(j=0;3>j;j++)fillVertArray.push(vertArray[i][j]);for(j=5;9>j;j++)colorVertArray.push(vertArray[i][j])}fill3D(fillVertArray,"TRIANGLE_FAN",colorVertArray)}}},p.normal=function(nx,ny,nz){if(3!==arguments.length||"number"!=typeof nx||"number"!=typeof ny||"number"!=typeof nz)throw"normal() requires three numeric arguments.";normalX=nx,normalY=ny,normalZ=nz,0!==curShape&&(0===normalMode?normalMode=1:1===normalMode&&(normalMode=2))},p.save=function(file,img){return img!==undef?window.open(img.toDataURL(),"_blank"):window.open(p.externals.canvas.toDataURL(),"_blank")};var saveNumber=0;p.saveFrame=function(file){file===undef&&(file="screen-####.png");var frameFilename=file.replace(/#+/,function(all){for(var s=""+saveNumber++;s.length<all.length;)s="0"+s;return s});p.save(frameFilename)};var utilityContext2d=document.createElement("canvas").getContext("2d"),canvasDataCache=[undef,undef,undef],PImage=function(aWidth,aHeight,aFormat){if(this.__isDirty=!1,aWidth instanceof HTMLImageElement)this.fromHTMLImageData(aWidth);else if(aHeight||aFormat){this.width=aWidth||1,this.height=aHeight||1;var canvas=this.sourceImg=document.createElement("canvas");canvas.width=this.width,canvas.height=this.height;this.imageData=canvas.getContext("2d").createImageData(this.width,this.height);if(this.format=2===aFormat||4===aFormat?aFormat:1,1===this.format)for(var i=3,data=this.imageData.data,len=data.length;len>i;i+=4)data[i]=255;this.__isDirty=!0,this.updatePixels()}else this.width=0,this.height=0,this.imageData=utilityContext2d.createImageData(1,1),this.format=2;this.pixels=buildPixelsObject(this)};PImage.prototype={__isPImage:!0,updatePixels:function(){var canvas=this.sourceImg;canvas&&canvas instanceof HTMLCanvasElement&&this.__isDirty&&canvas.getContext("2d").putImageData(this.imageData,0,0),this.__isDirty=!1},fromHTMLImageData:function(htmlImg){var canvasData=getCanvasData(htmlImg);try{var imageData=canvasData.context.getImageData(0,0,htmlImg.width,htmlImg.height);this.fromImageData(imageData)}catch(e){htmlImg.width&&htmlImg.height&&(this.isRemote=!0,this.width=htmlImg.width,this.height=htmlImg.height)}this.sourceImg=htmlImg},get:function(x,y,w,h){return arguments.length?2===arguments.length?p.get(x,y,this):4===arguments.length?p.get(x,y,w,h,this):void 0:p.get(this)},set:function(x,y,c){p.set(x,y,c,this),this.__isDirty=!0},blend:function(srcImg,x,y,width,height,dx,dy,dwidth,dheight,MODE){9===arguments.length?p.blend(this,srcImg,x,y,width,height,dx,dy,dwidth,dheight,this):10===arguments.length&&p.blend(srcImg,x,y,width,height,dx,dy,dwidth,dheight,MODE,this),delete this.sourceImg},copy:function(srcImg,sx,sy,swidth,sheight,dx,dy,dwidth,dheight){8===arguments.length?p.blend(this,srcImg,sx,sy,swidth,sheight,dx,dy,dwidth,0,this):9===arguments.length&&p.blend(srcImg,sx,sy,swidth,sheight,dx,dy,dwidth,dheight,0,this),delete this.sourceImg},filter:function(mode,param){2===arguments.length?p.filter(mode,param,this):1===arguments.length&&p.filter(mode,null,this),delete this.sourceImg},save:function(file){p.save(file,this)},resize:function(w,h){if(this.isRemote)throw"Image is loaded remotely. Cannot resize.";if(0!==this.width||0!==this.height){0===w&&0!==h?w=Math.floor(this.width/this.height*h):0===h&&0!==w&&(h=Math.floor(this.height/this.width*w));var canvas=getCanvasData(this.imageData).canvas,imageData=getCanvasData(canvas,w,h).context.getImageData(0,0,w,h);this.fromImageData(imageData)}},mask:function(mask){var i,size,obj=this.toImageData();if(mask instanceof PImage||mask.__isPImage){if(mask.width!==this.width||mask.height!==this.height)throw"mask must have the same dimensions as PImage.";for(mask=mask.toImageData(),i=2,size=this.width*this.height*4;size>i;i+=4)obj.data[i+1]=mask.data[i]}else if(mask instanceof Array){if(this.width*this.height!==mask.length)throw"mask array must be the same length as PImage pixels array.";for(i=0,size=mask.length;size>i;++i)obj.data[4*i+3]=mask[i]}this.fromImageData(obj)},loadPixels:nop,toImageData:function(){if(this.isRemote)return this.sourceImg;if(!this.__isDirty)return this.imageData;var canvasData=getCanvasData(this.sourceImg);return canvasData.context.getImageData(0,0,this.width,this.height)},toDataURL:function(){if(this.isRemote)throw"Image is loaded remotely. Cannot create dataURI.";var canvasData=getCanvasData(this.imageData);return canvasData.canvas.toDataURL()},fromImageData:function(canvasImg){var w=canvasImg.width,h=canvasImg.height,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");this.width=canvas.width=w,this.height=canvas.height=h,ctx.putImageData(canvasImg,0,0),this.format=2,this.imageData=canvasImg,this.sourceImg=canvas}},p.PImage=PImage,p.createImage=function(w,h,mode){return new PImage(w,h,mode)},p.loadImage=function(file,type,callback){type&&(file=file+"."+type);var pimg;if(curSketch.imageCache.images[file])return pimg=new PImage(curSketch.imageCache.images[file]),pimg.loaded=!0,pimg;pimg=new PImage;var img=document.createElement("img");return pimg.sourceImg=img,img.onload=function(aImage,aPImage,aCallback){var image=aImage,pimg=aPImage,callback=aCallback;return function(){pimg.fromHTMLImageData(image),pimg.loaded=!0,callback&&callback()}}(img,pimg,callback),img.src=file,pimg},p.requestImage=p.loadImage,p.get=function(x,y,w,h,img){return void 0!==img?get$5(x,y,w,h,img):void 0!==h?get$4(x,y,w,h):void 0!==w?get$3(x,y,w):void 0!==y?get$2(x,y):void 0!==x?get$5(0,0,x.width,x.height,x):get$4(0,0,p.width,p.height)},p.createGraphics=function(w,h,render){var pg=new Processing;return pg.size(w,h,render),pg.background(0,0),pg},p.set=function(x,y,obj,img){3===arguments.length?"number"==typeof obj?set$3(x,y,obj):(obj instanceof PImage||obj.__isPImage)&&p.image(obj,x,y):4===arguments.length&&set$4(x,y,obj,img)},p.imageData={},p.pixels={getLength:function(){return p.imageData.data.length?p.imageData.data.length/4:0},getPixel:function(i){var offset=4*i,data=p.imageData.data;return data[offset+3]<<24&4278190080|data[offset+0]<<16&16711680|data[offset+1]<<8&65280|255&data[offset+2]},setPixel:function(i,c){var offset=4*i,data=p.imageData.data;data[offset+0]=(16711680&c)>>>16,data[offset+1]=(65280&c)>>>8,data[offset+2]=255&c,data[offset+3]=(4278190080&c)>>>24},toArray:function(){for(var arr=[],length=p.imageData.width*p.imageData.height,data=p.imageData.data,i=0,offset=0;length>i;i++,offset+=4)arr.push(data[offset+3]<<24&4278190080|data[offset+0]<<16&16711680|data[offset+1]<<8&65280|255&data[offset+2]);return arr},set:function(arr){for(var i=0,aL=arr.length;aL>i;i++)this.setPixel(i,arr[i])}},p.loadPixels=function(){p.imageData=drawing.$ensureContext().getImageData(0,0,p.width,p.height)},p.updatePixels=function(){p.imageData&&drawing.$ensureContext().putImageData(p.imageData,0,0)},p.hint=function(which){var curContext=drawing.$ensureContext();4===which?(curContext.disable(curContext.DEPTH_TEST),curContext.depthMask(!1),curContext.clear(curContext.DEPTH_BUFFER_BIT)):-4===which?(curContext.enable(curContext.DEPTH_TEST),curContext.depthMask(!0)):-1===which||2===which?renderSmooth=!0:1===which&&(renderSmooth=!1)};var backgroundHelper=function(arg1,arg2,arg3,arg4){var obj;if(arg1 instanceof PImage||arg1.__isPImage){if(obj=arg1,!obj.loaded)throw"Error using image in background(): PImage not loaded.";if(obj.width!==p.width||obj.height!==p.height)throw"Background image must be the same dimensions as the canvas."}else obj=p.color(arg1,arg2,arg3,arg4);backgroundObj=obj};Drawing2D.prototype.background=function(arg1,arg2,arg3,arg4){arg1!==undef&&backgroundHelper(arg1,arg2,arg3,arg4),backgroundObj instanceof PImage||backgroundObj.__isPImage?(saveContext(),curContext.setTransform(1,0,0,1,0,0),p.image(backgroundObj,0,0),restoreContext()):(saveContext(),curContext.setTransform(1,0,0,1,0,0),p.alpha(backgroundObj)!==colorModeA&&curContext.clearRect(0,0,p.width,p.height),curContext.fillStyle=p.color.toString(backgroundObj),curContext.fillRect(0,0,p.width,p.height),isFillDirty=!0,restoreContext())},Drawing3D.prototype.background=function(arg1,arg2,arg3,arg4){arguments.length>0&&backgroundHelper(arg1,arg2,arg3,arg4);var c=p.color.toGLArray(backgroundObj);curContext.clearColor(c[0],c[1],c[2],c[3]),curContext.clear(curContext.COLOR_BUFFER_BIT|curContext.DEPTH_BUFFER_BIT)},Drawing2D.prototype.image=function(img,x,y,w,h){if(x=Math.round(x),y=Math.round(y),img.width>0){var bounds=(w||img.width,h||img.height,imageModeConvert(x||0,y||0,w||img.width,h||img.height,arguments.length<4)),fastImage=!!img.sourceImg&&null===curTint;if(fastImage){var htmlElement=img.sourceImg;img.__isDirty&&img.updatePixels(),curContext.drawImage(htmlElement,0,0,htmlElement.width,htmlElement.height,bounds.x,bounds.y,bounds.w,bounds.h)}else{var obj=img.toImageData();null!==curTint&&(curTint(obj),img.__isDirty=!0),curContext.drawImage(getCanvasData(obj).canvas,0,0,img.width,img.height,bounds.x,bounds.y,bounds.w,bounds.h)}}},Drawing3D.prototype.image=function(img,x,y,w,h){img.width>0&&(x=Math.round(x),y=Math.round(y),w=w||img.width,h=h||img.height,p.beginShape(p.QUADS),p.texture(img),p.vertex(x,y,0,0,0),p.vertex(x,y+h,0,0,h),p.vertex(x+w,y+h,0,w,h),p.vertex(x+w,y,0,w,0),p.endShape())},p.tint=function(a1,a2,a3,a4){var tintColor=p.color(a1,a2,a3,a4),r=p.red(tintColor)/colorModeX,g=p.green(tintColor)/colorModeY,b=p.blue(tintColor)/colorModeZ,a=p.alpha(tintColor)/colorModeA;curTint=function(obj){for(var data=obj.data,length=4*obj.width*obj.height,i=0;length>i;)data[i++]*=r,data[i++]*=g,data[i++]*=b,data[i++]*=a},curTint3d=function(data){for(var i=0;i<data.length;)data[i++]=r,data[i++]=g,data[i++]=b,data[i++]=a}},p.noTint=function(){curTint=null,curTint3d=null},p.copy=function(src,sx,sy,sw,sh,dx,dy,dw,dh){dh===undef&&(dh=dw,dw=dy,dy=dx,dx=sh,sh=sw,sw=sy,sy=sx,sx=src,src=p),p.blend(src,sx,sy,sw,sh,dx,dy,dw,dh,0)},p.blend=function(src,sx,sy,sw,sh,dx,dy,dw,dh,mode,pimgdest){if(src.isRemote)throw"Image is loaded remotely. Cannot blend image.";mode===undef&&(mode=dh,dh=dw,dw=dy,dy=dx,dx=sh,sh=sw,sw=sy,sy=sx,sx=src,src=p);var sx2=sx+sw,sy2=sy+sh,dx2=dx+dw,dy2=dy+dh,dest=pimgdest||p;(pimgdest===undef||mode===undef)&&p.loadPixels(),src.loadPixels(),src===p&&p.intersect(sx,sy,sx2,sy2,dx,dy,dx2,dy2)?p.blit_resize(p.get(sx,sy,sx2-sx,sy2-sy),0,0,sx2-sx-1,sy2-sy-1,dest.imageData.data,dest.width,dest.height,dx,dy,dx2,dy2,mode):p.blit_resize(src,sx,sy,sx2,sy2,dest.imageData.data,dest.width,dest.height,dx,dy,dx2,dy2,mode),pimgdest===undef&&p.updatePixels()};var buildBlurKernel=function(r){var i,radiusi,radius=p.floor(3.5*r);if(radius=1>radius?1:248>radius?radius:248,p.shared.blurRadius!==radius){p.shared.blurRadius=radius,p.shared.blurKernelSize=1+(p.shared.blurRadius<<1),p.shared.blurKernel=new Float32Array(p.shared.blurKernelSize);var sharedBlurKernal=p.shared.blurKernel,sharedBlurKernelSize=p.shared.blurKernelSize;p.shared.blurRadius;for(i=0;sharedBlurKernelSize>i;i++)sharedBlurKernal[i]=0;var radiusiSquared=(radius-1)*(radius-1);for(i=1;radius>i;i++)sharedBlurKernal[radius+i]=sharedBlurKernal[radiusi]=radiusiSquared;sharedBlurKernal[radius]=radius*radius}},blurARGB=function(r,aImg){var sum,cr,cg,cb,ca,m,read,ri,ym,ymi,bk0,x,y,i,offset,wh=aImg.pixels.getLength(),r2=new Float32Array(wh),g2=new Float32Array(wh),b2=new Float32Array(wh),a2=new Float32Array(wh),yi=0;buildBlurKernel(r);var aImgHeight=aImg.height,aImgWidth=aImg.width,sharedBlurKernelSize=p.shared.blurKernelSize,sharedBlurRadius=p.shared.blurRadius,sharedBlurKernal=p.shared.blurKernel,pix=aImg.imageData.data;for(y=0;aImgHeight>y;y++){for(x=0;aImgWidth>x;x++){if(cb=cg=cr=ca=sum=0,read=x-sharedBlurRadius,0>read)bk0=-read,read=0;else{if(read>=aImgWidth)break;bk0=0}for(i=bk0;sharedBlurKernelSize>i&&!(read>=aImgWidth);i++)offset=4*(read+yi),m=sharedBlurKernal[i],ca+=m*pix[offset+3],cr+=m*pix[offset],cg+=m*pix[offset+1],cb+=m*pix[offset+2],sum+=m,read++;ri=yi+x,a2[ri]=ca/sum,r2[ri]=cr/sum,g2[ri]=cg/sum,b2[ri]=cb/sum}yi+=aImgWidth}for(yi=0,ym=-sharedBlurRadius,ymi=ym*aImgWidth,y=0;aImgHeight>y;y++){for(x=0;aImgWidth>x;x++){if(cb=cg=cr=ca=sum=0,0>ym)bk0=ri=-ym,read=x;else{if(ym>=aImgHeight)break;bk0=0,ri=ym,read=x+ymi}for(i=bk0;sharedBlurKernelSize>i&&!(ri>=aImgHeight);i++)m=sharedBlurKernal[i],ca+=m*a2[read],cr+=m*r2[read],cg+=m*g2[read],cb+=m*b2[read],sum+=m,ri++,read+=aImgWidth;offset=4*(x+yi),pix[offset]=cr/sum,pix[offset+1]=cg/sum,pix[offset+2]=cb/sum,pix[offset+3]=ca/sum}yi+=aImgWidth,ymi+=aImgWidth,ym++}},dilate=function(isInverted,aImg){var currRowIdx,maxRowIdx,colOrig,colOut,currLum,idxRight,idxLeft,idxUp,idxDown,colRight,colLeft,colUp,colDown,lumRight,lumLeft,lumUp,lumDown,currIdx=0,maxIdx=aImg.pixels.getLength(),out=new Int32Array(maxIdx);if(isInverted)for(;maxIdx>currIdx;)for(currRowIdx=currIdx,maxRowIdx=currIdx+aImg.width;maxRowIdx>currIdx;)colOrig=colOut=aImg.pixels.getPixel(currIdx),idxLeft=currIdx-1,idxRight=currIdx+1,idxUp=currIdx-aImg.width,idxDown=currIdx+aImg.width,currRowIdx>idxLeft&&(idxLeft=currIdx),idxRight>=maxRowIdx&&(idxRight=currIdx),0>idxUp&&(idxUp=0),idxDown>=maxIdx&&(idxDown=currIdx),colUp=aImg.pixels.getPixel(idxUp),colLeft=aImg.pixels.getPixel(idxLeft),colDown=aImg.pixels.getPixel(idxDown),colRight=aImg.pixels.getPixel(idxRight),currLum=77*(colOrig>>16&255)+151*(colOrig>>8&255)+28*(255&colOrig),lumLeft=77*(colLeft>>16&255)+151*(colLeft>>8&255)+28*(255&colLeft),lumRight=77*(colRight>>16&255)+151*(colRight>>8&255)+28*(255&colRight),lumUp=77*(colUp>>16&255)+151*(colUp>>8&255)+28*(255&colUp),lumDown=77*(colDown>>16&255)+151*(colDown>>8&255)+28*(255&colDown),currLum>lumLeft&&(colOut=colLeft,currLum=lumLeft),currLum>lumRight&&(colOut=colRight,currLum=lumRight),currLum>lumUp&&(colOut=colUp,currLum=lumUp),currLum>lumDown&&(colOut=colDown,currLum=lumDown),out[currIdx++]=colOut;else for(;maxIdx>currIdx;)for(currRowIdx=currIdx,maxRowIdx=currIdx+aImg.width;maxRowIdx>currIdx;)colOrig=colOut=aImg.pixels.getPixel(currIdx),idxLeft=currIdx-1,idxRight=currIdx+1,idxUp=currIdx-aImg.width,idxDown=currIdx+aImg.width,currRowIdx>idxLeft&&(idxLeft=currIdx),idxRight>=maxRowIdx&&(idxRight=currIdx),0>idxUp&&(idxUp=0),idxDown>=maxIdx&&(idxDown=currIdx),colUp=aImg.pixels.getPixel(idxUp),colLeft=aImg.pixels.getPixel(idxLeft),colDown=aImg.pixels.getPixel(idxDown),colRight=aImg.pixels.getPixel(idxRight),currLum=77*(colOrig>>16&255)+151*(colOrig>>8&255)+28*(255&colOrig),lumLeft=77*(colLeft>>16&255)+151*(colLeft>>8&255)+28*(255&colLeft),lumRight=77*(colRight>>16&255)+151*(colRight>>8&255)+28*(255&colRight),lumUp=77*(colUp>>16&255)+151*(colUp>>8&255)+28*(255&colUp),lumDown=77*(colDown>>16&255)+151*(colDown>>8&255)+28*(255&colDown),lumLeft>currLum&&(colOut=colLeft,currLum=lumLeft),lumRight>currLum&&(colOut=colRight,currLum=lumRight),lumUp>currLum&&(colOut=colUp,currLum=lumUp),lumDown>currLum&&(colOut=colDown,currLum=lumDown),out[currIdx++]=colOut;aImg.pixels.set(out)};p.filter=function(kind,param,aImg){var img,col,lum,i;if(3===arguments.length?(aImg.loadPixels(),img=aImg):(p.loadPixels(),img=p),param===undef&&(param=null),img.isRemote)throw"Image is loaded remotely. Cannot filter image.";var imglen=img.pixels.getLength();switch(kind){case 11:var radius=param||1;blurARGB(radius,img);break;case 12:if(4===img.format){for(i=0;imglen>i;i++)col=255-img.pixels.getPixel(i),img.pixels.setPixel(i,4278190080|col<<16|col<<8|col);img.format=1}else for(i=0;imglen>i;i++)col=img.pixels.getPixel(i),lum=77*(col>>16&255)+151*(col>>8&255)+28*(255&col)>>8,img.pixels.setPixel(i,4278190080&col|lum<<16|lum<<8|lum);break;case 13:for(i=0;imglen>i;i++)img.pixels.setPixel(i,16777215^img.pixels.getPixel(i));break;case 15:if(null===param)throw"Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)";var levels=p.floor(param);if(2>levels||levels>255)throw"Levels must be between 2 and 255 for filter(POSTERIZE, levels)";var levels1=levels-1;for(i=0;imglen>i;i++){var rlevel=img.pixels.getPixel(i)>>16&255,glevel=img.pixels.getPixel(i)>>8&255,blevel=255&img.pixels.getPixel(i);rlevel=255*(rlevel*levels>>8)/levels1,glevel=255*(glevel*levels>>8)/levels1,blevel=255*(blevel*levels>>8)/levels1,img.pixels.setPixel(i,4278190080&img.pixels.getPixel(i)|rlevel<<16|glevel<<8|blevel)}break;case 14:for(i=0;imglen>i;i++)img.pixels.setPixel(i,4278190080|img.pixels.getPixel(i));img.format=1;break;case 16:if(null===param&&(param=.5),0>param||param>1)throw"Level must be between 0 and 1 for filter(THRESHOLD, level)";var thresh=p.floor(255*param);for(i=0;imglen>i;i++){var max=p.max((16711680&img.pixels.getPixel(i))>>16,p.max((65280&img.pixels.getPixel(i))>>8,255&img.pixels.getPixel(i)));img.pixels.setPixel(i,4278190080&img.pixels.getPixel(i)|(thresh>max?0:16777215))}break;case 17:dilate(!0,img);break;case 18:dilate(!1,img)}img.updatePixels()},p.shared={fracU:0,ifU:0,fracV:0,ifV:0,u1:0,u2:0,v1:0,v2:0,sX:0,sY:0,iw:0,iw1:0,ih1:0,ul:0,ll:0,ur:0,lr:0,cUL:0,cLL:0,cUR:0,cLR:0,srcXOffset:0,srcYOffset:0,r:0,g:0,b:0,a:0,srcBuffer:null,blurRadius:0,blurKernelSize:0,blurKernel:null},p.intersect=function(sx1,sy1,sx2,sy2,dx1,dy1,dx2,dy2){var sw=sx2-sx1+1,sh=sy2-sy1+1,dw=dx2-dx1+1,dh=dy2-dy1+1;if(sx1>dx1)dw+=dx1-sx1,dw>sw&&(dw=sw);else{var w=sw+sx1-dx1;dw>w&&(dw=w)}if(sy1>dy1)dh+=dy1-sy1,dh>sh&&(dh=sh);else{var h=sh+sy1-dy1;dh>h&&(dh=h)}return!(0>=dw||0>=dh)};var blendFuncs={};blendFuncs[1]=p.modes.blend,blendFuncs[2]=p.modes.add,blendFuncs[4]=p.modes.subtract,blendFuncs[8]=p.modes.lightest,blendFuncs[16]=p.modes.darkest,blendFuncs[0]=p.modes.replace,blendFuncs[32]=p.modes.difference,blendFuncs[64]=p.modes.exclusion,blendFuncs[128]=p.modes.multiply,blendFuncs[256]=p.modes.screen,blendFuncs[512]=p.modes.overlay,blendFuncs[1024]=p.modes.hard_light,blendFuncs[2048]=p.modes.soft_light,blendFuncs[4096]=p.modes.dodge,blendFuncs[8192]=p.modes.burn,p.blit_resize=function(img,srcX1,srcY1,srcX2,srcY2,destPixels,screenW,screenH,destX1,destY1,destX2,destY2,mode){var x,y;0>srcX1&&(srcX1=0),0>srcY1&&(srcY1=0),srcX2>=img.width&&(srcX2=img.width-1),srcY2>=img.height&&(srcY2=img.height-1);var srcW=srcX2-srcX1,srcH=srcY2-srcY1,destW=destX2-destX1,destH=destY2-destY1;if(!(0>=destW||0>=destH||0>=srcW||0>=srcH||destX1>=screenW||destY1>=screenH||srcX1>=img.width||srcY1>=img.height)){var dx=Math.floor(srcW/destW*32768),dy=Math.floor(srcH/destH*32768),pshared=p.shared;pshared.srcXOffset=Math.floor(0>destX1?-destX1*dx:32768*srcX1),
pshared.srcYOffset=Math.floor(0>destY1?-destY1*dy:32768*srcY1),0>destX1&&(destW+=destX1,destX1=0),0>destY1&&(destH+=destY1,destY1=0),destW=Math.min(destW,screenW-destX1),destH=Math.min(destH,screenH-destY1);var destColor,destOffset=destY1*screenW+destX1;pshared.srcBuffer=img.imageData.data,pshared.iw=img.width,pshared.iw1=img.width-1,pshared.ih1=img.height-1;var blendedColor,idx,cULoffset,cURoffset,cLLoffset,cLRoffset,blendFunc=(p.filter_bilinear,p.filter_new_scanline,blendFuncs[mode]),ALPHA_MASK=4278190080,RED_MASK=16711680,GREEN_MASK=65280,BLUE_MASK=255,PREC_MAXVAL=32767,PRECISIONB=15,PREC_RED_SHIFT=1,PREC_ALPHA_SHIFT=9,srcBuffer=pshared.srcBuffer,min=Math.min;for(y=0;destH>y;y++){for(pshared.sX=pshared.srcXOffset,pshared.fracV=pshared.srcYOffset&PREC_MAXVAL,pshared.ifV=PREC_MAXVAL-pshared.fracV,pshared.v1=(pshared.srcYOffset>>PRECISIONB)*pshared.iw,pshared.v2=min((pshared.srcYOffset>>PRECISIONB)+1,pshared.ih1)*pshared.iw,x=0;destW>x;x++)idx=4*(destOffset+x),destColor=destPixels[idx+3]<<24&ALPHA_MASK|destPixels[idx]<<16&RED_MASK|destPixels[idx+1]<<8&GREEN_MASK|destPixels[idx+2]&BLUE_MASK,pshared.fracU=pshared.sX&PREC_MAXVAL,pshared.ifU=PREC_MAXVAL-pshared.fracU,pshared.ul=pshared.ifU*pshared.ifV>>PRECISIONB,pshared.ll=pshared.ifU*pshared.fracV>>PRECISIONB,pshared.ur=pshared.fracU*pshared.ifV>>PRECISIONB,pshared.lr=pshared.fracU*pshared.fracV>>PRECISIONB,pshared.u1=pshared.sX>>PRECISIONB,pshared.u2=min(pshared.u1+1,pshared.iw1),cULoffset=4*(pshared.v1+pshared.u1),cURoffset=4*(pshared.v1+pshared.u2),cLLoffset=4*(pshared.v2+pshared.u1),cLRoffset=4*(pshared.v2+pshared.u2),pshared.cUL=srcBuffer[cULoffset+3]<<24&ALPHA_MASK|srcBuffer[cULoffset]<<16&RED_MASK|srcBuffer[cULoffset+1]<<8&GREEN_MASK|srcBuffer[cULoffset+2]&BLUE_MASK,pshared.cUR=srcBuffer[cURoffset+3]<<24&ALPHA_MASK|srcBuffer[cURoffset]<<16&RED_MASK|srcBuffer[cURoffset+1]<<8&GREEN_MASK|srcBuffer[cURoffset+2]&BLUE_MASK,pshared.cLL=srcBuffer[cLLoffset+3]<<24&ALPHA_MASK|srcBuffer[cLLoffset]<<16&RED_MASK|srcBuffer[cLLoffset+1]<<8&GREEN_MASK|srcBuffer[cLLoffset+2]&BLUE_MASK,pshared.cLR=srcBuffer[cLRoffset+3]<<24&ALPHA_MASK|srcBuffer[cLRoffset]<<16&RED_MASK|srcBuffer[cLRoffset+1]<<8&GREEN_MASK|srcBuffer[cLRoffset+2]&BLUE_MASK,pshared.r=pshared.ul*((pshared.cUL&RED_MASK)>>16)+pshared.ll*((pshared.cLL&RED_MASK)>>16)+pshared.ur*((pshared.cUR&RED_MASK)>>16)+pshared.lr*((pshared.cLR&RED_MASK)>>16)<<PREC_RED_SHIFT&RED_MASK,pshared.g=pshared.ul*(pshared.cUL&GREEN_MASK)+pshared.ll*(pshared.cLL&GREEN_MASK)+pshared.ur*(pshared.cUR&GREEN_MASK)+pshared.lr*(pshared.cLR&GREEN_MASK)>>>PRECISIONB&GREEN_MASK,pshared.b=pshared.ul*(pshared.cUL&BLUE_MASK)+pshared.ll*(pshared.cLL&BLUE_MASK)+pshared.ur*(pshared.cUR&BLUE_MASK)+pshared.lr*(pshared.cLR&BLUE_MASK)>>>PRECISIONB,pshared.a=pshared.ul*((pshared.cUL&ALPHA_MASK)>>>24)+pshared.ll*((pshared.cLL&ALPHA_MASK)>>>24)+pshared.ur*((pshared.cUR&ALPHA_MASK)>>>24)+pshared.lr*((pshared.cLR&ALPHA_MASK)>>>24)<<PREC_ALPHA_SHIFT&ALPHA_MASK,blendedColor=blendFunc(destColor,pshared.a|pshared.r|pshared.g|pshared.b),destPixels[idx]=(blendedColor&RED_MASK)>>>16,destPixels[idx+1]=(blendedColor&GREEN_MASK)>>>8,destPixels[idx+2]=blendedColor&BLUE_MASK,destPixels[idx+3]=(blendedColor&ALPHA_MASK)>>>24,pshared.sX+=dx;destOffset+=screenW,pshared.srcYOffset+=dy}}},p.loadFont=function(name,size){if(name===undef)throw"font name required in loadFont.";if(-1===name.indexOf(".svg"))return size===undef&&(size=curTextFont.size),PFont.get(name,size);var font=p.loadGlyphs(name);return{name:name,css:"12px sans-serif",glyph:!0,units_per_em:font.units_per_em,horiz_adv_x:1/font.units_per_em*font.horiz_adv_x,ascent:font.ascent,descent:font.descent,width:function(str){for(var width=0,len=str.length,i=0;len>i;i++)try{width+=parseFloat(p.glyphLook(p.glyphTable[name],str[i]).horiz_adv_x)}catch(e){Processing.debug(e)}return width/p.glyphTable[name].units_per_em}}},p.createFont=function(name,size){return p.loadFont(name,size)},p.textFont=function(pfont,size){size!==undef&&(pfont.glyph||(pfont=PFont.get(pfont.name,size)),curTextSize=size),curTextFont=pfont,curFontName=curTextFont.name,curTextAscent=curTextFont.ascent,curTextDescent=curTextFont.descent,curTextLeading=curTextFont.leading;var curContext=drawing.$ensureContext();curContext.font=curTextFont.css},p.textSize=function(size){curTextFont=PFont.get(curFontName,size),curTextSize=size,curTextAscent=curTextFont.ascent,curTextDescent=curTextFont.descent,curTextLeading=curTextFont.leading;var curContext=drawing.$ensureContext();curContext.font=curTextFont.css},p.textAscent=function(){return curTextAscent},p.textDescent=function(){return curTextDescent},p.textLeading=function(leading){curTextLeading=leading},p.textAlign=function(xalign,yalign){horizontalTextAlignment=xalign,verticalTextAlignment=yalign||0},Drawing2D.prototype.textWidth=function(str){var i,lines=toP5String(str).split(/\r?\n/g),width=0,linesCount=lines.length;for(curContext.font=curTextFont.css,i=0;linesCount>i;++i)width=Math.max(width,curTextFont.measureTextWidth(lines[i]));return 0|width},Drawing3D.prototype.textWidth=function(str){var i,lines=toP5String(str).split(/\r?\n/g),width=0,linesCount=lines.length;textcanvas===undef&&(textcanvas=document.createElement("canvas"));var textContext=textcanvas.getContext("2d");for(textContext.font=curTextFont.css,i=0;linesCount>i;++i)width=Math.max(width,textContext.measureText(lines[i]).width);return 0|width},p.glyphLook=function(font,chr){try{switch(chr){case"1":return font.one;case"2":return font.two;case"3":return font.three;case"4":return font.four;case"5":return font.five;case"6":return font.six;case"7":return font.seven;case"8":return font.eight;case"9":return font.nine;case"0":return font.zero;case" ":return font.space;case"$":return font.dollar;case"!":return font.exclam;case'"':return font.quotedbl;case"#":return font.numbersign;case"%":return font.percent;case"&":return font.ampersand;case"'":return font.quotesingle;case"(":return font.parenleft;case")":return font.parenright;case"*":return font.asterisk;case"+":return font.plus;case",":return font.comma;case"-":return font.hyphen;case".":return font.period;case"/":return font.slash;case"_":return font.underscore;case":":return font.colon;case";":return font.semicolon;case"<":return font.less;case"=":return font.equal;case">":return font.greater;case"?":return font.question;case"@":return font.at;case"[":return font.bracketleft;case"\\":return font.backslash;case"]":return font.bracketright;case"^":return font.asciicircum;case"`":return font.grave;case"{":return font.braceleft;case"|":return font.bar;case"}":return font.braceright;case"~":return font.asciitilde;default:return font[chr]}}catch(e){Processing.debug(e)}},Drawing2D.prototype.text$line=function(str,x,y,z,align){var textWidth=0,xOffset=0;if(curTextFont.glyph){var font=p.glyphTable[curFontName];saveContext(),curContext.translate(x,y+curTextSize),(39===align||3===align)&&(textWidth=font.width(str),xOffset=39===align?-textWidth:-textWidth/2);var upem=font.units_per_em,newScale=1/upem*curTextSize;curContext.scale(newScale,newScale);for(var i=0,len=str.length;len>i;i++)try{p.glyphLook(font,str[i]).draw()}catch(e){Processing.debug(e)}restoreContext()}else str&&"fillText"in curContext&&(isFillDirty&&(curContext.fillStyle=p.color.toString(currentFillColor),isFillDirty=!1),(39===align||3===align)&&(textWidth=curTextFont.measureTextWidth(str),xOffset=39===align?-textWidth:-textWidth/2),curContext.fillText(str,x+xOffset,y))},Drawing3D.prototype.text$line=function(str,x,y,z,align){textcanvas===undef&&(textcanvas=document.createElement("canvas"));var oldContext=curContext;curContext=textcanvas.getContext("2d"),curContext.font=curTextFont.css;var textWidth=curTextFont.measureTextWidth(str);textcanvas.width=textWidth,textcanvas.height=curTextSize,curContext=textcanvas.getContext("2d"),curContext.font=curTextFont.css,curContext.textBaseline="top",Drawing2D.prototype.text$line(str,0,0,0,37);var aspect=textcanvas.width/textcanvas.height;curContext=oldContext,curContext.bindTexture(curContext.TEXTURE_2D,textTex),curContext.texImage2D(curContext.TEXTURE_2D,0,curContext.RGBA,curContext.RGBA,curContext.UNSIGNED_BYTE,textcanvas),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_MAG_FILTER,curContext.LINEAR),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_MIN_FILTER,curContext.LINEAR),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_WRAP_T,curContext.CLAMP_TO_EDGE),curContext.texParameteri(curContext.TEXTURE_2D,curContext.TEXTURE_WRAP_S,curContext.CLAMP_TO_EDGE);var xOffset=0;39===align?xOffset=-textWidth:3===align&&(xOffset=-textWidth/2);var model=new PMatrix3D,scalefactor=.5*curTextSize;model.translate(x+xOffset-scalefactor/2,y-scalefactor,z),model.scale(-aspect*scalefactor,-scalefactor,scalefactor),model.translate(-1,-1,-1),model.transpose();var view=new PMatrix3D;view.scale(1,-1,1),view.apply(modelView.array()),view.transpose(),curContext.useProgram(programObject2D),vertexAttribPointer("aVertex2d",programObject2D,"aVertex",3,textBuffer),vertexAttribPointer("aTextureCoord2d",programObject2D,"aTextureCoord",2,textureBuffer),uniformi("uSampler2d",programObject2D,"uSampler",[0]),uniformi("uIsDrawingText2d",programObject2D,"uIsDrawingText",!0),uniformMatrix("uModel2d",programObject2D,"uModel",!1,model.array()),uniformMatrix("uView2d",programObject2D,"uView",!1,view.array()),uniformf("uColor2d",programObject2D,"uColor",fillStyle),curContext.bindBuffer(curContext.ELEMENT_ARRAY_BUFFER,indexBuffer),curContext.drawElements(curContext.TRIANGLES,6,curContext.UNSIGNED_SHORT,0)},p.text=function(){5!==textMode&&(3===arguments.length?text$4(toP5String(arguments[0]),arguments[1],arguments[2],0):4===arguments.length?text$4(toP5String(arguments[0]),arguments[1],arguments[2],arguments[3]):5===arguments.length?text$6(toP5String(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],0):6===arguments.length&&text$6(toP5String(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]))},p.textMode=function(mode){textMode=mode},p.loadGlyphs=function(url){var x,y,cx,cy,nx,ny,d,a,lastCom,lenC,horiz_adv_x,path,getXY="[0-9\\-]+",regex=function(needle,hay){var latest,i=0,results=[],regexp=new RegExp(needle,"g");for(latest=results[i]=regexp.exec(hay);latest;)i++,latest=results[i]=regexp.exec(hay);return results},buildPath=function(d){var c=regex("[A-Za-z][0-9\\- ]+|Z",d),beforePathDraw=function(){return saveContext(),drawing.$ensureContext()},afterPathDraw=function(){executeContextFill(),executeContextStroke(),restoreContext()};path="return {draw:function(){var curContext=beforePathDraw();curContext.beginPath();",x=0,y=0,cx=0,cy=0,nx=0,ny=0,d=0,a=0,lastCom="",lenC=c.length-1;for(var j=0;lenC>j;j++){var com=c[j][0],xy=regex(getXY,com);switch(com[0]){case"M":x=parseFloat(xy[0][0]),y=parseFloat(xy[1][0]),path+="curContext.moveTo("+x+","+-y+");";break;case"L":x=parseFloat(xy[0][0]),y=parseFloat(xy[1][0]),path+="curContext.lineTo("+x+","+-y+");";break;case"H":x=parseFloat(xy[0][0]),path+="curContext.lineTo("+x+","+-y+");";break;case"V":y=parseFloat(xy[0][0]),path+="curContext.lineTo("+x+","+-y+");";break;case"T":nx=parseFloat(xy[0][0]),ny=parseFloat(xy[1][0]),"Q"===lastCom||"T"===lastCom?(d=Math.sqrt(Math.pow(x-cx,2)+Math.pow(cy-y,2)),a=Math.PI+Math.atan2(cx-x,cy-y),cx=x+Math.sin(a)*d,cy=y+Math.cos(a)*d):(cx=x,cy=y),path+="curContext.quadraticCurveTo("+cx+","+-cy+","+nx+","+-ny+");",x=nx,y=ny;break;case"Q":cx=parseFloat(xy[0][0]),cy=parseFloat(xy[1][0]),nx=parseFloat(xy[2][0]),ny=parseFloat(xy[3][0]),path+="curContext.quadraticCurveTo("+cx+","+-cy+","+nx+","+-ny+");",x=nx,y=ny;break;case"Z":path+="curContext.closePath();"}lastCom=com[0]}return path+="afterPathDraw();",path+="curContext.translate("+horiz_adv_x+",0);",path+="}}",new Function("beforePathDraw","afterPathDraw",path)(beforePathDraw,afterPathDraw)},parseSVGFont=function(svg){var font=svg.getElementsByTagName("font");p.glyphTable[url].horiz_adv_x=font[0].getAttribute("horiz-adv-x");var font_face=svg.getElementsByTagName("font-face")[0];p.glyphTable[url].units_per_em=parseFloat(font_face.getAttribute("units-per-em")),p.glyphTable[url].ascent=parseFloat(font_face.getAttribute("ascent")),p.glyphTable[url].descent=parseFloat(font_face.getAttribute("descent"));for(var glyph=svg.getElementsByTagName("glyph"),len=glyph.length,i=0;len>i;i++){var unicode=glyph[i].getAttribute("unicode"),name=glyph[i].getAttribute("glyph-name");horiz_adv_x=glyph[i].getAttribute("horiz-adv-x"),null===horiz_adv_x&&(horiz_adv_x=p.glyphTable[url].horiz_adv_x),d=glyph[i].getAttribute("d"),d!==undef&&(path=buildPath(d),p.glyphTable[url][name]={name:name,unicode:unicode,horiz_adv_x:horiz_adv_x,draw:path.draw})}},loadXML=function(){var xmlDoc;try{xmlDoc=document.implementation.createDocument("","",null)}catch(e_fx_op){return void Processing.debug(e_fx_op.message)}try{xmlDoc.async=!1,xmlDoc.load(url),parseSVGFont(xmlDoc.getElementsByTagName("svg")[0])}catch(e_sf_ch){Processing.debug(e_sf_ch);try{var xmlhttp=new window.XMLHttpRequest;xmlhttp.open("GET",url,!1),xmlhttp.send(null),parseSVGFont(xmlhttp.responseXML.documentElement)}catch(e){Processing.debug(e_sf_ch)}}};return p.glyphTable[url]={},loadXML(url),p.glyphTable[url]},p.param=function(name){var attributeName="data-processing-"+name;if(curElement.hasAttribute(attributeName))return curElement.getAttribute(attributeName);for(var i=0,len=curElement.childNodes.length;len>i;++i){var item=curElement.childNodes.item(i);if(1===item.nodeType&&"param"===item.tagName.toLowerCase()&&item.getAttribute("name")===name)return item.getAttribute("value")}return curSketch.params.hasOwnProperty(name)?curSketch.params[name]:null},DrawingPre.prototype.translate=createDrawingPreFunction("translate"),DrawingPre.prototype.transform=createDrawingPreFunction("transform"),DrawingPre.prototype.scale=createDrawingPreFunction("scale"),DrawingPre.prototype.pushMatrix=createDrawingPreFunction("pushMatrix"),DrawingPre.prototype.popMatrix=createDrawingPreFunction("popMatrix"),DrawingPre.prototype.resetMatrix=createDrawingPreFunction("resetMatrix"),DrawingPre.prototype.applyMatrix=createDrawingPreFunction("applyMatrix"),DrawingPre.prototype.rotate=createDrawingPreFunction("rotate"),DrawingPre.prototype.rotateZ=createDrawingPreFunction("rotateZ"),DrawingPre.prototype.shearX=createDrawingPreFunction("shearX"),DrawingPre.prototype.shearY=createDrawingPreFunction("shearY"),DrawingPre.prototype.redraw=createDrawingPreFunction("redraw"),DrawingPre.prototype.toImageData=createDrawingPreFunction("toImageData"),DrawingPre.prototype.ambientLight=createDrawingPreFunction("ambientLight"),DrawingPre.prototype.directionalLight=createDrawingPreFunction("directionalLight"),DrawingPre.prototype.lightFalloff=createDrawingPreFunction("lightFalloff"),DrawingPre.prototype.lightSpecular=createDrawingPreFunction("lightSpecular"),DrawingPre.prototype.pointLight=createDrawingPreFunction("pointLight"),DrawingPre.prototype.noLights=createDrawingPreFunction("noLights"),DrawingPre.prototype.spotLight=createDrawingPreFunction("spotLight"),DrawingPre.prototype.beginCamera=createDrawingPreFunction("beginCamera"),DrawingPre.prototype.endCamera=createDrawingPreFunction("endCamera"),DrawingPre.prototype.frustum=createDrawingPreFunction("frustum"),DrawingPre.prototype.box=createDrawingPreFunction("box"),DrawingPre.prototype.sphere=createDrawingPreFunction("sphere"),DrawingPre.prototype.ambient=createDrawingPreFunction("ambient"),DrawingPre.prototype.emissive=createDrawingPreFunction("emissive"),DrawingPre.prototype.shininess=createDrawingPreFunction("shininess"),DrawingPre.prototype.specular=createDrawingPreFunction("specular"),DrawingPre.prototype.fill=createDrawingPreFunction("fill"),DrawingPre.prototype.stroke=createDrawingPreFunction("stroke"),DrawingPre.prototype.strokeWeight=createDrawingPreFunction("strokeWeight"),DrawingPre.prototype.smooth=createDrawingPreFunction("smooth"),DrawingPre.prototype.noSmooth=createDrawingPreFunction("noSmooth"),DrawingPre.prototype.point=createDrawingPreFunction("point"),DrawingPre.prototype.vertex=createDrawingPreFunction("vertex"),DrawingPre.prototype.endShape=createDrawingPreFunction("endShape"),DrawingPre.prototype.bezierVertex=createDrawingPreFunction("bezierVertex"),DrawingPre.prototype.curveVertex=createDrawingPreFunction("curveVertex"),DrawingPre.prototype.curve=createDrawingPreFunction("curve"),DrawingPre.prototype.line=createDrawingPreFunction("line"),DrawingPre.prototype.bezier=createDrawingPreFunction("bezier"),DrawingPre.prototype.rect=createDrawingPreFunction("rect"),DrawingPre.prototype.ellipse=createDrawingPreFunction("ellipse"),DrawingPre.prototype.background=createDrawingPreFunction("background"),DrawingPre.prototype.image=createDrawingPreFunction("image"),DrawingPre.prototype.textWidth=createDrawingPreFunction("textWidth"),DrawingPre.prototype.text$line=createDrawingPreFunction("text$line"),DrawingPre.prototype.$ensureContext=createDrawingPreFunction("$ensureContext"),DrawingPre.prototype.$newPMatrix=createDrawingPreFunction("$newPMatrix"),DrawingPre.prototype.size=function(aWidth,aHeight,aMode){wireDimensionalFunctions(2===aMode?"3D":"2D"),p.size(aWidth,aHeight,aMode)},DrawingPre.prototype.$init=nop,Drawing2D.prototype.$init=function(){p.size(p.width,p.height),curContext.lineCap="round",p.noSmooth(),p.disableContextMenu()},Drawing3D.prototype.$init=function(){p.use3DContext=!0,p.disableContextMenu()},DrawingShared.prototype.$ensureContext=function(){return curContext},attachEventHandler(curElement,"touchstart",function(t){curElement.setAttribute("style","-webkit-user-select: none"),curElement.setAttribute("onclick","void(0)"),curElement.setAttribute("style","-webkit-tap-highlight-color:rgba(0,0,0,0)");for(var i=0,ehl=eventHandlers.length;ehl>i;i++){var type=eventHandlers[i].type;("mouseout"===type||"mousemove"===type||"mousedown"===type||"mouseup"===type||"DOMMouseScroll"===type||"mousewheel"===type||"touchstart"===type)&&detachEventHandler(eventHandlers[i])}p.touchStart!==undef||p.touchMove!==undef||p.touchEnd!==undef||p.touchCancel!==undef?(attachEventHandler(curElement,"touchstart",function(t){p.touchStart!==undef&&(t=addTouchEventOffset(t),p.touchStart(t))}),attachEventHandler(curElement,"touchmove",function(t){p.touchMove!==undef&&(t.preventDefault(),t=addTouchEventOffset(t),p.touchMove(t))}),attachEventHandler(curElement,"touchend",function(t){p.touchEnd!==undef&&(t=addTouchEventOffset(t),p.touchEnd(t))}),attachEventHandler(curElement,"touchcancel",function(t){p.touchCancel!==undef&&(t=addTouchEventOffset(t),p.touchCancel(t))})):(attachEventHandler(curElement,"touchstart",function(e){updateMousePosition(curElement,e.touches[0]),p.__mousePressed=!0,p.mouseDragging=!1,p.mouseButton=37,"function"==typeof p.mousePressed&&p.mousePressed()}),attachEventHandler(curElement,"touchmove",function(e){e.preventDefault(),updateMousePosition(curElement,e.touches[0]),"function"!=typeof p.mouseMoved||p.__mousePressed||p.mouseMoved(),"function"==typeof p.mouseDragged&&p.__mousePressed&&(p.mouseDragged(),p.mouseDragging=!0)}),attachEventHandler(curElement,"touchend",function(e){p.__mousePressed=!1,"function"!=typeof p.mouseClicked||p.mouseDragging||p.mouseClicked(),"function"==typeof p.mouseReleased&&p.mouseReleased()})),curElement.dispatchEvent(t)}),function(){var enabled=!0,contextMenu=function(e){e.preventDefault(),e.stopPropagation()};p.disableContextMenu=function(){enabled&&(attachEventHandler(curElement,"contextmenu",contextMenu),enabled=!1)},p.enableContextMenu=function(){enabled||(detachEventHandler({elem:curElement,type:"contextmenu",fn:contextMenu}),enabled=!0)}}(),attachEventHandler(curElement,"mousemove",function(e){updateMousePosition(curElement,e),"function"!=typeof p.mouseMoved||p.__mousePressed||p.mouseMoved(),"function"==typeof p.mouseDragged&&p.__mousePressed&&(p.mouseDragged(),p.mouseDragging=!0)}),attachEventHandler(curElement,"mouseout",function(e){"function"==typeof p.mouseOut&&p.mouseOut()}),attachEventHandler(curElement,"mouseover",function(e){updateMousePosition(curElement,e),"function"==typeof p.mouseOver&&p.mouseOver()}),curElement.onmousedown=function(){return curElement.focus(),!1},attachEventHandler(curElement,"mousedown",function(e){switch(p.__mousePressed=!0,p.mouseDragging=!1,e.which){case 1:p.mouseButton=37;break;case 2:p.mouseButton=3;break;case 3:p.mouseButton=39}"function"==typeof p.mousePressed&&p.mousePressed()}),attachEventHandler(curElement,"mouseup",function(e){p.__mousePressed=!1,"function"!=typeof p.mouseClicked||p.mouseDragging||p.mouseClicked(),"function"==typeof p.mouseReleased&&p.mouseReleased()});var mouseWheelHandler=function(e){var delta=0;e.wheelDelta?(delta=e.wheelDelta/120,window.opera&&(delta=-delta)):e.detail&&(delta=-e.detail/3),p.mouseScroll=delta,delta&&"function"==typeof p.mouseScrolled&&p.mouseScrolled()};if(attachEventHandler(document,"DOMMouseScroll",mouseWheelHandler),attachEventHandler(document,"mousewheel",mouseWheelHandler),curElement.getAttribute("tabindex")||curElement.setAttribute("tabindex",0),pgraphicsMode)curSketch=new Processing.Sketch,wireDimensionalFunctions(),p.size=function(w,h,render){wireDimensionalFunctions(render&&2===render?"3D":"2D"),p.size(w,h,render)};else{curSketch=aCode instanceof Processing.Sketch?aCode:"function"==typeof aCode?new Processing.Sketch(aCode):aCode?Processing.compile(aCode):new Processing.Sketch(function(){}),p.externals.sketch=curSketch,wireDimensionalFunctions(),curElement.onfocus=function(){p.focused=!0},curElement.onblur=function(){p.focused=!1,curSketch.options.globalKeyEvents||resetKeyPressed()},curSketch.options.pauseOnBlur&&(attachEventHandler(window,"focus",function(){doLoop&&p.loop()}),attachEventHandler(window,"blur",function(){doLoop&&loopStarted&&(p.noLoop(),doLoop=!0),resetKeyPressed()}));var keyTrigger=curSketch.options.globalKeyEvents?window:curElement;attachEventHandler(keyTrigger,"keydown",handleKeydown),attachEventHandler(keyTrigger,"keypress",handleKeypress),attachEventHandler(keyTrigger,"keyup",handleKeyup);for(var i in Processing.lib)Processing.lib.hasOwnProperty(i)&&(Processing.lib[i].hasOwnProperty("attach")?Processing.lib[i].attach(p):Processing.lib[i]instanceof Function&&Processing.lib[i].call(this));var retryInterval=100,executeSketch=function(processing){if(curSketch.imageCache.pending||PFont.preloading.pending(retryInterval))window.setTimeout(function(){executeSketch(processing)},retryInterval);else{if(window.opera){var link,element,operaCache=curSketch.imageCache.operaCache;for(link in operaCache)operaCache.hasOwnProperty(link)&&(element=operaCache[link],null!==element&&document.body.removeChild(element),delete operaCache[link])}curSketch.attach(processing,defaultScope),curSketch.onLoad(processing),processing.setup&&(processing.setup(),processing.resetMatrix(),curSketch.onSetup()),resetContext(),processing.draw&&(doLoop?processing.loop():processing.redraw())}};addInstance(this),executeSketch(p)}};Processing.debug=debug,Processing.prototype=defaultScope,Processing.compile=function(pdeCode){var sketch=new Processing.Sketch,code=preprocessCode(pdeCode,sketch),compiledPde=parseProcessing(code);return sketch.sourceCode=compiledPde,sketch};var tinylogLite=function(){var tinylogLite={},undef="undefined",func="function",False=!1,True=!0,logLimit=512,log="log";return typeof tinylog!==undef&&typeof tinylog[log]===func?tinylogLite[log]=tinylog[log]:typeof document===undef||document.fake?typeof print===func&&(tinylogLite[log]=print):function(){var doc=document,$div="div",$style="style",$title="title",containerStyles={zIndex:1e4,position:"fixed",bottom:"0px",width:"100%",height:"15%",fontFamily:"sans-serif",color:"#ccc",backgroundColor:"black"},outputStyles={position:"relative",fontFamily:"monospace",overflow:"auto",height:"100%",paddingTop:"5px"},resizerStyles={height:"5px",marginTop:"-5px",cursor:"n-resize",backgroundColor:"darkgrey"},closeButtonStyles={position:"absolute",top:"5px",right:"20px",color:"#111",MozBorderRadius:"4px",webkitBorderRadius:"4px",borderRadius:"4px",cursor:"pointer",fontWeight:"normal",textAlign:"center",padding:"3px 5px",backgroundColor:"#333",fontSize:"12px"},entryStyles={minHeight:"16px"},entryTextStyles={fontSize:"12px",margin:"0 8px 0 8px",maxWidth:"100%",whiteSpace:"pre-wrap",overflow:"auto"},view=doc.defaultView,docElem=doc.documentElement,docElemStyle=docElem[$style],setStyles=function(){for(var elemStyle,styles,style,i=arguments.length;i--;){styles=arguments[i--],elemStyle=arguments[i][$style];for(style in styles)styles.hasOwnProperty(style)&&(elemStyle[style]=styles[style])}},observer=function(obj,event,handler){return obj.addEventListener?obj.addEventListener(event,handler,False):obj.attachEvent&&obj.attachEvent("on"+event,handler),[obj,event,handler]},unobserve=function(obj,event,handler){obj.removeEventListener?obj.removeEventListener(event,handler,False):obj.detachEvent&&obj.detachEvent("on"+event,handler)},clearChildren=function(node){for(var children=node.childNodes,child=children.length;child--;)node.removeChild(children.item(0))},append=function(to,elem){return to.appendChild(elem)},createElement=function(localName){return doc.createElement(localName)},createTextNode=function(text){return doc.createTextNode(text)},createLog=tinylogLite[log]=function(message){var uninit,originalPadding=docElemStyle.paddingBottom,container=createElement($div),containerStyle=container[$style],resizer=append(container,createElement($div)),output=append(container,createElement($div)),closeButton=append(container,createElement($div)),resizingLog=False,previousHeight=False,previousScrollTop=False,messages=0,updateSafetyMargin=function(){docElemStyle.paddingBottom=container.clientHeight+"px"},setContainerHeight=function(height){var viewHeight=view.innerHeight,resizerHeight=resizer.clientHeight;0>height?height=0:height+resizerHeight>viewHeight&&(height=viewHeight-resizerHeight),containerStyle.height=height/viewHeight*100+"%",updateSafetyMargin()},observers=[observer(doc,"mousemove",function(evt){resizingLog&&(setContainerHeight(view.innerHeight-evt.clientY),output.scrollTop=previousScrollTop)}),observer(doc,"mouseup",function(){resizingLog&&(resizingLog=previousScrollTop=False)}),observer(resizer,"dblclick",function(evt){evt.preventDefault(),previousHeight?(setContainerHeight(previousHeight),previousHeight=False):(previousHeight=container.clientHeight,containerStyle.height="0px")}),observer(resizer,"mousedown",function(evt){evt.preventDefault(),resizingLog=True,previousScrollTop=output.scrollTop}),observer(resizer,"contextmenu",function(){resizingLog=False}),observer(closeButton,"click",function(){uninit()})];uninit=function(){for(var i=observers.length;i--;)unobserve.apply(tinylogLite,observers[i]);docElem.removeChild(container),docElemStyle.paddingBottom=originalPadding,clearChildren(output),clearChildren(container),tinylogLite[log]=createLog},setStyles(container,containerStyles,output,outputStyles,resizer,resizerStyles,closeButton,closeButtonStyles),closeButton[$title]="Close Log",append(closeButton,createTextNode("")),resizer[$title]="Double-click to toggle log minimization",docElem.insertBefore(container,docElem.firstChild),tinylogLite[log]=function(message){messages===logLimit?output.removeChild(output.firstChild):messages++;var entry=append(output,createElement($div)),entryText=append(entry,createElement($div));entry[$title]=(new Date).toLocaleTimeString(),setStyles(entry,entryStyles,entryText,entryTextStyles),append(entryText,createTextNode(message)),output.scrollTop=output.scrollHeight},tinylogLite[log](message),updateSafetyMargin()}}(),tinylogLite}();Processing.logger=tinylogLite,Processing.version="1.4.1",Processing.lib={},Processing.registerLibrary=function(name,desc){Processing.lib[name]=desc,desc.hasOwnProperty("init")&&desc.init(defaultScope)},Processing.instances=processingInstances,Processing.getInstanceById=function(name){return processingInstances[processingInstanceIds[name]]},Processing.Sketch=function(attachFunction){this.attachFunction=attachFunction,this.options={pauseOnBlur:!1,globalKeyEvents:!1},this.onLoad=nop,this.onSetup=nop,this.onPause=nop,this.onLoop=nop,this.onFrameStart=nop,this.onFrameEnd=nop,this.onExit=nop,this.params={},this.imageCache={pending:0,images:{},operaCache:{},add:function(href,img){if(!this.images[href]&&(isDOMPresent||(this.images[href]=null),img||(img=new Image,img.onload=function(owner){return function(){owner.pending--}}(this),this.pending++,img.src=href),this.images[href]=img,window.opera)){var div=document.createElement("div");div.appendChild(img),div.style.position="absolute",div.style.opacity=0,div.style.width="1px",div.style.height="1px",this.operaCache[href]||(document.body.appendChild(div),this.operaCache[href]=div)}}},this.sourceCode=void 0,this.attach=function(processing){if("function"==typeof this.attachFunction)this.attachFunction(processing);else{if(!this.sourceCode)throw"Unable to attach sketch to the processing instance";var func=new Function("return ("+this.sourceCode+");")();func(processing),this.attachFunction=func}},this.toString=function(){var i,code="((function(Sketch) {\n";code+="var sketch = new Sketch(\n"+this.sourceCode+");\n";for(i in this.options)if(this.options.hasOwnProperty(i)){var value=this.options[i];code+="sketch.options."+i+" = "+("string"==typeof value?'"'+value+'"':""+value)+";\n"}for(i in this.imageCache)this.options.hasOwnProperty(i)&&(code+='sketch.imageCache.add("'+i+'");\n');return code+="return sketch;\n})(Processing.Sketch))"}};var loadSketchFromSources=function(canvas,sources){function ajaxAsync(url,callback){var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(4===xhr.readyState){var error;200!==xhr.status&&0!==xhr.status?error="Invalid XHR status "+xhr.status:""===xhr.responseText&&(error="withCredentials"in new XMLHttpRequest&&(new XMLHttpRequest).withCredentials===!1&&"file:"===window.location.protocol?"XMLHttpRequest failure, possibly due to a same-origin policy violation. You can try loading this page in another browser, or load it from http://localhost using a local webserver. See the Processing.js README for a more detailed explanation of this problem and solutions.":"File is empty."),callback(xhr.responseText,error)}},xhr.open("GET",url,!0),xhr.overrideMimeType&&xhr.overrideMimeType("application/json"),xhr.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT"),xhr.send(null)}function loadBlock(index,filename){function callback(block,error){if(code[index]=block,++loaded,error&&errors.push(filename+" ==> "+error),loaded===sourcesCount){if(0!==errors.length)throw"Processing.js: Unable to load pjs sketch files: "+errors.join("\n");try{return new Processing(canvas,code.join("\n"))}catch(e){throw"Processing.js: Unable to execute pjs sketch: "+e}}}if("#"===filename.charAt(0)){var scriptElement=document.getElementById(filename.substring(1));return void(scriptElement?callback(scriptElement.text||scriptElement.textContent):callback("","Unable to load pjs sketch: element with id '"+filename.substring(1)+"' was not found"))}ajaxAsync(filename,callback)}for(var code=[],errors=[],sourcesCount=sources.length,loaded=0,i=0;sourcesCount>i;++i)loadBlock(i,sources[i])},init=function(){document.removeEventListener("DOMContentLoaded",init,!1),processingInstances=[];for(var filenames,canvas=document.getElementsByTagName("canvas"),i=0,l=canvas.length;l>i;i++){var processingSources=canvas[i].getAttribute("data-processing-sources");if(null===processingSources&&(processingSources=canvas[i].getAttribute("data-src"),null===processingSources&&(processingSources=canvas[i].getAttribute("datasrc"))),processingSources){filenames=processingSources.split(/\s+/g);for(var j=0;j<filenames.length;)filenames[j]?j++:filenames.splice(j,1);loadSketchFromSources(canvas[i],filenames)}}var s,last,source,instance,nodelist=document.getElementsByTagName("script"),scripts=[];for(s=nodelist.length-1;s>=0;s--)scripts.push(nodelist[s]);for(s=0,last=scripts.length;last>s;s++){var script=scripts[s];
if(script.getAttribute){var type=script.getAttribute("type");if(type&&("text/processing"===type.toLowerCase()||"application/processing"===type.toLowerCase())){var target=script.getAttribute("data-processing-target");if(canvas=undef,target)canvas=document.getElementById(target);else{for(var nextSibling=script.nextSibling;nextSibling&&1!==nextSibling.nodeType;)nextSibling=nextSibling.nextSibling;nextSibling&&"canvas"===nextSibling.nodeName.toLowerCase()&&(canvas=nextSibling)}if(canvas){if(script.getAttribute("src")){filenames=script.getAttribute("src").split(/\s+/),loadSketchFromSources(canvas,filenames);continue}source=script.textContent||script.text,instance=new Processing(canvas,source)}}}}};Processing.reload=function(){if(processingInstances.length>0)for(var i=processingInstances.length-1;i>=0;i--)processingInstances[i]&&processingInstances[i].exit();init()},Processing.loadSketchFromSources=loadSketchFromSources,Processing.disableInit=function(){isDOMPresent&&document.removeEventListener("DOMContentLoaded",init,!1)},isDOMPresent?(window.Processing=Processing,document.addEventListener("DOMContentLoaded",init,!1)):this.Processing=Processing}(window,window.document,Math),function(root,factory){"function"==typeof define&&define.amd?define(factory):"object"==typeof exports?module.exports=factory(require,exports,module):root.scrollReveal=factory()}(this,function(require,exports,module){return window.scrollReveal=function(window){"use strict";function scrollReveal(config){return this instanceof scrollReveal?(self=this,self.elems={},self.serial=1,self.blocked=!1,self.config=_extend(self.defaults,config),self.isMobile()&&!self.config.mobile||!self.isSupported()?void self.destroy():(self.config.viewport===window.document.documentElement?(window.addEventListener("scroll",_handler,!1),window.addEventListener("resize",_handler,!1)):self.config.viewport.addEventListener("scroll",_handler,!1),void self.init(!0))):new scrollReveal(config)}var _requestAnimFrame,_extend,_handler,self;return scrollReveal.prototype={defaults:{enter:"bottom",move:"8px",over:"0.6s",wait:"0s",easing:"ease",scale:{direction:"up",power:"5%"},rotate:{x:0,y:0,z:0},opacity:0,mobile:!1,reset:!1,viewport:window.document.documentElement,delay:"once",vFactor:.6,complete:function(el){}},init:function(flag){var serial,elem,query;query=Array.prototype.slice.call(self.config.viewport.querySelectorAll("[data-sr]")),query.forEach(function(el){serial=self.serial++,elem=self.elems[serial]={domEl:el},elem.config=self.configFactory(elem),elem.styles=self.styleFactory(elem),elem.seen=!1,el.removeAttribute("data-sr"),el.setAttribute("style",elem.styles.inline+elem.styles.initial)}),self.scrolled=self.scrollY(),self.animate(flag)},animate:function(flag){function complete(key){var elem=self.elems[key];setTimeout(function(){elem.domEl.setAttribute("style",elem.styles.inline),elem.config.complete(elem.domEl),delete self.elems[key]},elem.styles.duration)}var key,elem,visible;for(key in self.elems)self.elems.hasOwnProperty(key)&&(elem=self.elems[key],visible=self.isElemInViewport(elem),visible?("always"===self.config.delay||"onload"===self.config.delay&&flag||"once"===self.config.delay&&!elem.seen?elem.domEl.setAttribute("style",elem.styles.inline+elem.styles.target+elem.styles.transition):elem.domEl.setAttribute("style",elem.styles.inline+elem.styles.target+elem.styles.reset),elem.seen=!0,elem.config.reset||elem.animating||(elem.animating=!0,complete(key))):!visible&&elem.config.reset&&elem.domEl.setAttribute("style",elem.styles.inline+elem.styles.initial+elem.styles.reset));self.blocked=!1},configFactory:function(elem){var parsed={},config={},words=elem.domEl.getAttribute("data-sr").split(/[, ]+/);return words.forEach(function(keyword,i){switch(keyword){case"enter":parsed.enter=words[i+1];break;case"wait":parsed.wait=words[i+1];break;case"move":parsed.move=words[i+1];break;case"ease":parsed.move=words[i+1],parsed.ease="ease";break;case"ease-in":if("up"==words[i+1]||"down"==words[i+1]){parsed.scale.direction=words[i+1],parsed.scale.power=words[i+2],parsed.easing="ease-in";break}parsed.move=words[i+1],parsed.easing="ease-in";break;case"ease-in-out":if("up"==words[i+1]||"down"==words[i+1]){parsed.scale.direction=words[i+1],parsed.scale.power=words[i+2],parsed.easing="ease-in-out";break}parsed.move=words[i+1],parsed.easing="ease-in-out";break;case"ease-out":if("up"==words[i+1]||"down"==words[i+1]){parsed.scale.direction=words[i+1],parsed.scale.power=words[i+2],parsed.easing="ease-out";break}parsed.move=words[i+1],parsed.easing="ease-out";break;case"hustle":if("up"==words[i+1]||"down"==words[i+1]){parsed.scale.direction=words[i+1],parsed.scale.power=words[i+2],parsed.easing="cubic-bezier( 0.6, 0.2, 0.1, 1 )";break}parsed.move=words[i+1],parsed.easing="cubic-bezier( 0.6, 0.2, 0.1, 1 )";break;case"over":parsed.over=words[i+1];break;case"flip":case"pitch":parsed.rotate=parsed.rotate||{},parsed.rotate.x=words[i+1];break;case"spin":case"yaw":parsed.rotate=parsed.rotate||{},parsed.rotate.y=words[i+1];break;case"roll":parsed.rotate=parsed.rotate||{},parsed.rotate.z=words[i+1];break;case"reset":"no"==words[i-1]?parsed.reset=!1:parsed.reset=!0;break;case"scale":if(parsed.scale={},"up"==words[i+1]||"down"==words[i+1]){parsed.scale.direction=words[i+1],parsed.scale.power=words[i+2];break}parsed.scale.power=words[i+1];break;case"vFactor":case"vF":parsed.vFactor=words[i+1];break;case"opacity":parsed.opacity=words[i+1];break;default:return}}),config=_extend(config,self.config),config=_extend(config,parsed),"top"===config.enter||"bottom"===config.enter?config.axis="Y":("left"===config.enter||"right"===config.enter)&&(config.axis="X"),("top"===config.enter||"left"===config.enter)&&(config.move="-"+config.move),config},styleFactory:function(elem){function build(){0!==parseInt(cfg.move)&&(initial+=" translate"+cfg.axis+"("+cfg.move+")",target+=" translate"+cfg.axis+"(0)"),0!==parseInt(cfg.scale.power)&&("up"===cfg.scale.direction?cfg.scale.value=1-.01*parseFloat(cfg.scale.power):"down"===cfg.scale.direction&&(cfg.scale.value=1+.01*parseFloat(cfg.scale.power)),initial+=" scale("+cfg.scale.value+")",target+=" scale(1)"),cfg.rotate.x&&(initial+=" rotateX("+cfg.rotate.x+")",target+=" rotateX(0)"),cfg.rotate.y&&(initial+=" rotateY("+cfg.rotate.y+")",target+=" rotateY(0)"),cfg.rotate.z&&(initial+=" rotateZ("+cfg.rotate.z+")",target+=" rotateZ(0)"),initial+="; opacity: "+cfg.opacity+"; ",target+="; opacity: 1; "}var inline,initial,reset,target,transition,cfg=elem.config,duration=1e3*(parseFloat(cfg.over)+parseFloat(cfg.wait));return inline=elem.domEl.getAttribute("style")?elem.domEl.getAttribute("style")+"; visibility: visible; ":"visibility: visible; ",transition="-webkit-transition: -webkit-transform "+cfg.over+" "+cfg.easing+" "+cfg.wait+", opacity "+cfg.over+" "+cfg.easing+" "+cfg.wait+"; transition: transform "+cfg.over+" "+cfg.easing+" "+cfg.wait+", opacity "+cfg.over+" "+cfg.easing+" "+cfg.wait+"; -webkit-perspective: 1000;-webkit-backface-visibility: hidden;",reset="-webkit-transition: -webkit-transform "+cfg.over+" "+cfg.easing+" 0s, opacity "+cfg.over+" "+cfg.easing+" 0s; transition: transform "+cfg.over+" "+cfg.easing+" 0s, opacity "+cfg.over+" "+cfg.easing+" 0s; -webkit-perspective: 1000; -webkit-backface-visibility: hidden; ",initial="transform:",target="transform:",build(),initial+="-webkit-transform:",target+="-webkit-transform:",build(),{transition:transition,initial:initial,target:target,reset:reset,inline:inline,duration:duration}},getViewportH:function(){var client=self.config.viewport.clientHeight,inner=window.innerHeight;return self.config.viewport===window.document.documentElement&&inner>client?inner:client},scrollY:function(){return self.config.viewport===window.document.documentElement?window.pageYOffset:self.config.viewport.scrollTop+self.config.viewport.offsetTop},getOffset:function(el){var offsetTop=0,offsetLeft=0;do isNaN(el.offsetTop)||(offsetTop+=el.offsetTop),isNaN(el.offsetLeft)||(offsetLeft+=el.offsetLeft);while(el=el.offsetParent);return{top:offsetTop,left:offsetLeft}},isElemInViewport:function(elem){function confirmBounds(){var top=elTop+elHeight*vFactor,bottom=elBottom-elHeight*vFactor,viewBottom=self.scrolled+self.getViewportH(),viewTop=self.scrolled;return viewBottom>top&&bottom>viewTop}function isPositionFixed(){var el=elem.domEl,style=el.currentStyle||window.getComputedStyle(el,null);return"fixed"===style.position}var elHeight=elem.domEl.offsetHeight,elTop=self.getOffset(elem.domEl).top,elBottom=elTop+elHeight,vFactor=elem.config.vFactor||0;return confirmBounds()||isPositionFixed()},isMobile:function(){var agent=navigator.userAgent||navigator.vendor||window.opera;return/(ipad|playbook|silk|android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(agent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(agent.substr(0,4))?!0:!1},isSupported:function(){for(var sensor=document.createElement("sensor"),cssPrefix="Webkit,Moz,O,".split(","),tests=("transition "+cssPrefix.join("transition,")).split(","),i=0;i<tests.length;i++)if(""===!sensor.style[tests[i]])return!1;return!0},destroy:function(){var node=self.config.viewport,query=Array.prototype.slice.call(node.querySelectorAll("[data-sr]"));query.forEach(function(el){el.removeAttribute("data-sr")})}},_handler=function(e){self.blocked||(self.blocked=!0,self.scrolled=self.scrollY(),_requestAnimFrame(function(){self.animate()}))},_extend=function(target,src){for(var prop in src)src.hasOwnProperty(prop)&&(target[prop]=src[prop]);return target},_requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}(),scrollReveal}(window),scrollReveal});